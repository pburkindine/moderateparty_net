!function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function t(e,t,n){return n&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,a(i.key),i)}}(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o,a,s=[],c=!0,d=!1;try{if(o=(n=n.call(e)).next,0===t);else for(;!(c=(i=o.call(n)).done)&&(s.push(i.value),s.length!==t);c=!0);}catch(u){d=!0,r=u}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(d)throw r}}return s}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||c(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(t,n){if(t){if("string"==typeof t)return e(t,n);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?e(t,n):void 0}}var d={CALL_LIMIT:10,TIME_THRESHOLD:18e5,SAVE_TIME_ON_PAGE_INTERVAL:1e4,MAX_TIME_ON_PAGE_ITEMS_IN_LOCAL_STORAGE:32,DOMAIN_FPH_KEY:"DotmetricsDomainFPH",TIME_STAMP_LIMIT_24_HOURS:864e5,TIME_STAMP_LIMIT_5_DAYS:432e6,NULL_COOKIE_VALUE:"00000000-0000-0000-0000-000000000000"},u={DATA_URL:"/SiteEvent.dotmetrics",PING_URL:"/Ping.dotmetrics",POST_URL:"/DeviceInfo.dotmetrics",AJAX_EVENT_URL:"/AjaxEvent.dotmetrics",BEACON_URL:"/BeaconEvent.dotmetrics",ERROR_EVENT_URL:"/ErrorEvent.dotmetrics",EDI_URL:"/edi",EDI_DAILY_URL:"/edi-daily",UIMUrl:"/urls-in-measurement",DOMAIN_SYNC_URL:"/sync"},l=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF","DotmetricsFont"],h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t(e,0,[{key:"encode",value:function(t){var n,i,r,o,a,s,c,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",l=0;for(t=e.utf8Encode(t);l<t.length;)o=(n=t.charCodeAt(l++))>>2,a=(3&n)<<4|(i=t.charCodeAt(l++))>>4,s=(15&i)<<2|(r=t.charCodeAt(l++))>>6,c=63&r,isNaN(i)?s=c=64:isNaN(r)&&(c=64),u=u+d.charAt(o)+d.charAt(a)+d.charAt(s)+d.charAt(c);return u}},{key:"utf8Encode",value:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}},{key:"SHA1",value:function(e){function t(e,t){return e<<t|e>>>32-t}function n(e){var t,n="";for(t=7;t>=0;t--)n+=(e>>>4*t&15).toString(16);return n}var i,r,o,a,s,c,d,u,l,h=new Array(80),f=1732584193,m=4023233417,v=2562383102,g=271733878,p=3285377520,y=(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}(e)).length,w=new Array;for(r=0;r<y-3;r+=4)o=e.charCodeAt(r)<<24|e.charCodeAt(r+1)<<16|e.charCodeAt(r+2)<<8|e.charCodeAt(r+3),w.push(o);switch(y%4){case 0:r=2147483648;break;case 1:r=e.charCodeAt(y-1)<<24|8388608;break;case 2:r=e.charCodeAt(y-2)<<24|e.charCodeAt(y-1)<<16|32768;break;case 3:r=e.charCodeAt(y-3)<<24|e.charCodeAt(y-2)<<16|e.charCodeAt(y-1)<<8|128}for(w.push(r);w.length%16!=14;)w.push(0);for(w.push(y>>>29),w.push(y<<3&4294967295),i=0;i<w.length;i+=16){for(r=0;r<16;r++)h[r]=w[i+r];for(r=16;r<=79;r++)h[r]=t(h[r-3]^h[r-8]^h[r-14]^h[r-16],1);for(a=f,s=m,c=v,d=g,u=p,r=0;r<=19;r++)l=t(a,5)+(s&c|~s&d)+u+h[r]+1518500249&4294967295,u=d,d=c,c=t(s,30),s=a,a=l;for(r=20;r<=39;r++)l=t(a,5)+(s^c^d)+u+h[r]+1859775393&4294967295,u=d,d=c,c=t(s,30),s=a,a=l;for(r=40;r<=59;r++)l=t(a,5)+(s&c|s&d|c&d)+u+h[r]+2400959708&4294967295,u=d,d=c,c=t(s,30),s=a,a=l;for(r=60;r<=79;r++)l=t(a,5)+(s^c^d)+u+h[r]+3395469782&4294967295,u=d,d=c,c=t(s,30),s=a,a=l;f=f+a&4294967295,m=m+s&4294967295,v=v+c&4294967295,g=g+d&4294967295,p=p+u&4294967295}return(l=n(f)+n(m)+n(v)+n(g)+n(p)).toLowerCase()}}])}();function f(e){this.foundVideoPlayers=[],this.SearchForNewVideoPlayersInterval=5e3,this.newVideoFoundCallback=e,this.startSearching=function(){this.trackVideos()},this.trackVideos=function(){this.searchForVideosInWindow(window);var e=window.document.getElementsByTagName("iframe"),t=this;function n(e){var n=!1;try{n=e.contentWindow}catch(i){return}n&&t.searchForVideosInWindow(e.contentWindow)}for(var i=0;i<e.length;i++)n(e[i]);setTimeout((function(){t.trackVideos()}),this.SearchForNewVideoPlayersInterval)},this.searchForVideosInWindow=function(e){try{e.jwplayer}catch(t){return}this.searchForFlowPlayerPlayersInWindow(e),this.searchForJWPlayerPlayersInWindow(e),this.searchForVideoJSPlayersInWindow(e),this.searchForGreenVideoPlayersInWindow(e),this.searchForHearstVideoPlayersInWindow(e)},this.searchForFlowPlayerPlayersInWindow=function(e){if(e.flowplayer){var t=[],n=0;if(void 0===e.flowplayer.instances)return;for(e.flowplayer.instances.forEach((function(e){t.push(e)})),n=0;n<t.length;n++)this.foundVideoPlayers.indexOf(t[n])<0&&(this.foundVideoPlayers.push(t[n]),this.newVideoFoundCallback("flowPlayer",e.flowplayer.version,t[n]))}},this.searchForJWPlayerPlayersInWindow=function(e){if(e.jwplayer){var t=[],n=e.jwplayer.version;for(i=0;e.jwplayer(i)&&e.jwplayer(i).id;)t.push(e.jwplayer(i)),i++;for(var i=0;i<t.length;i++){for(var r=!0,o=0;o<this.foundVideoPlayers.length;o++)this.foundVideoPlayers[o].id&&this.foundVideoPlayers[o].id==t[i].id&&(r=!1);r&&(this.foundVideoPlayers.push(t[i]),this.newVideoFoundCallback("jwPlayer",t[i].version?t[i].version:n,t[i]))}}},this.searchForVideoJSPlayersInWindow=function(e){if(e.videojs&&"object"==s(e.videojs.players))for(var t in e.videojs.players){var n=e.videojs.players[t];n&&this.foundVideoPlayers.indexOf(n)<0&&(this.foundVideoPlayers.push(n),this.newVideoFoundCallback("videojs",e.videojs.VERSION,n))}},this.searchForGreenVideoPlayersInWindow=function(e){var t=this;window.customElements&&"function"==typeof window.customElements.whenDefined&&window.customElements.whenDefined("green-video").then((function(){var e=document.querySelector("green-video");e&&!e.dotmetricsPluginRegistered&&e.data&&(e.dotmetricsPluginRegistered=!0,t.newVideoFoundCallback("green-video",1,e))}))},this.searchForHearstVideoPlayersInWindow=function(e){if(e.videoPlayerManager&&Array.isArray(e.videoPlayerManager.instances))for(var t=0;t<e.videoPlayerManager.instances.length;t++){var n=e.videoPlayerManager.instances[t];n&&this.foundVideoPlayers.indexOf(n)<0&&(this.foundVideoPlayers.push(n),this.newVideoFoundCallback("hearst-video",1,n))}},this.manuallyAddVideoPlayerInstance=function(e,t){if(e&&"object"===s(e)){if("flowPlayer"===t){if(!this.validateFPInstance(e))throw new Error("Invalid FlowPlayer instance")}else if("jwPlayer"===t){if(!this._validateJWPlayerInstance(e))throw new Error("Invalid jwPlayer instance")}else if("videojs"===t){if(!this._validateVideoJSInstance(e))throw new Error("Invalid videojs player instance")}else{if("green-video"!==t)throw new Error("Invalid video player type");if(!this._validateGreenVideoInstance(e))throw new Error("Invalid green-video player instance")}for(var n=0;n<this.foundVideoPlayers.length;n++)if(this.foundVideoPlayers[n]===e)return!1;return this.foundVideoPlayers.push(e),this.newVideoFoundCallback(t,null,e),!0}},this.validateFPInstance=function(e){if(!e||"object"!==s(e))return!1;for(var t=0,n=["currentSrc","duration","currentTime","videoWidth","videoHeight","opts","playerState"];t<n.length;t++){if(!(n[t]in e))return!1}if("string"!=typeof e.currentSrc||"number"!=typeof e.duration||"number"!=typeof e.currentTime||"number"!=typeof e.videoWidth||"number"!=typeof e.videoHeight||"object"!==s(e.opts)||"object"!==s(e.playerState))return!1;for(var i=0,r=["on","off"];i<r.length;i++){if("function"!=typeof e[r[i]])return!1}return!0},this._validateJWPlayerInstance=function(e){if(!e||"object"!==s(e))return!1;for(var t=0,n=["getPlaylistItem","getWidth","getHeight","getDuration","getPosition","on","off"];t<n.length;t++){if("function"!=typeof e[n[t]])return!1}return"function"==typeof e.on||"function"==typeof e.onPlay&&"function"==typeof e.onSeek&&"function"==typeof e.onTime},this._validateVideoJSInstance=function(e){if(!e||"object"!==s(e))return!1;for(var t=0,n=["currentSrc","duration","currentTime","on","off","seeking"];t<n.length;t++){if("function"!=typeof e[n[t]])return!1}var i="function"==typeof e.videoWidth||"function"==typeof e.width,r="function"==typeof e.videoHeight||"function"==typeof e.height;return!(!i||!r)},this._validateGreenVideoInstance=function(e){if(!e||"object"!==s(e))return!1;for(var t=["ad","config","data","plugin","tracking","ui","vendor","video"],n=0;n<t.length;n++)if(!e[t[n]])return!1;return"object"===s(e.ad)&&"object"===s(e.config)&&"object"===s(e.data)&&"object"===s(e.plugin)&&"object"===s(e.tracking)&&"object"===s(e.ui)&&"object"===s(e.vendor)&&"object"===s(e.video)&&"function"==typeof e.plugin.register}}function m(){var e;try{e=window.localStorage;var t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(n){return!1}}function v(e){if(m())for(var t in e)e.hasOwnProperty(t)&&window.localStorage.setItem(t+"",e[t])}function g(e){return m()?window.localStorage.getItem(e+""):null}function p(e){return m()?window.localStorage.removeItem(e+""):null}function y(e,t,i,a){this.urlDecoratedPropertyName="dmid",this.domainsInMeasurement=[],this.Core=e,this.SettingsObject=t,this.domainCookie=i,this.domainCookieTs=a,this.listenForVisitor=function(){if(this.domainCookie&&this.domainCookie!==d.NULL_COOKIE_VALUE&&this.SettingsObject.UrlDecoratorEnabled){var e=this;try{!function(){if(window.location.href.includes(e.urlDecoratedPropertyName)){var t=window.location.href.indexOf(e.urlDecoratedPropertyName);if(!((new Date).getTime()-e.domainCookieTs<d.TIME_STAMP_LIMIT_24_HOURS)){var n=window.location.href.substring(t+e.urlDecoratedPropertyName.length+1,window.location.href.length);e.domainCookie!==n&&n!==d.NULL_COOKIE_VALUE&&e.Core.performAjaxPost(e.Core.baseUrlPrefix+u.DOMAIN_SYNC_URL,{dcd:n,dc:e.domainCookie,ecid:e.SettingsObject.EventChainId})}var i=window.location.href.slice(0,t-1);history.replaceState({},"",i)}}();var t=Array.from(document.querySelectorAll("a")).filter((function(e){return e.href})),i=o(new Set(t.map((function(e){var t;try{if((t=new URL(e.href).hostname).includes("www."))return t.slice(4)}catch(n){return""}return t})).filter((function(e){return e&&e.length})))),a=r(function(){var t,n=[],r=[];try{t=DotmetricsJSON.parse(g("DotmetricsDIM"))}catch(o){t=null,p("DotmetricsDIM")}if(t)return e.domainsInMeasurement=t.filter((function(e){for(var t in e){if(!0===e[t])return!0;break}return!1})).map((function(e){for(var t in e)return t})),i.forEach((function(e){t.find((function(t){return Object.keys(t)[0]===e}))?r.push(e):n.push(e)})),[n,r];return[i,[]]}(),2),s=a[0],c=a[1];s.length?this.Core.performAjaxPost(e.Core.baseUrlPrefix+u.UIMUrl,{id:e.SettingsObject.SiteSectionId,d:s},(function(t){var r=o(new Set([].concat(o(e.domainsInMeasurement),o(DotmetricsJSON.parse(t)))));e.domainsInMeasurement.length||(e.domainsInMeasurement=r);s=[].concat(o(r),o(c)),a=i.map((function(e){return s.includes(e)?n({},e,!0):n({},e,!1)})),v({DotmetricsDIM:DotmetricsJSON.stringify(a)}),e.listenForHyperlinkClicks();var a;var s})):e.listenForHyperlinkClicks()}catch(l){e.Core.sendScriptError(l)}}},this.listenForHyperlinkClicks=function(){var e=this;try{window.addEventListener("click",(function(t){e.checkIfHyperlinkAndInjectId(t,e)}))}catch(t){e.Core.sendScriptError(t)}},this.checkIfHyperlinkAndInjectId=function(e,t){try{var n=function(e){if(!e.hasAttribute("href"))return e.closest("a[href]");return e}(e.target),i=n?n.getAttribute("href"):null;i&&!i.includes(window.location.hostname)&&i.includes("http")&&!i.includes("#")&&function(){try{return t.domainsInMeasurement.find((function(e){return e===new URL(i).hostname.replace("www.","")}))}catch(e){return!1}}()&&(i+="#".concat(t.urlDecoratedPropertyName,"=")+encodeURIComponent(t.domainCookie),n.href=i)}catch(r){t.Core.sendScriptError(r)}}}function w(e,t,n,i){var r=new Date;r.setDate(r.getDate()+n);t=escape(t)+(null==n?"":"; expires="+r.toUTCString());document.cookie=e+"="+t+";path=/;secure;"}function S(e){return D(e)?function(e){for(var t,n=document.cookie.split(";"),i={},r=0,o=n.length;r<o;++r)if((t=n[r].split("="))[0]=t[0].replace(/^\s+|\s+$/,""),!I(e)||e.test(t[0]))try{i[decodeURIComponent(t[0])]=decodeURIComponent(t[1])}catch(a){}return i}()[e+""]:null}function D(e){return new RegExp("(?:;\\s*|^)"+encodeURIComponent(e+"")+"=").test(document.cookie)}function I(e){return"[object RegExp]"==Object.prototype.toString.call(e)}function b(e){function t(e){for(var t={},n=Object.keys(e).sort((function(e,t){return e.localeCompare(t)})),i=0;i<n.length;i++)t[n[i]]=e[n[i]];return t}this.dataSendCount=0,this.pingSendCount=0,this.formPostCount=0,this.SettingsObject=e,this.baseUrlPrefix=this.SettingsObject.BaseUrl,this.sendData=function(e,t){switch(e){case this.baseUrlPrefix+u.DATA_URL:if(this.dataSendCount++,this.dataSendCount>d.CALL_LIMIT)return;break;case this.baseUrlPrefix+u.PING_URL:if(this.pingSendCount++,this.pingSendCount>d.CALL_LIMIT)return}var n="";if(null!=t){var i=h.encode(DotmetricsJSON.stringify(t));n="&v="+(i=encodeURIComponent(i))}var r=e+"?r="+(new Date).getTime()+n,o=document.createElement("script");o.setAttribute("src",r);var a=document.getElementsByTagName("head")[0]||document.head||document.body;try{a.appendChild(o)}catch(c){var s="";try{s=document.documentElement.outerHTML}catch(l){}this.sendScriptError(c,{doc:s})}},this.performAjaxPost=function(e,t,n){var i=h.encode(DotmetricsJSON.stringify(t));i=encodeURIComponent(i);var r=(new Date).getTime(),o="v="+i+"&r="+r;e+="?"+r;var a=new XMLHttpRequest;a.open("POST",e,!0),a.withCredentials=!0,a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n&&a.addEventListener("loadend",(function(){n(a.response)})),a.send(o)},this.performFPPost=function(e,t,n){var i=h.encode(DotmetricsJSON.stringify(t));i=encodeURIComponent(i);var r=(new Date).getTime(),o="v="+i+"&r="+r;e+="?"+r;var a=new XMLHttpRequest;a.open("POST",e,!0),a.withCredentials=!0,a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n&&a.addEventListener("loadend",(function(){n(a.response)})),a.send(o)},this.performSendBeacon=function(e,t){this.sendMessageToExtension({target:"dotmetrics-extension",type:"beacon",url:e,data:t});var n=h.encode(DotmetricsJSON.stringify(t));n=encodeURIComponent(n);var i=(new Date).getTime(),r=new Blob(["v="+n+"&r="+i],{type:"application/x-www-form-urlencoded"});try{return P.boundBeacon(e,r)}catch(o){return!1}},this.addEventSimple=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},this.removeEventSimple=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)},this.isIE=function(){return-1!=navigator.appName.indexOf("Microsof")},this.sortByProperty=function(e,t,n){return e.sort((function(e,i){return e[t]<i[t]?"asc"===n?1:-1:e[t]>[t]?"asc"===n?-1:1:0}))},this.CreateElement=function(e,t,n){if(null!=e){var i=document.createElement(e);if(null!=t)for(x in t)"function"==typeof t[x]?this.addEventSimple(i,x,t[x]):(i.setAttribute(x,t[x]),"class"==x&&(i.className=t[x]));if(null!=n){var r=document.createTextNode(n.toString());i.appendChild(r)}return i}return null!=n?document.createTextNode(n.toString()):null},this.clientInfo=null,this.clientInfoTimingData=null,this.createClientInfo=function(e){if(this.clientInfo)e&&e();else{this.clientInfoTimingData={};var t=(new Date).getTime(),n={};n.AppCodeName=window.navigator.appCodeName,n.AppName=window.navigator.appName,n.Version=window.navigator.appVersion,n.Language=window.navigator.language,n.Platform=window.navigator.platform,n.Product=window.navigator.product,n.ProductSub=window.navigator.productSub,n.UserAgent=window.navigator.userAgent,n.Vendor=window.navigator.vendor,n.VendorSub=window.navigator.vendorSub,n.BuildId=window.navigator.buildID,n.OsCpu=window.navigator.oscpu,n.Screen={},n.Screen.AvailableWidth=window.screen.availWidth,n.Screen.AvailableHeight=window.screen.availHeight,n.Screen.PixelDepth=window.screen.pixelDepth,n.Screen.ColorDepth=window.screen.colorDepth;var i=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI;if(n.Screen.Width=Math.round(window.screen.width*i),n.Screen.Height=Math.round(window.screen.height*i),null==n.Screen.Width&&(n.Screen.Width=n.Screen.AvailableWidth),null==n.Screen.Height&&(n.Screen.Height=n.Screen.AvailableHeight),n.Plugins=[],window.ActiveXObject){var o=/[0-9]+/,a={flash:"ShockwaveFlash.ShockwaveFlash",pdf:"AcroPDF.PDF",silverlight:"AgControl.AgControl",quicktime:"QuickTime.QuickTime"};for(var s in a){var c=this.msieDetect(a[s]);if(c){var d=o.exec(c);c=d&&d[0]||"";var u={};u.Name=a[s],u.FileName="",n.Plugins.push(u)}}}else for(var l=0;l<window.navigator.plugins.length;l++){if(void 0!==(s=window.navigator.plugins[l]))(f={}).Name=s.name,f.FileName=s.filename,n.Plugins.push(f)}n.MimeTypes=[];var h;for(l=0;h=window.navigator.mimeTypes[l];l++){var f;(f={}).Type=h.type,f.Suffixes=h.suffixes,n.MimeTypes.push(f)}t=(new Date).getTime()-t,this.clientInfoTimingData.basicInfoTime=t;var m=(new Date).getTime();n.Canvas=this.CreateCanvasFP(),m=(new Date).getTime()-m,this.clientInfoTimingData.canvasInfoTime=m;var v=(new Date).getTime();this.runDeviceInfoFontDetection((function(t){n.FontString=t,r.clientInfo=n,v=(new Date).getTime()-v,r.clientInfoTimingData.fontInfoTime=v,e()}))}},this.runDeviceInfoFontDetection=function(e){var t=this;try{var n=function(){window.removeEventListener("message",i),clearTimeout(o),r.parentNode&&r.parentNode.removeChild(r)},i=function(i){if(i.origin===t.SettingsObject.BaseUrl&&i.data&&"dm-di"===i.data.source){if(i.data.error)throw new Error(i.data.error);e(i.data.result),n()}},r=document.createElement("iframe");r.src=this.SettingsObject.BaseUrl+"/Scripts/dm-di.html",r.style.display="block",r.style.position="absolute",r.style.top="0",r.style.left="0",r.style.pointerEvents="none",r.style.visibility="hidden",r.style.zIndex="-1",document.body.appendChild(r),window.addEventListener("message",i);var o=setTimeout((function(){throw n(),new Error("Timed out waiting for dm-di message")}),2e3)}catch(a){this.sendScriptError(a)}},this.domainFPData=null,this.runDomainFP=function(e){null!=this.domainFPData&&e(this.domainFPData);var t={},n={},i=this,r=(new Date).getTime(),o=0,a=setInterval((function(){o+=c}),100);this.runEdi({callback:function(){var s=h.SHA1(DotmetricsJSON.stringify(t));t.unstable&&(s+="_unstable"),clearInterval(a);var c=(new Date).getTime();n={t:c-r,tInt:o},i.domainFPData={dfp:t,dfph:s.toString(),timingData:n},e(i.domainFPData)},ediDataObject:t,asyncTestList:this.domainFpAsyncTests,syncTestList:this.domainFpSyncTests})};var r=this;this.domainFpSyncTests=[function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.runHasLocalStorageFp(e,t)},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.runBluetoothAPI(e,t)},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.createWebglFP(e,t,[{numTriangles:1,vertexData:[-.876,-.65634,0,.8634,-.85673,0,0,.7234,0],colorData:[.986,.12,.55,0,1,0,0,0,1],imageName:"Img1"}])},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.createForcedColorsFP(e,t)},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.createDynamicContrastFP(e,t)},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.createMonochromaticFP(e,t)},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.createTransparencyFP(e,t)},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.createArchitectureFP(e,t)},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.createMathCalculationsFP(e,t)},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.createSampleRateFp(e,t)},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.createMotionFp(e,t)},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.createColorGamutFp(e,t)},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.createTouchSupportFp(e,t)},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.createNavigatorFP(e,t,{testWidth:!1})},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.browserFeaturesFP(e,t)},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.createWebGlPropertiesFp(e,t)}],this.domainFpAsyncTests=[function(e,t,n){r.runMediaDeviceInfoFp({callback:e,ediDataObject:t,timingDataObject:n,testInfo:!1,testCount:!0})},function(e,t,n){r.createAudioFp("triangle",e,t,n)},function(e,t,n){r.createDomainFontFP({resultProperty:"expFontsOld",testFonts:l,callback:e},t,n)},function(e,t,n){r.createNewCanvasFP({callback:e,ediDataObject:t,timingDataObject:n,options:{renderText:!1,renderGeometry:!0}})},function(e,t,n){r.createPermissionsAndSensorFP(e,t,n)}],this.runEdi=function(e){for(var t=e.callback,n=e.ediDataObject,i=e.timingDataObject,r=void 0===i?{}:i,o=e.asyncTestList,a=e.syncTestList,s=0;s<a.length;s++)a[s](n,r);var c=0;!function e(){c<o.length?setTimeout((function(){o[c](e,n,r),c++}),20):t()}()},this.browserFeaturesFP=function(e,t){var r=(new Date).getTime(),o={style:{elem:document.createElement("dotmetrics")}.elem.style};function a(e){return e.replace(/([a-z])-([a-z])/g,(function(e,t,n){return t+n.toUpperCase()})).replace(/^-/,"")}function c(e,t,n,i,r){var s=e.charAt(0).toUpperCase()+e.slice(1),c=(e+" "+"Moz O ms Webkit".split(" ").join(s+" ")+s).split(" ");return h(t,"string")||h(t,"undefined")?function(e,t,n,i){if(i=!h(i,"undefined")&&i,!h(n,"undefined")){var r=function(e,t){var n=e.length;if("CSS"in window&&"supports"in window.CSS){for(;n--;)if(window.CSS.supports(u(e[n]),t))return!0;return!1}if("CSSSupportsRule"in window){for(var i=[];n--;)i.push("("+u(e[n])+":"+t+")");return i=i.join(" or "),injectElementWithStyles("@supports ("+i+") { #dotmetrics { position: absolute; } }",(function(e){return"absolute"===computedStyle(e,null,"position")}))}return}(e,n);if(!h(r,"undefined"))return r}var s,c,l,f,m,v=["dotmetrics","tspan","samp"];for(;!o.style&&v.length;)s=!0,o.modElem=document.createElement(v.shift()),o.style=o.modElem.style;function g(){s&&(delete o.style,delete o.modElem)}for(l=e.length,c=0;c<l;c++)if(f=e[c],m=o.style[f],d(f,"-")&&(f=a(f)),void 0!==o.style[f]){if(i||h(n,"undefined"))return g(),"pfx"!==t||f;try{o.style[f]=n}catch(p){}if(o.style[f]!==m)return g(),"pfx"!==t||f}return g(),!1}(c,t,i,r):function(e,t,n){var i;for(var r in e)if(e[r]in t)return!1===n?e[r]:h(i=t[e[r]],"function")?l(i,n||t):i;return!1}(c=(e+" "+"Moz O ms Webkit".toLowerCase().split(" ").join(s+" ")+s).split(" "),t,n)}function d(e,t){return!!~(""+e).indexOf(t)}function u(e){return e.replace(/([A-Z])/g,(function(e,t){return"-"+t.toLowerCase()})).replace(/^ms-/,"-ms-")}function l(e,t){return function(){return e.apply(t,arguments)}}function h(e,t){return s(e)===t}function f(e){var t=document.createElement("video"),n={};try{t.canPlayType&&("video.ogg"===e&&(n["video.ogg"]=t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")),"video.hls"===e&&(n["video.hls"]=t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")))}catch(i){}return t.remove(),n}function m(e){var t=e(),n="";if("object"===s(t))for(var i in t)n+=1==t[i]?"1":"0";else n+=1==t?"1":"0";return n}for(var v=[function(){var e=!1;try{e="SVGFEColorMatrixElement"in window&&2===SVGFEColorMatrixElement.SVG_FECOLORMATRIX_TYPE_SATURATE}catch(t){}return e},function(){return"openDatabase"in window},function(){return f("video.hls")},function(){return"Worker"in window},function(){return"capture"in document.createElement("input")},function(){return f("video.ogg")},function(){return e="search",i=!("onblur"in document),t&&"string"!=typeof t||(t=document.createElement(t||"div")),!(n=(e="on"+e)in t)&&i&&(t.setAttribute||(t=document.createElement("div")),t.setAttribute(e,""),n="function"==typeof t[e],"undefined"!==t[e]&&(t[e]=void 0),t.removeAttribute(e)),n;var e,t,n,i},function(){return c("translate","45px",!0)},function(){return"applicationCache"in window},function(){return c("backdropFilter")},function(){return c("fontVariationSettings")},function(){return"import"in document.createElement("link")},function(){return c("scrollSnapType")},function(){var e=document.createElement("canvas");return{emoji:!!(!!(!!e.getContext&&!!e.getContext("2d"))&&"function"==typeof e.getContext("2d").fillText)&&function(){var t=e.getContext("2d"),n=12*(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1);t.fillStyle="#f00",t.textBaseline="top",t.font="32px Arial",t.fillText("🐨",0,0);var i=t.getImageData(0,0,n,n);return!(!i||!i.data)&&0!==i.data[0]}()}},function(){return!!(Array.prototype&&Array.prototype.copyWithin&&Array.prototype.fill&&Array.prototype.find&&Array.prototype.findIndex&&Array.prototype.keys&&Array.prototype.entries&&Array.prototype.values&&Array.from&&Array.of)},function(){var e=document.createElement("canvas");return{todataurlwebp:function(t){var n=!1;try{n=0===e.toDataURL("image/"+t).indexOf("data:image/"+t)}catch(i){}return n}("webp")}},function(){var e=!1;try{e="WebSocket"in window&&2===window.WebSocket.CLOSING}catch(t){}return e},function(){var e,t=document.createElement("audio");return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t.canPlayType?{"audio.m4a":(e=(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),"function"==typeof e?e():e)}:{})}],g="",p=0;p<v.length;p++)g+=m(v[p]);var y=(new Date).getTime();e.browserFeatures=g,t.browserFeatures=y-r},this.createWebGlPropertiesFp=function(e,t){var n=this;n.startFPTimer();var i=(new Date).getTime();try{var r,o=function(e){try{return e()}catch(t){return""}},a=document.createElement("canvas");a.width=100,a.height=100,a.style.display="none";try{document.body.appendChild(a)}catch(m){return void f()}for(var s=(r=window.WebGL2RenderingContext&&a.getContext("webgl2",{stencil:!0})?window.WebGL2RenderingContext:window.WebGLRenderingContext)===window.WebGL2RenderingContext?["webgl2","experimental-webgl2"]:["webgl","experimental-webgl"],c=null,d={},u=0;u<s.length;u++)if(c=a.getContext(s[u],{stencil:!0})){s[u];break}if(!c)return void f();d.unMaskedVendor=o((function(){return l(c).vendor})),d.unMaskedRenderer=o((function(){return l(c).renderer})),d.extensions=c.getSupportedExtensions()?o((function(){return c.getSupportedExtensions().join(",")})):"",r===window.WebGL2RenderingContext&&(d.maxCombinedUniformBlocks=c.MAX_COMBINED_UNIFORM_BLOCKS?o((function(){return c.getParameter(c.MAX_COMBINED_UNIFORM_BLOCKS)})):null,d.maxCombinedVertexUniformComponents=c.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS?o((function(){return c.getParameter(c.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS)})):null),d.maxViewportDimensions=o((function(){return h(c.getParameter(c.MAX_VIEWPORT_DIMS))})),d.maxCombinedTextureImageUnits=o((function(){return c.getParameter(c.MAX_COMBINED_TEXTURE_IMAGE_UNITS)})),d.maxRenderBufferSize=o((function(){return c.getParameter(c.MAX_RENDERBUFFER_SIZE)})),r===window.WebGL2RenderingContext&&(d.maxTransformFeedbackInterleavedComponents=c.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS?o((function(){return c.getParameter(c.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS)})):null,d.max3dTextureSize=c.MAX_3D_TEXTURE_SIZE?o((function(){return c.getParameter(c.MAX_3D_TEXTURE_SIZE)})):null,d.maxArrayTextureLayers=c.MAX_ARRAY_TEXTURE_LAYERS?o((function(){return c.getParameter(c.MAX_ARRAY_TEXTURE_LAYERS)})):null,d.maxSamples=c.MAX_SAMPLES?o((function(){return c.getParameter(c.MAX_SAMPLES)})):null),d.aliasedPointSizeRange=o((function(){return h(c.getParameter(c.ALIASED_POINT_SIZE_RANGE))})),e.webGlProps=DotmetricsJSON.stringify(d),t.webGlTime=(new Date).getTime()-i,t.webGlTimeInt=n.stopFPTimer()}catch(m){n.sendScriptError(m)}function l(e){var t={renderer:"",vendor:""},n=e.getExtension("WEBGL_debug_renderer_info");return null!=n&&(t.renderer=e.getParameter(n.UNMASKED_RENDERER_WEBGL),t.vendor=e.getParameter(n.UNMASKED_VENDOR_WEBGL)),t}function h(e){return"["+e[0]+", "+e[1]+"]"}function f(){a&&a.remove(),e.webGlProps="failed",t.webGlTime=(new Date).getTime()-i,t.webGlTimeInt=n.stopFPTimer()}},this.createNavigatorFP=function(e,t){var n={};n.AvailableHeight=window.screen.availHeight,n.Height=Math.round(window.screen.height*devicePixelRatio),n.UserAgent=window.navigator.userAgent,n.Version=window.navigator.appVersion,n.OsCpu=window.navigator.oscpu,n.ColorDepth=window.screen.colorDepth,n.PixelDepth=window.screen.pixelDepth,t.testWidth&&(e.AvailableWidth=window.screen.availWidth,e.Width=Math.round(window.screen.width*devicePixelRatio)),e.Language=window.navigator.language.split("-")[0],e.navigatorProps=n},this.createPermissionsAndSensorFP=function(e,n,i){var r=this,o=(new Date).getTime();r.startFPTimer();var a={},s=["background-sync","payment-handler","accelerometer","gyroscope","magnetometer","ambient-light-sensor","midi"];try{for(var c=0;c<s.length;c++)l(s[c])}catch(h){this.sendScriptError(h),e()}function d(){var s={},c={absoluteOrientationSensor:function(){var e=!1;"function"==typeof AbsoluteOrientationSensor&&(e=AbsoluteOrientationSensor);u(e,"absoluteOrientationSensor",["accelerometer","gyroscope","magnetometer"])},accelerometer:function(){var e=!1;"function"==typeof Accelerometer&&(e=Accelerometer);u(e,"accelerometer",["accelerometer"])},magnetometer:function(){var e=!1;"function"==typeof Magnetometer&&(e=Magnetometer);u(e,"magnetometer",["magnetometer"])},gyroscope:function(){var e=!1;"function"==typeof Gyroscope&&(e=Gyroscope);u(e,"gyroscope",["gyroscope"])},gravity:function(){var e=!1;"function"==typeof GravitySensor&&(e=GravitySensor);u(e,"gravity",["accelerometer"])},linearAcceleration:function(){var e=!1;"function"==typeof LinearAccelerationSensor&&(e=LinearAccelerationSensor);u(e,"linearAcceleration",["accelerometer"])},relativeOrientation:function(){var e=!1;"function"==typeof RelativeOrientationSensor&&(e=RelativeOrientationSensor);u(e,"relativeOrientation",["accelerometer","gyroscope"])},ambientLight:function(){var e=!1;"function"==typeof AmbientLightSensor&&(e=AmbientLightSensor);u(e,"ambientLight",["ambient-light-sensor"])}};for(var d in c)c[d]();function u(d,u,l){var f={hasReading:!1};if(d)try{var m=function(){clearTimeout(v),g(),f.removeEventListener("reading",m),f.stop()};if(l.every((function(e){return"granted"===a[e]}))){(f=new d({frequency:60})).addEventListener("reading",m),f.start();var v=setTimeout(m,1e3)}else g()}catch(h){g()}else g();function g(){s[u]=f.hasReading,Object.keys(s).length===Object.keys(c).length&&(n.sensors=t(s),n.permissions=t(a),i.sensorsPermissionTiming=(new Date).getTime()-o,i.sensorsPermissionTimingInt=r.stopFPTimer(),e())}}}function u(){Object.keys(a).length===Object.keys(s).length&&d()}function l(e){try{navigator.permissions.query({name:e}).then((function(t){a[e]=t.state,u()})).catch((function(){a[e]="Unsupported",u()}))}catch(h){a[e]="Unsupported",u()}}},this.createNewCanvasFP=function(e){var t=e.callback,n=e.ediDataObject,i=e.timingDataObject,r=e.options,o=this,a=(new Date).getTime();o.startFPTimer();try{!function(e,t,n){var i,r,o=!1,a=document.createElement("canvas");a.width=1,a.height=1;var d=a.getContext("2d");if(!d||!a.toDataURL)return i=r="unsupported",{winding:o,geometry:i,text:r};o=function(e){return e.rect(0,0,10,10),e.rect(2,2,6,6),!e.isPointInPath(5,5,"evenodd")}(d),function(e,t,n,i,r){var o,a,d,u;i&&(s(e,t),setTimeout((function(){o=e.toDataURL(),s(e,t),setTimeout((function(){a=e.toDataURL(),o!==a&&(o="unstable"),l()}),0)}),0));r&&(c(e,t),setTimeout((function(){d=e.toDataURL(),c(e,t),setTimeout((function(){u=e.toDataURL(),d!==u&&(d="unstable"),l()}),0)}),0));function l(){r&&i&&d&&u&&o&&a?n([d,o]):r&&!i&&d&&u?n([d]):i&&!r&&o&&a&&n([o])}}(a,d,(function(t){i=t[0],r=t[1],e({winding:o,geometry:i,text:r})}),t,n)}((function(e){var r=(new Date).getTime()-a;n.canvas={},e.geometry&&(n.canvas.geometry=s(e.geometry));e.text&&(n.canvas.text=s(e.text));function s(e){return"unstable"===e&&(n.unstable=!0),"unstable"===e||"unsupported"===e?e:h.SHA1(e).toString()}n.canvas.winding=e.winding,i.newCanvasTiming=r,i.newCanvasTimingInt=o.stopFPTimer(),t()}),r.renderText,r.renderGeometry)}catch(d){this.sendScriptError(d),t()}function s(e,t){e.width=240,e.height=60,t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(100,1,62,20),t.fillStyle="#069",t.font='11pt "Times New Roman"';var n="The quick brown fox jumps over the lazy dog  /* 😃 */"+String.fromCharCode(55357,56835);t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.2)",t.font="18pt Arial",t.fillText(n,4,45)}function c(e,t){e.width=122,e.height=110,t.globalCompositeOperation="multiply";for(var n=[{color:"#f2f",x:40,y:40},{color:"#2ff",x:80,y:40},{color:"#ff2",x:60,y:80}],i=0;i<n.length;i++)t.fillStyle=n[i].color,t.beginPath(),t.arc(n[i].x,n[i].y,40,0,2*Math.PI,!0),t.closePath(),t.fill();t.fillStyle="#f9c",t.arc(60,60,60,0,2*Math.PI,!0),t.arc(60,60,20,0,2*Math.PI,!0),t.fill("evenodd")}},this.createTouchSupportFp=function(e){try{var t=function(){var e,t=0;void 0!==navigator.maxTouchPoints?t=navigator.maxTouchPoints:void 0!==navigator.msMaxTouchPoints&&(t=navigator.msMaxTouchPoints);try{document.createEvent("TouchEvent"),e=!0}catch(i){e=!1}var n="ontouchstart"in window;return{maxTouchPoints:t,touchEvent:e,touchStart:n}}();e.touchSupport={maxTouchPoints:t.maxTouchPoints,touchEvent:t.touchEvent,touchStart:t.touchStart}}catch(n){this.sendScriptError(n)}},this.createColorGamutFp=function(e){try{var t={srgb:window.matchMedia("(color-gamut: srgb)").matches,p3:window.matchMedia("(color-gamut: p3)").matches,rec2020:window.matchMedia("(color-gamut: rec2020)").matches};for(var n in t)if(t[n]){t=n;break}"object"!==s(t)?e.colorGamut=t:e.colorGamut=""}catch(i){this.sendScriptError(i)}},this.createMotionFp=function(e){try{e.motionPreferred=!window.matchMedia("(prefers-reduced-motion: no-preference)").matches}catch(t){this.sendScriptError(t)}},this.createSampleRateFp=function(e){try{if(!window.AudioContext&&!window.webkitAudioContext)return void(e.sampleRate={sampleRate:0,maxChannelCount:0,outputLatency:0});var t=new(window.AudioContext||window.webkitAudioContext);e.sampleRate={sampleRate:t.sampleRate,maxChannelCount:t.destination.maxChannelCount,outputLatency:t.outputLatency}}catch(n){this.sendScriptError(n)}},this.createMathCalculationsFP=function(e){try{var t=function(){return 0},n=function(e){return e||0},i=Math.acos||t,r=Math.acosh||t,o=Math.asin||t,a=Math.asinh||t,s=Math.atanh||t,c=Math.atan||t,d=Math.sin||t,u=Math.sinh||t,l=Math.cos||t,h=Math.cosh||t,f=Math.tan||t,m=Math.tanh||t,v=Math.exp||t,g=Math.expm1||t,p=Math.log1p||t,y={acos:n(i(.12312423423423424)),acosh:n(r(1e308)),asin:n(o(.12312423423423424)),asinh:n(a(1)),atanh:n(s(.5)),atan:n(c(.5)),sin:n(d(-1e300)),sinh:n(u(1)),cos:n(l(10.000000000123)),cosh:n(h(1)),tan:n(f(-1e300)),tanh:n(m(1)),exp:n(v(1)),expm1:n(g(1)),log1p:n(p(10)),powPI:n((D=-100,Math.pow(Math.PI,D))),acoshPf:n(function(e){return Math.log(e+Math.sqrt(e*e-1))}(1e154)),asinhPf:n(function(e){return Math.log(e+Math.sqrt(e*e+1))}(1)),atanhPf:n(function(e){return Math.log((1+e)/(1-e))/2}(.5)),sinhPf:n(function(e){return Math.exp(e)-1/Math.exp(e)/2}(1)),coshPf:n(function(e){return(Math.exp(e)+1/Math.exp(e))/2}(1)),expm1Pf:n(function(e){return Math.exp(e)-1}(1)),tanhPf:n(function(e){return(Math.exp(2*e)-1)/(Math.exp(2*e)+1)}(1)),log1pPf:n(function(e){return Math.log(1+e)}(10))},w=0;for(var S in y)w+=y[S]||0;"number"==typeof w&&Number.isFinite(w)?e.math=w:e.math=0}catch(I){e.math=0,this.sendScriptError(I)}var D},this.createArchitectureFP=function(e){try{var t=new Float32Array(1),n=new Uint8Array(t.buffer);t[0]=1/0,t[0]=t[0]-t[0],e.architecture=n[3]}catch(i){this.sendScriptError(i)}},this.createTransparencyFP=function(e){e.IsTransparencyPreferred=window.matchMedia("(prefers-reduced-transparency)").matches},this.createMonochromaticFP=function(e){e.isMonochromatic=window.matchMedia("(monochrome)").matches},this.createDynamicContrastFP=function(e){e.isHDREnabled=window.matchMedia("(dynamic-range: high)").matches},this.runMediaDeviceInfoFp=function(e){var t=e.callback,n=e.ediDataObject,i=e.timingDataObject,r=e.testInfo,o=e.testCount,a=this,s=(new Date).getTime();if(this.startFPTimer(),navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)try{navigator.mediaDevices.enumerateDevices().then((function(e){if(r){n.mediaDeviceInfo=[];for(var c=0;c<e.length;c++)n.mediaDeviceInfo.push({deviceId:e[c].deviceId,groupId:e[c].groupId,kind:e[c].kind,label:e[c].label});n.mediaDeviceInfo=a.sortByProperty(n.mediaDeviceInfo,"kind","desc")}i.mediaDeviceInfoTime=(new Date).getTime()-s,i.mediaDeviceInfoTimeInt=a.stopFPTimer(),o&&(n.mediaDeviceInfoCount=function(e){for(var t=[],n=0;n<e.length;n++){for(var i=!1,r=0;r<t.length;r++)t[r].type===e[n].kind&&(i=!0,t[r].count++);i||t.push({type:e[n].kind,count:1})}return a.sortByProperty(t,"type","desc")}(e)),t()}))}catch(c){t(),this.sendScriptError(c)}},this.createAudioFp=function(e,t,n,i){var r,o=!1,a=!0,s=setTimeout((function(){g.removeEventListener("complete",f),r&&clearTimeout(r),u(-2)}),4e3);try{var c,d=this,u=function(r){o||(o=!0,n["audioFp"+e]=r,i["audioFp"+e]=(new Date).getTime()-c,i["audioFp"+e+"Int"]=d.stopFPTimer(),t())},l=function(){var e=0;try{c=(new Date).getTime(),d.startFPTimer(),++e>3&&u(-1),g.startRendering(),a&&(a=!1,h())}catch(n){t(),d.sendScriptError(n)}},h=function(){"suspended"===g.state&&(r=setTimeout((function(){l()}),500))},f=function(e){try{clearTimeout(s),m(e.renderedBuffer)}catch(n){t(),d.sendScriptError(n)}},m=function(e){var t=0;if(e&&e.getChannelData){var n=e.getChannelData(0);if(n.subarray)for(var i=n.subarray(4500),r=0;r<i.length;++r)t+=Math.abs(i[r])}u(t)},v=window.OfflineAudioContext||window.webkitOfflineAudioContext;if(!v)return void u(-2);var g=new v(1,5e3,44100),p=g.createOscillator();p.type=e,p.frequency.value=1e4;var y=g.createDynamicsCompressor();y.threshold.value=-50,y.knee.value=40,y.ratio.value=12,y.attack.value=0,y.release.value=.25,p.connect(y),y.connect(g.destination),p.start(0),g.addEventListener("complete",f),l()}catch(w){t(),this.sendScriptError(w)}},this.msieDetect=function(e){try{var t=new ActiveXObject(e);try{return t.GetVariable("$version")}catch(r){try{return t.GetVersions()}catch(o){try{for(var n,i=1;i<9;i++)t.isVersionSupported(i+".0")&&(n=i);return n||!0}catch(a){return!0}}}}catch(r){return!1}},this.CreateCanvasFP=function(){var e=document.createElement("canvas");if(e.getContext&&e.getContext("2d")){e.width=250,e.height=250;for(var t=e.getContext("2d"),n=0;n<e.width/2;n++)t.moveTo(2*n,0),t.lineTo(4*n,e.height),t.strokeStyle="rgba(0, 0, 0, 0.1)",t.stroke();t.font="40px 'Arial'";for(n=0;n<3;n++)t.fillStyle="#41b4e7",t.fillText("Dotmetrics",10,50*n+75),t.fillStyle="rgba(255, 255, 255, 0.7)",t.fillText("Dotmetrics",20,50*n+75);var i=e.toDataURL("image/jpeg",1);return h.SHA1(i).toString()}return null},this.runHasLocalStorageFp=function(e){e.hasLocalStorage=m()},this.runBluetoothAPI=function(e){e.bluetoothAPI=!!window.navigator.bluetooth},this.createWebglFP=function(e,t,n){function i(n){var i,r,o=n.numTriangles,a=n.vertexData,s=n.colorData,c=n.imageName,d=(new Date).getTime();(i=document.createElement("canvas")).width=256,i.height=128,r=i.getContext("webgl2")||i.getContext("experimental-webgl2")||i.getContext("webgl")||i.getContext("experimental-webgl")||i.getContext("moz-webgl");var u=null;try{var l=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,l);var f=new Float32Array(a);r.bufferData(r.ARRAY_BUFFER,f,r.STATIC_DRAW),l.itemSize=3,l.numItems=o;var m=new Float32Array(s),v=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,v),r.bufferData(r.ARRAY_BUFFER,m,r.STATIC_DRAW),v.itemSize=3,v.numItems=o;var g=r.createProgram(),p=r.createShader(r.VERTEX_SHADER);r.shaderSource(p,"attribute vec3 attrVertex;attribute vec3 color;varying vec3 vColor;void main(){gl_Position=vec4(attrVertex,1);vColor=color;}"),r.compileShader(p);var y=r.createShader(r.FRAGMENT_SHADER);r.shaderSource(y,"precision mediump float;varying vec3 vColor;void main(){gl_FragColor=vec4(vColor,1);}"),r.compileShader(y),r.attachShader(g,p),r.attachShader(g,y),r.linkProgram(g),r.useProgram(g),r.bindBuffer(r.ARRAY_BUFFER,l),g.vertexPosAttrib=r.getAttribLocation(g,"attrVertex"),g.offsetUniform=r.getUniformLocation(g,"uniformOffset"),r.enableVertexAttribArray(g.vertexPosArray),r.vertexAttribPointer(g.vertexPosAttrib,l.itemSize,r.FLOAT,!1,0,0),r.uniform2f(g.offsetUniform,1,1),r.bindBuffer(r.ARRAY_BUFFER,v);var w=r.getAttribLocation(g,"color");r.enableVertexAttribArray(w),r.vertexAttribPointer(w,v.itemSize,r.FLOAT,!1,0,0),r.drawArrays(r.TRIANGLES,0,3*l.numItems);var S=i.toDataURL("image/jpeg",1);u=h.SHA1(S).toString()}catch(I){}var D=(new Date).getTime();e["webglFp"+c]=u,t["webglFp"+c]=D-d}for(var r=0;r<n.length;r++)i(n[r])},this.createDomainFontFP=function(e,t,n){var i=e.resultProperty,r=e.testFonts,o=e.callback,a=this.createFontTestIframe();try{a.onload=function(){var e=["monospace","sans-serif","serif"],n="thequickbrownfoxjumpsoverthelazydogTHEQUICKBROWNFOXJUMPSOVERTHELAZYDOG0123456789#&!?",s=a.contentDocument.body;s.style.fontSize="72px";var c=a.contentDocument.createElement("div");c.style.setProperty("visibility","hidden","important");var d={},u={};function l(e){var t=a.contentDocument.createElement("span");return t.style="position: absolute; top: 0; left: 0; font-family: "+e+";",t.textContent=n,c.appendChild(t),t}function h(e,t){return l(e+","+t)}function f(t){for(var n=!1,i=0;i<e.length;i++)t[i].offsetWidth===d[e[i]]&&t[i].offsetHeight===u[e[i]]||(n=!0);return n}var m=function(){for(var t={},n=0;n<e.length;n++)t[e[n]]=l(e[n]);return t}(),v=function(){for(var t={},n=0;n<r.length;n++)t[r[n]]=e.map((function(e){return h(r[n],e)}));return t}();s.appendChild(c),setTimeout((function(){for(var n=0;n<e.length;n++)d[e[n]]=m[e[n]].offsetWidth,u[e[n]]=m[e[n]].offsetHeight;var s="";for(n=0;n<r.length;n++){var c=r[n];s+=f(v[c])?"1":"0"}"1"===s[s.length-1]&&(t.unstable=!0),t[i]=s,document.body.removeChild(a),o()}),0)}}catch(s){this.sendScriptError(s),document.body.removeChild(a)}},this.createForcedColorsFP=function(e,t){var n=(new Date).getTime(),i=window.matchMedia("(forced-colors: active)").matches,r=(new Date).getTime();e.forcedColors=i,t.forcedColors=r-n},this.createFontTestIframe=function(){var e=document.createElement("iframe");return e.style.display="block !important",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.visibility="hidden",e.srcdoc='<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">',document.body.appendChild(e),e};var o=0,a=null,c=100;this.startFPTimer=function(){o=0,a=setInterval((function(){o+=c}),c)},this.stopFPTimer=function(){return clearInterval(a),o},this.getNetworkInformation=function(){var e=null;try{if(void 0!==window.navigator.connection){var t=window.navigator.connection;e={et:t.effectiveType,dl:t.downlink,dlm:t.downlinkMax,rtt:t.rtt,sd:t.saveData,t:t.type}}}catch(n){this.sendScriptError(n)}return e},this.CreateElement=function(e,t,n){if(null!=e){var i=document.createElement(e);if(null!=t)for(var r in t)"function"==typeof t[r]?this.addEventSimple(i,r,t[r]):(i.setAttribute(r,t[r]),"class"==r&&this.isIE()&&(i.className=t[r]));if(null!=n){var o=document.createTextNode(n.toString());i.appendChild(o)}return i}return null!=n?document.createTextNode(n.toString()):null},this.sendMessageToExtension=function(e,t){window.sendMessageToDotmetricsExtension&&window.sendMessageToDotmetricsExtension(e,t)},this.postMessage=function(e,t){try{void 0!==t?t.postMessage(e,"*"):window.postMessage(e,"*")}catch(n){}};var f=!1;this.sendScriptError=function(e,t){if(!f){f=!0;var n={type:"script",ecid:this.SettingsObject.EventChainId,details:t||{},name:e&&e.name?e.name:"",message:e&&e.message?e.message:"",stack:e&&e.stack?e.stack:"",sectionId:this.SettingsObject.SiteSectionId,pageUrl:window.location.href};this.performAjaxPost(this.baseUrlPrefix+u.ERROR_EVENT_URL,n)}},this.findMedian=function(e){e.sort((function(e,t){return e-t}));var t=Math.floor(e.length/2);return e.length%2==0?(e[t-1]+e[t])/2:e[t]},this.calculateMADMedian=function(e){for(var t=this.findMedian(e),n=[],i=0;i<e.length;i++)n.push(Math.abs(e[i]-t));return this.findMedian(n)}}if("object"!==s(window.DotmetricsJSON)&&(window.DotmetricsJSON=window.JSON),!window.DotMetricsSettings.DotmetricsScriptStarted){window.DotMetricsSettings.DotmetricsScriptStarted=!0;var P=new function(){this.SettingsObject=window.DotMetricsSettings,this.boundBeacon=navigator.sendBeacon.bind(navigator),this.Core=new b(this.SettingsObject),this.EnterPageEventData=null,this.TimeOnPage=0,this.LastSentTimeOnPage=-1,this.TimeBuffer=0,this.LoadTimeStamp="",this.surveyLink="",this.DeviceId=null,this.UserId=null,this.DeviceGuidId=null,this.deviceInfoSent=!1,this.postIndex=0,this.Done=!1,this.surveyDone=!1,this.ajaxTimer=null,this.panel=!1,this.panelUserId=null,this.panelHouseholdId=null,this.videos={},this.videoPlayerSearch=null,this.foundVideoPlayers=[],this.timeBufferIntervalInstanceId=null,this.saveTimeOnPageIntervalFunctionId=null,this.lastInteraction=null,this.domainCookie=this.SettingsObject.DomainCookieData.value,this.domainCookieTs=this.SettingsObject.DomainCookieData.ts,this.domainCookieChanged=this.SettingsObject.DomainCookieData.changed,this.scriptVersion=this.SettingsObject.ScriptVersion,this.domainFphObject=null,this.domainFph=null,this.Start=function(){var e=this;if("https://"===String(e.Core.baseUrlPrefix).slice(0,8))try{this.domainFphObject=this.getDomainFpObjectFromStorage(),this.domainFph=null==this.domainFphObject?"":this.domainFphObject.dfph,this.urlDecorator=new y(this.Core,this.SettingsObject,this.domainCookie,this.domainCookieTs),this.urlDecorator.listenForVisitor(),document.addEventListener("visibilitychange",(function(){try{if("hidden"===document.visibilityState){e.stopIntervalFunctions(),e.emptyTimeBuffer();var t=e.SendTimeOnPageBeacon();e.SaveTimeOnPage(t)}else"visible"===document.visibilityState&&e.startIntervalFunctions()}catch(n){e.Core.sendScriptError(n)}})),e.startIntervalFunctions(),this.initPanelElements(),this.initInteractionEvents(),this.listenForExtensionMessages();var t=this.createStartData();e.Core.sendData(this.Core.baseUrlPrefix+u.DATA_URL,t),window.dm&&this.onAjaxDataUpdate(),1==this.SettingsObject.VideoTrackingEnabled&&this.trackVideos()}catch(n){e.Core.sendScriptError(n)}},this.listenForExtensionMessages=function(){var e=this;window.addEventListener("message",(function(t){t.data.source&&"dotmetrics-extension"==t.data.source&&t.data.type&&e.handleExtensionRequest(t.data.type,t.source)}))},this.handleExtensionRequest=function(e,t){switch(e){case"timeOnPage":var n=this.createCurrentTimeOnPageObject();(i=this.getTimeOnPageDataTemplate()).ep.push(n),this.Core.sendMessageToExtension({target:"dotmetrics-extension",type:"timeOnPage",data:i},t);break;case"getEnterPageData":var i;this.EnterPageEventData&&((i=JSON.parse(JSON.stringify(this.EnterPageEventData))).ecid=this.SettingsObject.EventChainId,i.dc=this.domainCookie,i.ver=this.scriptVersion,i.dfp=this.domainFph,this.Core.postMessage({target:"dotmetrics-plugin",type:"enterPageData",data:i},t));break;case"getDeviceInfo":var r=this;this.Core.createClientInfo((function(){var e={deviceInfo:r.Core.clientInfo,deviceHash:h.SHA1(DotmetricsJSON.stringify(r.Core.clientInfo)),clientInfoTimingData:r.Core.clientInfoTimingData};r.Core.postMessage({target:"dotmetrics-extension",type:"deviceInfo",data:e},t)}));break;case"generateDiData":r=this,this.Core.runDomainFP((function(e){r.Core.postMessage({target:"dotmetrics-extension",type:"diData",data:e},t)}))}},this.createStartData=function(){var e=(new Date).getTimezoneOffset(),t={id:this.SettingsObject.SiteSectionId,fl:!0,dom:window.location.hostname,lso:null,url:window.location.href,rurl:this.getReferrerUrl(),ecid:this.SettingsObject.EventChainId,dc:this.domainCookie,ver:this.scriptVersion,dfph:this.domainFph,tzOffset:e};this.panel&&(t.hhid=this.panelHouseholdId,t.uid=this.panelUserId);var n="DM_SitId"+this.SettingsObject.SiteId,i="DM_SitIdT"+this.SettingsObject.SiteId,r=n+"SecId"+this.SettingsObject.SiteSectionId,o=n+"SecIdT"+this.SettingsObject.SiteSectionId,a=g("DotmetricsSiteData");try{a=a?DotmetricsJSON.parse(a):{}}catch(u){a={}}var s=(new Date).getTime()-18e5;for(var c in a)a[c]<s&&delete a[c];D(n)&&a.hasOwnProperty(i)?t.oss=!1:(w(n,"1"),t.oss=!0),D(r)&&a.hasOwnProperty(o)?t.oses=!1:(w(r,"1"),t.oses=!0);var d=(new Date).getTime();return a[i]=d,a[o]=d,v({DotmetricsSiteData:JSON.stringify(a)}),t},this.getReferrerUrl=function(){var e="";try{e=window.document.referrer}catch(t){e=""}return e},this.processActions=function(e){try{var t=this,n=(new Date).getTimezoneOffset(),i={id:this.SettingsObject.SiteSectionId,fl:!1,dom:window.location.hostname,lso:null,ds:null,dsl:null,dh:null,url:window.location.href,rurl:this.getReferrerUrl(),ecid:this.SettingsObject.EventChainId,dc:this.domainCookie,ver:this.scriptVersion,dfph:this.domainFph,tzOffset:n};this.panel&&(i.hhid=this.panelHouseholdId,i.uid=this.panelUserId);var r=!1;if(e.SendDeviceInfo||e.Ping){var o={deviceInfo:!1,pings:0,exitPageData:!1};e.Ping&&e.Ping>0&&0==this.deviceInfoSent&&(o.pings=e.Ping),e.SendDeviceInfo&&0==this.deviceInfoSent&&(o.deviceInfo=!0,this.deviceInfoSent=!0),this.submitData(o)}if(e.Survey&&e.Survey.SurveyUrl)if(e.Survey,this.Survey=e.Survey,this.Survey.Mobile){var a=this;this.anchor=this.Core.CreateElement("a",{href:e.Survey.SurveyUrl,style:"position:fixed; width:100%; height:100%; top:0; left:0; background:#f00; opacity:0;z-index:99999",target:"_blank",id:"DotMetricsPopupLink"},null),document.body.appendChild(this.anchor),this.Core.addEventSimple(this.anchor,"click",(function(e){try{e.preventDefault();var t=a.anchor.getAttribute("href"),n=a.anchor.parentElement;if(n&&n.removeChild(a.anchor),a.surveyDone)return;a.surveyDone=!0,setTimeout((function(){window.open(t,"_blank")}),20)}catch(i){a.Core.sendScriptError(i)}}))}else{var s=function(){try{document.body.addEventListener?document.body.removeEventListener("click",s):document.body.detachEvent("onclick",s),t.showSurvey()}catch(e){t.Core.sendScriptError(e)}};document.body.addEventListener?document.body.addEventListener("click",s,!1):document.body.attachEvent("onclick",s)}if(e.SendDeviceHash){if(!this.Core.clientInfo)return void this.Core.createClientInfo((function(){t.processActions(e)}));var c=DotmetricsJSON.stringify(this.Core.clientInfo),l=h.SHA1(c);i.dh=l.toString(),i.dh,r=!0}if(e.PersistDeviceAndUser&&e.DeviceId&&e.UserId&&e.DeviceGuidId&&v({DotMetricsDeviceId:e.DeviceId,DotMetricsUserId:e.UserId,DotMetricsDeviceGuidId:e.DeviceGuidId}),e.SendLSO){var f=g("DotMetricsUserId"),m=g("DotMetricsDeviceId"),p=g("DotMetricsDeviceGuidId");i.lso=f&&m&&p?{d:m,u:f,dg:p}:{d:"",u:d.NULL_COOKIE_VALUE,dg:d.NULL_COOKIE_VALUE},r=!0}r&&t.Core.sendData(t.Core.baseUrlPrefix+u.DATA_URL,i)}catch(y){this.Core.sendScriptError(y)}},this._timeData=[],this._pingRawData=[],this._currentRequestNum=0,this._requestedPingsNum=0,this._onPingMeasurmentsDone=null,this._pingStartTime=0,this._pingPorcessRunning=!1,this._pingProcessQueue=[],this.measurePingTimes=function(e,t){try{if(1==this._pingPorcessRunning){var n=this;return void this._pingProcessQueue.push((function(){n.measurePingTimes(e,t)}))}this._pingPorcessRunning=!0,this._timeData=[],this._pingRawData=[],this._currentRequestNum=0,this._requestedPingsNum=e,this._onPingMeasurmentsDone=t,this.makePingRequest()}catch(i){this.Core.sendScriptError(i)}},this.makePingRequest=function(){this._pingStartTime=(new Date).getTime(),(0==this._timeData.length?{ctd:0,cl:0}:this._timeData[this._timeData.length-1]).ct=this._pingStartTime,this._pingRawData.push({ct:this._pingStartTime}),this.Core.sendData(this.Core.baseUrlPrefix+u.PING_URL,null)},this.HandlePing=function(e){try{var t=(new Date).getTime(),n=(t-this._pingStartTime)/2,i=this._pingStartTime-e.s-Math.abs(n),r={ctd:i,cl:n},o=this._pingRawData.length-1;if(this._pingRawData[o].cte=t,this._pingRawData[o].s=e.s,this._pingRawData[o].ctd=i,this._pingRawData[o].cl=n,this._timeData.push(r),this._currentRequestNum++,this._currentRequestNum<this._requestedPingsNum)this.makePingRequest();else{for(var a=0,s=0,c=[],d=[],u=0;u<this._timeData.length;u++)a+=this._timeData[u].ctd,s+=this._timeData[u].cl,c.push(this._timeData[u].ctd),d.push(this._timeData[u].cl);e={DeviceSync:a=Math.round(a/this._timeData.length),DeviceSyncLag:s=Math.round(s/this._timeData.length),DeviceSyncMedian:Math.round(this.Core.findMedian(c)),DeviceSyncLagMedian:Math.round(this.Core.findMedian(d)),DeviceSyncMAD:Math.round(this.Core.calculateMADMedian(c)),DeviceSyncLagMAD:Math.round(this.Core.calculateMADMedian(d)),raw:this._pingRawData},this._timeData,this._onPingMeasurmentsDone(e),this._pingPorcessRunning=!1,this._pingProcessQueue.length>0&&this._pingProcessQueue.shift()()}}catch(l){this.Core.sendScriptError(l)}},this.showSurvey=function(){if(!this.surveyDone){this.surveyDone=!0;var e=this.Survey.WindowWidth,t=this.Survey.WindowHeight;window.open(this.Survey.SurveyUrl,"","width="+e+",height="+t+",scrollbars=1").focus()}},this.startIntervalFunctions=function(){var e=this;null==this.timeBufferIntervalInstanceId&&(this.timeBufferIntervalInstanceId=setInterval((function(){try{null!=document.visibilityState?"visible"==document.visibilityState&&e.TimeBuffer++:e.TimeBuffer++}catch(t){e.Core.sendScriptError(t)}}),1e3)),null==this.saveTimeOnPageIntervalFunctionId&&(this.saveTimeOnPageIntervalFunctionId=setInterval((function(){e.SaveTimeOnPage()}),d.SAVE_TIME_ON_PAGE_INTERVAL))},this.stopIntervalFunctions=function(){this.timeBufferIntervalInstanceId&&(clearInterval(this.timeBufferIntervalInstanceId),this.timeBufferIntervalInstanceId=null),this.saveTimeOnPageIntervalFunctionId&&(clearInterval(this.saveTimeOnPageIntervalFunctionId),this.saveTimeOnPageIntervalFunctionId=null)},this.emptyTimeBuffer=function(){try{(new Date).getTime()-this.lastInteraction.getTime()<=d.TIME_THRESHOLD&&(this.TimeOnPage+=this.TimeBuffer),this.TimeBuffer=0,this.lastInteraction=new Date}catch(e){this.Core.sendScriptError(e)}},this.SendTimeOnPageBeacon=function(){if(this.LastSentTimeOnPage==this.TimeOnPage)return!0;if(navigator.sendBeacon&&this.EnterPageEventData){var e=this.createCurrentTimeOnPageObject(),t=this.getTimeOnPageDataTemplate();return t.ep.push(e),this.LastSentTimeOnPage=this.TimeOnPage,this.Core.performSendBeacon(this.Core.baseUrlPrefix+u.BEACON_URL,t)}return!1},this.createCurrentTimeOnPageObject=function(){return{cd:this.EnterPageEventData.CreationDate,eid:this.EnterPageEventData.EventId,id:this.EnterPageEventData.SiteSectionId,sop:this.TimeOnPage,vl:this.getVideoData(),url:window.location.href,rurl:this.getReferrerUrl(),ecid:this.SettingsObject.EventChainId,dc:this.domainCookie,ver:this.scriptVersion,dfph:this.domainFph}},this.getTimeOnPageDataTemplate=function(){var e=(new Date).getTimezoneOffset(),t={id:this.SettingsObject.SiteSectionId,cd:{d:this.DeviceId,u:this.UserId,dg:this.DeviceGuidId},ep:[],tzOffset:e};return this.panel&&(t.hhid=this.panelHouseholdId,t.uid=this.panelUserId),t},this.SaveTimeOnPage=function(e){try{if(0==m())return;if(null==this.EnterPageEventData)return;for(var t=this.getTimeOnPageData(),n=0;n<t.length;n++)if(t[n].eid==this.EnterPageEventData.EventId){t.splice(n,1);break}if(!e){var i=this.createCurrentTimeOnPageObject();t.push(i)}t.length>d.MAX_TIME_ON_PAGE_ITEMS_IN_LOCAL_STORAGE&&t.splice(0,t.length-d.MAX_TIME_ON_PAGE_ITEMS_IN_LOCAL_STORAGE);var r={};r[this.SettingsObject.TimeOnPage]=DotmetricsJSON.stringify(t),v(r)}catch(o){this.Core.sendScriptError(o)}},this.processTimeOnPageData=function(){try{if(0==m())return null;for(var e=[],t=this.getTimeOnPageData(),n=new Date,i=0;i<t.length;i++)try{var r=t[i],o=new Date(r.cd);n.getTime()-o.getTime()<864e5&&e.push(r)}catch(a){}return 0==e.length&&(e=null),p(this.SettingsObject.TimeOnPage),e}catch(a){this.Core.sendScriptError(a)}},this.getTimeOnPageData=function(){try{var e=g(this.SettingsObject.TimeOnPage),t=[];if(null!=e&&e.length>0)try{t=DotmetricsJSON.parse(e)}catch(n){t=JSON.parse(e)}return t}catch(n){return this.Core.sendScriptError(n),[]}},this.initInteractionEvents=function(){this.lastInteraction=new Date;var e=this;this.Core.addEventSimple(document,"mousemove",(function(){e.emptyTimeBuffer()})),this.Core.addEventSimple(document,"wheel",(function(){e.emptyTimeBuffer()})),this.Core.addEventSimple(document,"touchend",(function(){e.emptyTimeBuffer()}))},this.initPanelElements=function(){if(document.getElementById("DotmetricsPanelUserId")&&document.getElementById("DotmetricsPanelHouseholdId")){this.panel=!0,this.panelUserId=document.getElementById("DotmetricsPanelUserId").value,this.panelHouseholdId=document.getElementById("DotmetricsPanelHouseholdId").value;var e=document.createElement("input");e.setAttribute("type","hidden"),e.setAttribute("id","DotmetricsScriptLoaded"),e.setAttribute("value","true"),document.getElementsByTagName("head")[0].appendChild(e)}},this.CreateIframe=function(){this.iFrameHolderDiv=this.Core.CreateElement("div",{id:"DotMetricsPF",style:"display:none;width:0px;height:0px;position:absolute; left:-2000px;"},null);var e="dotmetricsframe"+this.postIndex;this.postIndex++,this.iFrameHolderDiv.style.display="none";try{this.iframe=document.createElement('<iframe name="'+e+'" style:"display:none;width:0px;height:0px;">')}catch(t){this.iframe=this.Core.CreateElement("iframe",{name:e,id:e,style:"display:none;width:0px;height:0px;"},null)}this.iframe.id=e,this.form=this.Core.CreateElement("form",{action:this.Core.baseUrlPrefix+u.POST_URL,method:"post",target:e,id:"DotMetricsForm"},null),this.formInput=this.Core.CreateElement("input",{type:"text",name:"v"},null),document.body.appendChild(this.iFrameHolderDiv),this.iFrameHolderDiv.appendChild(this.iframe),this.iFrameHolderDiv.appendChild(this.form),this.form.appendChild(this.formInput),document.getElementById("DotMetricsForm").target=e},this.submitData=function(e){var t=this;if(this.Core.formPostCount++,!(this.Core.formPostCount>d.CALL_LIMIT)){var n=(new Date).getTimezoneOffset(),i={id:this.SettingsObject.SiteSectionId,cd:{d:this.DeviceId,u:this.UserId,dg:this.DeviceGuidId},di:null,ds:0,dsl:0,url:window.location.href,rurl:this.getReferrerUrl(),ecid:this.SettingsObject.EventChainId,dc:this.domainCookie,ver:this.scriptVersion,dfph:this.domainFph,tzOffset:n};if(this.panel&&(i.hhid=this.panelHouseholdId,i.uid=this.panelUserId),e.deviceInfo){if(!this.Core.clientInfo)return void this.Core.createClientInfo((function(){t.submitData(e)}));i.di=this.Core.clientInfo}e.pings>0?this.measurePingTimes(e.pings,(function(e){i.ds=e.DeviceSync,i.dsl=e.DeviceSyncLag,r()})):r()}function r(){try{t.CreateIframe(),t.formInput.value=DotmetricsJSON.stringify(i),t.form.submit();var e=t.iFrameHolderDiv;setTimeout((function(){document.body.removeChild(e)}),5e3)}catch(n){t.Core.sendScriptError(n)}}},this.HandleJsonp=function(e){try{var t=this;if(t.Core.sendMessageToExtension({target:"dotmetrics-extension",type:"jsonpResponse",data:e,ecid:this.SettingsObject.EventChainId,dc:this.domainCookie,ver:this.scriptVersion,dfph:this.domainFph}),this.UserId=e.UserId,this.DeviceId=e.DeviceId,this.DeviceGuidId=e.DeviceGuidId,window.DotMetricsObj.DeviceId=this.DeviceId,window.DotMetricsObj.UserId=this.UserId,this.deviceInfoSent&&(e.SendDeviceInfo=!1,e.Ping=0),this.firstLoadDone)this.processActions(e);else{this.firstLoadDone=!0,this.EnterPageEventData=e.EnterPageEventData,window.DotMetricsObj.firstLoadDone=!0,window.DotMetricsObj.EnterPageEventData=e.EnterPageEventData,this.runDomainFPProcess();var n={deviceInfo:!1,pings:0};1==e.SendDeviceInfo&&0==this.deviceInfoSent&&(n.deviceInfo=!0,e.SendDeviceInfo=!1,this.deviceInfoSent=!0),e.Ping&&e.Ping>0&&(n.pings=e.Ping,e.Ping=!1),setTimeout((function(){try{(n.deviceInfo||n.pings)&&t.submitData(n);var i=t.processTimeOnPageData();if(w(t.SettingsObject.TimeOnPage,null,0),i){var r=t.getTimeOnPageDataTemplate();r.ep=i,t.Core.performAjaxPost(t.Core.baseUrlPrefix+u.BEACON_URL,r)}t.processActions(e)}catch(o){t.Core.sendScriptError(o)}}),1e3*Math.random()+500)}}catch(i){this.Core.sendScriptError(i)}},this.getDomainFpObjectFromStorage=function(){var e,t;try{e=JSON.parse(g(d.DOMAIN_FPH_KEY))}catch(n){e=null}try{t=JSON.parse(S(d.DOMAIN_FPH_KEY))}catch(n){t=null}return this.syncDomainFpObject(e,t)},this.syncDomainFpObject=function(e,t){var n=this.checkIfDomainFpValid(e),i=this.checkIfDomainFpValid(t),r=null;if(n&&i?r=e.time>t.time?e:t:n?r=e:i&&(r=t),null!=r){var o=JSON.stringify(r),a={};a[d.DOMAIN_FPH_KEY]=o,v(a),w(d.DOMAIN_FPH_KEY,o,365)}return r},this.checkIfDomainFpValid=function(e){return!!(void 0!==e&&null!=e&&null!=e.dfph&&""!=e.dfph&&(40==e.dfph.length||e.dfph.indexOf("_unstable")>0)&&e.v&&e.time&&e.niTime)},this.runDomainFPProcess=function(){var e=!1;if(!(0==this.SettingsObject.DomainCookieEnabled||(new Date).getTime()-this.domainCookieTs<d.TIME_STAMP_LIMIT_24_HOURS)){var t=this.domainFphObject,n=t&&t.dfph?t.dfph:null,i=t&&t.time?t.time:0;if(e=!(!t||10===t.v)||(new Date).getTime()-i>d.TIME_STAMP_LIMIT_5_DAYS,0!=(1==this.domainCookieChanged||1==e||null==n)){var r=this;this.Core.runDomainFP((function(e){try{var t={dfph:e.dfph,time:(new Date).getTime(),niTime:(new Date).getTime(),v:10},n={id:r.SettingsObject.SiteSectionId,ecid:r.SettingsObject.EventChainId,eid:r.EnterPageEventData.EventId,dc:r.domainCookie,ver:r.scriptVersion,dfph:e.dfph};r.runNetworkMeasurements((function(i){n.ts=i.ts,n.ni=i.ni,r.Core.performFPPost(r.Core.baseUrlPrefix+u.EDI_URL,n,(function(i){try{"OK"==i?r.syncDomainFpObject(t):(n.dfp=e.dfp,n.td=e.timingData,r.Core.performFPPost(r.Core.baseUrlPrefix+u.EDI_URL,n,(function(e){"OK"==e&&r.syncDomainFpObject(t)})))}catch(o){r.Core.sendScriptError(o)}}))}))}catch(i){r.Core.sendScriptError(i)}}))}else this.runDailyEdi(t)}},this.runDailyEdi=function(e){if(this.checkIfDomainFpValid(e)&&e.time&&e.niTime){var t=new Date,n=new Date(e.time),i=new Date(e.niTime);if(t.getDate()==n.getDate()||t.getDate()==i.getDate())return;var r=this;this.runNetworkMeasurements((function(t){if(!(t.ts.dlm>1e3)){var n={id:r.SettingsObject.SiteSectionId,ecid:r.SettingsObject.EventChainId,eid:r.EnterPageEventData.EventId,dc:r.domainCookie,ver:r.scriptVersion,dfph:e.dfph,ts:t.ts,ni:t.ni};r.Core.performFPPost(r.Core.baseUrlPrefix+u.EDI_DAILY_URL,n),e.niTime=(new Date).getTime(),r.syncDomainFpObject(e)}}))}},this.runNetworkMeasurements=function(e){var t=this;this.measurePingTimes(5,(function(n){var i={};i.ts={dsa:n.DeviceSync,dsm:n.DeviceSyncMedian,dsmad:n.DeviceSyncMAD,dla:n.DeviceSyncLag,dlm:n.DeviceSyncLagMedian,dlmad:n.DeviceSyncLagMAD,raw:n.raw},i.ni=t.Core.getNetworkInformation(),e(i)}))},this.onAjaxDataUpdate=function(){try{var e=window.dm,t=this;if("https://"!==String(t.Core.baseUrlPrefix).slice(0,8))return;null==this.ajaxTimer&&void 0!==e&&void 0!==e.AjaxData&&e.AjaxData.length>0&&(this.ajaxTimer=setTimeout((function(){try{t.cloneAjaxDataForStressTestScript(e.AjaxData);var n=t.prepareAjaxData(e.AjaxData);e.AjaxData.length=0,t.ajaxTimer=null,t.Core.performAjaxPost(t.Core.baseUrlPrefix+u.AJAX_EVENT_URL,n)}catch(i){t.Core.sendScriptError(i)}}),this.SettingsObject.AjaxEventTimeout))}catch(n){this.Core.sendScriptError(n)}},this.cloneAjaxDataForStressTestScript=function(e){try{var t="dmStress";if(void 0!==window.DotMetricsObjStress){var n=JSON.parse(JSON.stringify(e));void 0===window[t]&&(window[t]={AjaxData:[]});for(var i=0;i<n.length;i++)window[t].AjaxData.push(n[i]);window.DotMetricsObjStress.onAjaxDataUpdate()}}catch(r){}},this.prepareAjaxData=function(e){var t=(new Date).getTimezoneOffset(),n={siteSectionId:this.SettingsObject.SiteSectionId,ecid:this.SettingsObject.EventChainId,dc:this.domainCookie,ver:this.scriptVersion,dfph:this.domainFph,domain:window.location.hostname,events:[],tzOffset:t};null==this.EnterPageEventData?n.eid=d.NULL_COOKIE_VALUE:n.eid=this.EnterPageEventData.EventId,this.panel&&(n.hhid=this.panelHouseholdId,n.uid=this.panelUserId);var i=this;return e.forEach((function(e){var t={};e.et?t.eventType=e.et:t.eventType="pageview",e.d?t.eventData=e.d:t.eventData=null,e.ssid?t.eventSiteSectionId=e.ssid:t.eventSiteSectionId=i.SettingsObject.SiteSectionId,isNaN(t.eventSiteSectionId)&&(t.eventTag=t.eventSiteSectionId,delete t.eventSiteSectionId),e.url?t.url=e.url:t.url=window.location.href,n.events.push(t)})),n},this.trackVideos=function(){var e=this;this.videoPlayerSearch=new f((function(t,n,i){switch(t){case"flowPlayer":e.trackFP(i,t,n);break;case"jwPlayer":e.trackJW(i,t,n);break;case"videojs":e.trackVideoJS(i,t,n);break;case"green-video":e.trackGreenVideo(i,t,n);break;case"hearst-video":e.trackHearstVideo(i,t,n)}})),1==this.SettingsObject.VideoSearchEnabled&&this.videoPlayerSearch.startSearching()},this.AddVideoPlayer=function(e,t){if(null!=this.videoPlayerSearch)try{return this.videoPlayerSearch.manuallyAddVideoPlayerInstance(e,t)}catch(n){throw this.Core.sendScriptError(n),n}};var e=!1;this.sendVideoError=function(t,n,i){if(!e){e=!0;var r={};i&&i.name&&(r.name=i.name),i&&i.message&&(r.message=i.message),i&&i.stack&&(r.stack=i.stack);var o={type:"video",details:{player:t,playerVersion:n},error:r,sectionId:this.SettingsObject.SiteSectionId,pageUrl:window.location.href};this.Core.performAjaxPost(this.Core.baseUrlPrefix+u.ERROR_EVENT_URL,o)}},this.trackFP=function(e,t,n){var i=this,r=null,o=null,a=void 0!==e.playerState["is-autoplay"]?e.playerState["is-autoplay"]:null;function s(){var t="";try{t=e.opts.title}catch(i){}var n=e.currentSrc;return"".concat(n,"_").concat(t)}function c(){var t="";try{t=e.opts.title}catch(d){}var n=Math.max(0,e.duration),c=s();i.videos[c]={vid:e.currentSrc,w:e.videoWidth,h:e.videoHeight,vdur:n,tw:0,ls:e.opts.live,t:t,a:a},r=null,o=null}var d=function(e){try{c()}catch(t){h(t)}},u=function(t){try{r=e.currentTime,o=(new Date).getTime()}catch(n){h(n)}},l=function(t){try{if(r&&0==e.playerState["is-seeking"]){var n=e.currentTime-r,a=.001*((new Date).getTime()-o);if(n>0){if(n>1)return;var d=s();i.videos[d]?(e.currentTime!=r&&a>0&&a<1&&(i.videos[d].tw+=a),i.videos[d].vdur<e.duration&&(i.videos[d].vdur=e.duration)):c()}}r=e.currentTime,o=(new Date).getTime()}catch(u){h(u)}};function h(r){e.off("loadedmetadata",d),e.off("seeked",u),e.off("timeupdate",l),i.sendVideoError(t,n,r)}e.on("loadedmetadata",d),e.on("seeked",u),e.on("timeupdate",l)},this.trackJW=function(e,t,n){var i=this,r=null,o=null,a=e.getConfig?e.getConfig():void 0,s=!1;function c(e){return"".concat(e.file,"_").concat(e.title)}function d(){var t=e.getPlaylistItem();if(void 0!==t){var n=c(t);if(!i.videos[n]){var a=e.getConfig?e.getConfig():void 0;i.videos[n]={vid:t.file,w:e.getWidth(),h:e.getHeight(),vdur:e.getDuration(),tw:0,ls:!!a&&a&&"Live"==a.streamType,t:t.title,a:s},i.videos[n].vdur<0&&(i.videos[n].vdur=0)}r=e.getPosition(),o=(new Date).getTime()}}a&&void 0!==a.autostart&&(!0!==a.autostart&&"viewable"!==a.autostart||(s=!0));var u=function(e){try{d()}catch(t){f(t)}},l=function(e){try{r=e.offset}catch(t){f(t)}},h=function(t){try{if(r){var n=.001*((new Date).getTime()-o),a=e.getPlaylistItem();if(void 0===a)return;var s=c(a);void 0===i.videos[s]&&d(),t.position!=r&&n>0&&n<1&&(i.videos[s].tw+=n),i.videos[s].h||(i.videos[s].h=e.getHeight()),i.videos[s].w||(i.videos[s].w=e.getWidth()),(!i.videos[s].vdur||i.videos[s].vdur<e.getDuration())&&(i.videos[s].vdur=e.getDuration())}r=t.position,o=(new Date).getTime()}catch(u){f(u)}};function f(r){e.off&&(e.off("play",u),e.off("seek",l),e.off("time",h)),i.sendVideoError(t,n,r)}e.on?(e.on("play",u),e.on("seek",l),e.on("time",h)):(e.onPlay(u),e.onSeek(l),e.onTime(h))},this.trackVideoJS=function(e,t,n){var i=this,r=null,o=null,a=!1;if(e&&"function"==typeof e.autoplay){var s=e.autoplay();!0!==s&&"any"!==s||(a=!0)}function c(){var t=e.mediainfo?e.mediainfo.name:"",n=e.currentSrc();return"".concat(n,"_").concat(t)}function d(){var t=e.currentSrc();if(""!=t){var n=c();i.videos[n]||(i.videos[n]={vid:t,w:"function"==typeof e.videoWidth?e.videoWidth():e.width(),h:"function"==typeof e.videoHeight?e.videoHeight():e.height(),vdur:e.duration(),tw:0,ls:!1,t:e.mediainfo?e.mediainfo.name:"",a:a},i.videos[n].vdur<0&&(i.videos[n].vdur=0),r=null,o=null)}}var u=function(){try{d()}catch(e){h(e)}},l=function(){try{if(r&&0==e.seeking()&&("function"!=typeof e.scrubbing||0==e.scrubbing())){var t=.001*((new Date).getTime()-o);if(""==e.currentSrc())return;var n=c();if(void 0===i.videos[n])return void d();try{i.videos[n].ls=i.videos[n].ls||"undefined"!=e.liveTracker&&e.liveTracker.isLive&&e.liveTracker.isLive()}catch(s){}var a=!1;try{a="adPlaying"==e.playerState.getStateName()}catch(s){}i.videos[n].vdur<e.duration()&&(i.videos[n].vdur=e.duration()),0==a&&e.currentTime()!=r&&t>0&&t<1&&(i.videos[n].tw+=t)}r=e.currentTime(),o=(new Date).getTime()}catch(s){h(s)}};function h(r){e.off("loadedmetadata",u),e.off("timeupdate",l),i.sendVideoError(t,n,r)}e.on("loadedmetadata",u),e.on("timeupdate",l)},this.trackHearstVideo=function(e,t,n){var i=this,r=null,o=null,a=!1,s=void 0!==e.settings.autoplay?e.settings.autoplay:null;function c(){return"hearst_".concat(e.getCurrentVideo().id)}function d(){var t=e.getCurrentVideo();if(void 0!==t){var n=c(),d=t.sources&&t.sources.length>0?t.sources[0].src:"";i.videos[n]||(i.videos[n]={vid:d,w:e.element.clientWidth,h:e.element.clientHeight,vdur:e.duration(),tw:0,ls:!1,t:t.title,a:s},i.videos[n].vdur<0&&(i.videos[n].vdur=0)),a=!1,o=e.currentTime(),r=(new Date).getTime()}}var u=e.on("loadedmetadata",(function(){try{d()}catch(e){m(e)}})),l=e.on("timeupdate",(function(){try{if(o&&0==a){var t=.001*((new Date).getTime()-r),n=c();if(void 0===i.videos[n])return void d();i.videos[n].vdur<e.duration()&&(i.videos[n].vdur=e.duration()),e.currentTime()!=o&&t>0&&t<1&&(i.videos[n].tw+=t)}o=e.currentTime(),r=(new Date).getTime()}catch(s){m(s)}})),h=e.on("seeking",(function(){a=!0})),f=e.on("seeked",(function(){a=!1}));function m(r){e.unsubscribe(u),e.unsubscribe(l),e.unsubscribe(h),e.unsubscribe(f),i.sendVideoError(t,n,r)}},this.trackGreenVideo=function(e,t,n){var i=this,r=null,o=null,a=null;e.plugin.register("pluginVendorMiddleware",(function(e,s){switch(e.type){case"video/PLAY":!function(){try{var e=s();a||(a=e.data.clickToPlay);var t=e.data.contents[e.data.activeContentIdx].contentId;i.videos[t]||(i.videos[t]={vid:e.video.sources[0].src,w:e.video.playerElement.clientWidth,h:e.video.playerElement.clientHeight,vdur:e.data.contents[e.data.activeContentIdx].duration,tw:0,ls:!1,t:e.data.contents[e.data.activeContentIdx].title,a:void 0!==a?a:null},r=(new Date).getTime(),r=e.video.currentTime)}catch(n){c(n)}}();break;case"video/ON_TIME_UPDATE":!function(){try{var e=s(),t=e.data.contents[e.data.activeContentIdx].contentId;if(!i.videos[t])return;if(o){var n=.001*((new Date).getTime()-r);n>0&&n<1&&(i.videos[t].tw+=n)}o=e.video.currentTime,r=(new Date).getTime()}catch(a){c(a)}}();break;case"video/ON_SEEKED":!function(){try{var e=s(),t=e.data.contents[e.data.activeContentIdx].contentId;if(!i.videos[t])return;o=e.video.currentTime}catch(n){c(n)}}()}function c(e){i.sendVideoError(t,n,e)}}))},this.getVideoData=function(){var e=this.videos,t=[];for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(!i.vid||""==i.vid||i.vid.indexOf("data:video")>=0)continue;i.w=Math.round(i.w),i.h=Math.round(i.h),i.w||(i.w=0),i.h||(i.h=0),i.vdur&&isFinite(i.vdur)?(i.vdur=Math.round(i.vdur),i.vdur<0&&(i.vdur=0)):i.vdur=0,i.tw>0&&i.tw<1&&(i.tw=1),i.tw=Math.round(i.tw),i.tw>0&&t.push(i)}return t}};window.DotMetricsObj={onAjaxDataUpdate:function(){P.onAjaxDataUpdate()},HandleJsonp:function(e){P.HandleJsonp(e)},HandlePing:function(e){P.HandlePing(e)},AddVideoPlayer:function(e,t){return P.AddVideoPlayer(e,t)}},top.location==self.location&&setTimeout((function(){P.Start()}),100)}}();
