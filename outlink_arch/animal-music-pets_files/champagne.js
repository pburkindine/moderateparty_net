/*! For license information please see champagne.js.LICENSE.txt */
(()=>{var e={263:function(e,t,r){var n,i,o;!function(){"use strict";i=[r(343)],void 0===(o="function"==typeof(n=function(e){var t=/(^|@)\S+:\d+/,r=/^\s*at .*(\S+:\d+|\(native\))/m,n=/^(eval@)?(\[native code])?$/;return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(r))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(t){return t.stack.split("\n").filter((function(e){return!!e.match(r)}),this).map((function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var r=t.replace(/^\s+/,"").replace(/\(eval code/g,"("),n=r.match(/ (\((.+):(\d+):(\d+)\)$)/),i=(r=n?r.replace(n[0],""):r).split(/\s+/).slice(1),o=this.extractLocation(n?n[1]:i.pop()),a=i.join(" ")||void 0,s=["eval","<anonymous>"].indexOf(o[0])>-1?void 0:o[0];return new e({functionName:a,fileName:s,lineNumber:o[1],columnNumber:o[2],source:t})}),this)},parseFFOrSafari:function(t){return t.stack.split("\n").filter((function(e){return!e.match(n)}),this).map((function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e({functionName:t});var r=/((.*".+"[^@]*)?[^@]*)(?:@)/,n=t.match(r),i=n&&n[1]?n[1]:void 0,o=this.extractLocation(t.replace(r,""));return new e({functionName:i,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:t})}),this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)/i,n=t.message.split("\n"),i=[],o=2,a=n.length;o<a;o+=2){var s=r.exec(n[o]);s&&i.push(new e({fileName:s[2],lineNumber:s[1],source:n[o]}))}return i},parseOpera10:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=t.stacktrace.split("\n"),i=[],o=0,a=n.length;o<a;o+=2){var s=r.exec(n[o]);s&&i.push(new e({functionName:s[3]||void 0,fileName:s[2],lineNumber:s[1],source:n[o]}))}return i},parseOpera11:function(r){return r.stack.split("\n").filter((function(e){return!!e.match(t)&&!e.match(/^Error created at/)}),this).map((function(t){var r,n=t.split("@"),i=this.extractLocation(n.pop()),o=n.shift()||"",a=o.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;o.match(/\(([^)]*)\)/)&&(r=o.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var s=void 0===r||"[arguments not available]"===r?void 0:r.split(",");return new e({functionName:a,args:s,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:t})}),this)}}})?n.apply(t,i):n)||(e.exports=o)}()},343:function(e,t){var r,n,i;!function(){"use strict";n=[],void 0===(i="function"==typeof(r=function(){function e(e){return e.charAt(0).toUpperCase()+e.substring(1)}function t(e){return function(){return this[e]}}var r=["isConstructor","isEval","isNative","isToplevel"],n=["columnNumber","lineNumber"],i=["fileName","functionName","source"],o=r.concat(n,i,["args"],["evalOrigin"]);function a(t){if(t)for(var r=0;r<o.length;r++)void 0!==t[o[r]]&&this["set"+e(o[r])](t[o[r]])}a.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof a)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new a(e)}},toString:function(){var e=this.getFileName()||"",t=this.getLineNumber()||"",r=this.getColumnNumber()||"",n=this.getFunctionName()||"";return this.getIsEval()?e?"[eval] ("+e+":"+t+":"+r+")":"[eval]:"+t+":"+r:n?n+" ("+e+":"+t+":"+r+")":e+":"+t+":"+r}},a.fromString=function(e){var t=e.indexOf("("),r=e.lastIndexOf(")"),n=e.substring(0,t),i=e.substring(t+1,r).split(","),o=e.substring(r+1);if(0===o.indexOf("@"))var s=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(o,""),c=s[1],u=s[2],l=s[3];return new a({functionName:n,args:i||void 0,fileName:c,lineNumber:u||void 0,columnNumber:l||void 0})};for(var s=0;s<r.length;s++)a.prototype["get"+e(r[s])]=t(r[s]),a.prototype["set"+e(r[s])]=function(e){return function(t){this[e]=Boolean(t)}}(r[s]);for(var c=0;c<n.length;c++)a.prototype["get"+e(n[c])]=t(n[c]),a.prototype["set"+e(n[c])]=function(e){return function(t){if(r=t,isNaN(parseFloat(r))||!isFinite(r))throw new TypeError(e+" must be a Number");var r;this[e]=Number(t)}}(n[c]);for(var u=0;u<i.length;u++)a.prototype["get"+e(i[u])]=t(i[u]),a.prototype["set"+e(i[u])]=function(e){return function(t){this[e]=String(t)}}(i[u]);return a})?r.apply(t,n):r)||(e.exports=i)}()},606:e=>{var t,r,n=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var s,c=[],u=!1,l=-1;function d(){u&&s&&(u=!1,s.length?c=s.concat(c):l=-1,c.length&&f())}function f(){if(!u){var e=a(d);u=!0;for(var t=c.length;t;){for(s=c,c=[];++l<t;)s&&s[l].run();l=-1,t=c.length}s=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function h(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new p(e,t)),1!==c.length||u||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=h,n.addListener=h,n.once=h,n.off=h,n.removeListener=h,n.removeAllListeners=h,n.emit=h,n.prependListener=h,n.prependOnceListener=h,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},923:function(e,t,r){"use strict";var n=r(606),i=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,r){this.name=e,this.version=t,this.os=r};t.BrowserInfo=o;var a=function(e){this.version=e,this.name="node",this.os=n.platform};t.NodeInfo=a;var s=function(){this.bot=!0,this.name="bot",this.version=null,this.os=null};t.BotInfo=s;var c=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/Edg\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],u=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/],["Search Bot",/(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/]];function l(e){var t=""!==e&&c.reduce((function(t,r){var n=r[0],i=r[1];if(t)return t;var o=i.exec(e);return!!o&&[n,o]}),!1);if(!t)return null;var r=t[0],n=t[1];if("searchbot"===r)return new s;var a=n[1]&&n[1].split(/[._]/).slice(0,3);return a?a.length<3&&(a=i(a,function(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}(3-a.length))):a=[],new o(r,a.join("."),d(e))}function d(e){for(var t=0,r=u.length;t<r;t++){var n=u[t],i=n[0];if(n[1].test(e))return i}return null}function f(){return void 0!==n&&n.version?new a(n.version.slice(1)):null}t.detect=function(e){return e?l(e):"undefined"!=typeof navigator?l(navigator.userAgent):f()},t.parseUserAgent=l,t.detectOS=d,t.getNodeVersion=f}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};function t(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var n=function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};function i(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))}function o(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function a(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}Object.create,Object.create;var s,c=r(606),u=void 0!==c&&"[object process]"===c.toString(),l="undefined"!=typeof window,d={},f={url:"about:blank"},p=function(){return u?s:l?window:d};u&&(s=function(e){if(void 0===e&&(e={}),!u)throw new Error("You should not create a new mock environment outside of unit tests.");var t=0===Object.entries(e).length;return s=function(e){void 0===e&&(e={});var t,i,o=r.g,a=(o.JSDOM?new o.JSDOM("<!doctype html><html><body></body></html>",e):o.window).window;return a.Object=Object,a.Math=Math,a.Promise=Promise,a.ffte={},a.ffte.site="techradar",o.window=a,o.document=a.document,o.navigator=n(n({},o.navigator),{userAgent:"node.js"}),o.requestAnimationFrame=function(e){return setTimeout(e,0)},o.cancelAnimationFrame=function(e){clearTimeout(e)},Object.defineProperty(a,"localStorage",{value:o.localStorage}),t=a,i=o,Object.defineProperties(i,n(n({},Object.getOwnPropertyDescriptors(t)),Object.getOwnPropertyDescriptors(i))),a}(t?f:e),p()}());var h=p(),v=0,g=[],m={all:0,info:0,warn:0,error:0},y={all:[],info:[],warn:[],error:[]},w=function(e){return function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=Array.prototype.slice.call(r),o={id:v,timestamp:Date.now(),level:e,args:i};v+=1,m.all+=1,m[e]+=1,g.push(o),y.all.forEach((function(e){e({type:"log-all",logItem:o})})),y[e].forEach((function(t){t({type:"log-"+e,logItem:o})}));var a={info:"log",warn:"warn",error:"error"}[e],s=Array.prototype.slice.call(r);s.unshift("background: #800020; color: #ffffff"),s.unshift("%c CHAMPAGNE "),(t=h.console)[a].apply(t,s)}};const b={info:w("info"),warn:w("warn"),error:w("error")};function S(e,t){var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var i=0,o=r;i<o.length;i++){var a=o[i];if(!(a in t))return!1;if(e[a]!==t[a])return!1}return!0}function E(e,t){return void 0===t&&(t=[]),e?t.find((function(t){return void 0!==t.labels&&S(t.labels,e)})):t[0]}var O=function(){function e(){this.data=[]}return e.prototype.get=function(e){return E(e,this.data)},e.prototype.set=function(e,t){var r=E(t,this.data);return r?r.value=e:this.data.push({labels:t,value:e}),this},e.prototype.collect=function(e){return null==e?this.data:this.data.filter((function(t){return S(e,t.labels||{})}))},e.prototype.resetAll=function(){var e=this;return this.data.forEach((function(t){e.reset(t.labels)})),this},e}(),x=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),r.prototype.inc=function(e){return this.add(1,e),this},r.prototype.add=function(e,t){if(e<0)throw new Error("Expected increment amount to be greater than -1. Received: "+e);var r=this.get(t);return this.set(r?r.value+e:e,t),this},r.prototype.reset=function(e){this.set(0,e)},r}(O),P=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),r.prototype.dec=function(e){var t=this.get(e);return this.set(t?t.value-1:0,e),this},r.prototype.sub=function(e,t){var r=this.get(t);return this.set(r?r.value-e:0,t),this},r}(x);function A(e){return{entries:e.reduce((function(e,t){return e[t.toString()]=0,e}),{"+Inf":0}),sum:0,count:0,raw:[]}}var k=function(e){function r(t){void 0===t&&(t=[]);var r=e.call(this)||this;return r.buckets=t.sort((function(e,t){return e>t?1:-1})),r.set(A(r.buckets)),r.observe=r.observe.bind(r),r}return t(r,e),r.prototype.observe=function(e,t){var r=this.get(t);null==r&&(r=this.set(A(this.buckets),t).get(t)),r.value.raw.push(e),r.value.entries["+Inf"]+=1;var n=function(e,t){if(t<e[e.length-1])for(var r=0;r<e.length;r+=1)if(t<=e[r])return r}(this.buckets,e);if(null!=n)for(var i=n;i<this.buckets.length;i+=1){var o=r.value.entries[this.buckets[i].toString()];r.value.entries[this.buckets[i].toString()]=o+1}return r.value.sum=r.value.raw.reduce((function(e,t){return e+t})),r.value.count+=1,this},r.prototype.reset=function(e){this.set(A(this.buckets),e)},r}(O),_=function(){function e(){this.data={counter:{},gauge:{},histogram:{}}}return e.prototype.validateInput=function(e,t,r,n){if(""===String(t))throw new Error("Metric name cannot be empty");if(-1===["counter","gauge","histogram"].indexOf(e))throw new Error("Unknown metric type "+e);if("string"!=typeof r&&null!=r)throw new Error("help must be string or undefined/null");if(e in this.data&&t in this.data[e])throw new Error("A metric with the name '"+t+"' already exists for type '"+e+"'");if(!Array.isArray(n)&&null!=n)throw new Error("buckets must be array or undefined/null")},e.prototype.create=function(e,t,r,n){var i;return void 0===r&&(r=""),void 0===n&&(n=[]),this.validateInput(e,t,r,n),"counter"===e?(i=new x,this.data.counter[t]={help:r,instance:i,type:e}):"gauge"===e?(i=new P,this.data.gauge[t]={help:r,instance:i,type:e}):(i=new k(n),this.data.histogram[t]={help:r,instance:i,type:e}),i},e.prototype.metrics=function(){return Object.values(this.data).reduce((function(e,t){return e+Object.entries(t).reduce((function(e,t){var r=t[0],n=t[1];return n.help.length>0&&(e+="# HELP "+r+" "+n.help+"\n"),(e+="# TYPE "+r+" "+n.type+"\n")+Object.values(n.instance.data).reduce((function(e,t){var i,o,a;return e+("histogram"===n.type?function(e,t,r){void 0===r&&(r="le");var n="",i=function(e){if(void 0===e.labels)return"";var t=Object.entries(e.labels).map((function(e){return e[0]+'="'+e[1]+'"'}));return 0===t.length?"":""+t.join(",")}(t);return i.length>0?(n+=e+"_count{"+i+"} "+t.value.count+"\n",n+=e+"_sum{"+i+"} "+t.value.sum+"\n"):(n+=e+"_count "+t.value.count+"\n",n+=e+"_sum "+t.value.sum+"\n"),Object.entries(t.value.entries).reduce((function(t,n){return i.length>0?t+=e+"_bucket{"+r+'="'+n[0]+'",'+i+"} "+n[1]+"\n":t+=e+"_bucket{"+r+'="'+n[0]+'"} '+n[1]+"\n",t}),n)}(r,t):(i=r,a=" "+(o=t).value.toString(),null==o.labels||0===Object.keys(o.labels).length?""+i+a+"\n":i+"{"+Object.entries(o.labels).map((function(e){return e[0]+'="'+e[1]+'"'})).join(",")+"}"+a+"\n"))}),"")}),"")}),"")},e.prototype.reset=function(){return Object.values(this.data).forEach((function(e){Object.values(e).forEach((function(e){e.instance.resetAll()}))})),this},e.prototype.clear=function(){return this.data={counter:{},gauge:{},histogram:{}},this},e.prototype.get=function(e,t){var r=(null!=e?[this.data[e]]:Object.values(this.data)).find((function(e){return t in e}));return null!=r?r[t].instance:void 0},e}(),T=p();const j=function(e){return void 0===e&&(e=T.location.search),new URLSearchParams(e)};var N=p().document.URL,I=Boolean(["local.fte","local.responsive","local.progressive","dev.fte","stage.fte","futureplc.engineering"].find((function(e){return N.indexOf(e)>-1}))),C="2.5.2".includes("Dev");const R=I||C;var D=p();const M=function(e,t){var r="string"==typeof t?t:JSON.stringify(t);return D.navigator.sendBeacon(e,r)};var L=function(){var e=p();return e.document.documentElement.clientWidth||e.document.body.clientWidth||e.innerWidth},W=function(){try{var e={width:L(),height:(r=p(),r.document.documentElement.clientHeight||r.document.body.clientHeight||r.innerHeight)},t=e.height;return{width:String(e.width),height:String(t)}}catch(e){return log.error(e),{width:"",height:""}}var r};var B=r(923),U={ie:!0,edge:!0,safari:!0,chrome:!0,firefox:!0,"edge-chromium":"chrome",crios:"chrome","chromium-webview":"chrome",fxios:"firefox",ios:"safari","ios-webview":"safari"},F=["ie","edge","safari","firefox","chrome"],z=p(),V={env:"",device:"",browser:"",version:"2.5.2"},$=!1,q=!1,J=!1,G=new _,Y=G.create("counter","request","Request counter"),H=G.create("counter","load","Load counter"),K=G.create("counter","unload","Unload counter"),X=G.create("counter","error","Error counter"),Q=G.create("counter","amazon_error","Amazon error counter"),Z=G.create("counter","adserver_error","AdServer error counter"),ee=G.create("counter","jwplayer_error","JWPlayer error counter"),te=function(){if($&&q){var e=G.metrics();M("https://champagne-gateway.futureplc.com/push_metrics/",e)?($=!1,G.reset()):b.error("Error pushing Champagne metrics data.")}},re=function(){if(!J){var e=n({target:"champagne"},V);$=!0,K.inc(e)}te()},ne=function(){var e=n({target:"champagne"},V);$=!0,Y.inc(e)},ie=function(){var e=n({target:"champagne"},V);J=!0,$=!0,H.inc(e)},oe=function(){var e=n({target:"api"},V);$=!0,Y.inc(e)},ae=function(){var e=n({target:"api"},V);$=!0,X.inc(e)},se=function(){var e=n({target:"demand"},V);$=!0,Y.inc(e)},ce=function(){var e=n({target:"demand"},V);$=!0,X.inc(e)},ue=function(){var e=n({target:"demand"},V);$=!0,Z.inc(e)},le=function(){var e=n({target:"demand"},V);$=!0,Q.inc(e)},de=function(){var e=n({target:"demand"},V);$=!0,H.inc(e)},fe=function(){var e=n({target:"player"},V);$=!0,Y.inc(e)},pe=function(){var e=n({target:"player"},V);$=!0,X.inc(e)},he=function(){var e=n({target:"player"},V);$=!0,ee.inc(e)},ve=function(){var e=n({target:"player"},V);$=!0,H.inc(e)},ge=function(){var e,t;V.env=R?"dev":"prod",V.device=(t=L())>=700&&t<1e3?"tablet":t>=1e3?"desktop":"mobile",V.browser=(e=function(){var e=(0,B.detect)(),t="other";if(null!==e){var r=e.name;if(r in U){var n=U[r];t=!0===n?r:n}}return t}().toLowerCase(),-1===F.indexOf(e)?"unknown browser":e)};var me=function(){var e,t,r=(ge(),e=Math.random()<.01,t=j().has("force_metrics"),q=e||t,z.setInterval(te,1e4),z.addEventListener("pagehide",re),z.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&te()})),{recordFrameworkRequest:ne,recordFrameworkLoad:ie,recordDemandAPIRequest:oe,recordDemandAPIError:ae,recordDemandRequest:se,recordAdServerDemandError:ue,recordAmazonDemandError:le,recordDemandError:ce,recordDemandSuccess:de,recordPlayerRequest:fe,recordPlayerError:pe,recordJWPlayerError:he,recordPlayerSuccess:ve});return r.recordFrameworkRequest(),n({},r)}();const ye=me;var we,be=r(263),Se=r.n(be),Ee=p(),Oe="info",xe={platform:"javascript",sdk:{name:"sentry.javascript.browser",packages:[{name:"future:sentry/minimal",version:"0.0.1"}],version:"5.20.1",integrations:["InboundFilters","FunctionToString","TryCatch","Breadcrumbs","UserAgent"]},request:{url:Ee.location.href,headers:{"User-Agent":Ee.navigator.userAgent}},extra:{arguments:[]}},Pe=function(){return Math.floor(Math.random()*Math.floor(16)).toString(16)},Ae=function(){return"performance"in Ee?(Ee.performance.timing.navigationStart+Ee.performance.now())/1e3:Date.now()/1e3},ke=function(e){var t;return Boolean(null===(t=null==we?void 0:we.allowUrls)||void 0===t?void 0:t.find((function(t){return e.filename.match(t)})))},_e=function(e){void 0!==we?M(we.apiURL,e)||b.error("Sentry send failed"):b.warn("Error ignored because Sentry is not yet configured")},Te={environment:"production",ignoreErrors:[],denyUrls:[],debug:!1},je=!1,Ne={},Ie=[],Ce=function(e){return{colno:e.columnNumber,filename:e.fileName,function:"undefined"===e.functionName?"?":e.functionName,lineno:e.lineNumber,in_app:!0}},Re=["LinkedErrors","GlobalHandlers"],De=function(e){var t=e.type,r=e.stacktrace;return"error"===t.toLowerCase()&&r&&0!==r.length};!function(e){if(!("dsn"in e))throw new Error("You must provide a DSN to the Sentry init");if(!("release"in e))throw new Error("You must provide a release version to the Sentry init");var t,r,i,o;we=n(n(n({},Te),e),{apiURL:(i=e.dsn,o=new URL(i),o.origin+"/api"+o.pathname+"/store/?sentry_key="+o.username+"&sentry_version=7")}),t=Math.random()<.01,r=j().has("force_sentry"),je=t||r}({dsn:"https://d0c0b062da6e4af4b3841ca1f4a75b81@o362810.ingest.sentry.io/5804785",environment:"production",debug:!1,release:"champagne@2.5.2",denyUrls:a([],[/preview\.vanilla\.tools/i,/connect\.goog/i,/file:\/\//i,/futureplc\.engineering/i]),allowUrls:a(a([],[/^https?:\/\/champagne\.futurecdn\.net\/champagne\.js/]),[/^https?:\/\/c\.amazon-adsystem\.com\/aax2\/apstag\.js/,/^https?:\/\/securepubads\.g\.doubleclick.net\/tag\/js\/gpt\.js/,/^https?:\/\/cdn\.adsafeprotected\.com\/iasPET\.1\.js/,/^https?:\/\/js-sec\.indexww\.com\/ht\/p/]),beforeSend:function(e){return e.exception.values.find(De)?(e.user,function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(e,["user"])):null},integrations:function(e){return e.filter((function(e){var t=e.name;return!Re.includes(t)}))}});const Me=function(e){!function(e){if(void 0!==we)if(je)if(Boolean(null==we?void 0:we.denyUrls.find((function(e){return window.location.hostname.match(e)}))))b.warn("Error ignored because the page URL is denied");else{var t="string"==typeof e?e:e.message;if(we.ignoreErrors.find((function(e){return t.includes(e)})))b.warn("Error ignored because it appears in ignore error list");else{var r=function(e){var t,r;return"string"==typeof e?(t=e,r=[]):(t=e.message,r=Se().parse(e).map(Ce).reverse()),{type:"Error",value:t,stacktrace:{frames:r},mechanism:{handled:!0,type:"generic"}}}(e);if(we.allowUrls&&r.stacktrace.frames.length>0&&!r.stacktrace.frames.find(ke))b.warn("Error ignored because no scripts in the stack trace have an allowed URL");else{var i=n(n({level:"error"},xe),{event_id:Array(32).fill(0).map(Pe).join(""),timestamp:Ae(),environment:we.environment,release:we.release,tags:Ne,breadcrumbs:Ie,exception:{values:[r]}});if(we.beforeSend){var o=we.beforeSend(i);if(!o)return void b.warn("Error ignored because beforeSend returned null");_e(o)}else _e(i)}}}else b.warn("Error ignored because of sample rate");else b.warn("Error ignored because Sentry is not yet configured")}(e)};function Le(e){var t=p(),r=t.top,n=t;do{try{if(e in n)break}catch(e){}n=n.parent}while(n&&n!==r);return Boolean(n)&&e in n?n[e]:null}const We=function(){return i(void 0,void 0,void 0,(function(){var e,t;return o(this,(function(r){return e=new Promise((function(e,t){var r=Le("__tcfapi");null!==r?e(r):t(new Error("__tcfapi does not exist"))})),t=new Promise((function(e,t){p().setTimeout((function(){return t(new Error("__tcfapi timeout after 5000ms"))}),5e3)})),[2,Promise.race([e,t]).catch((function(e){return b.error(e),function(e,t,r){var n={cmpId:10,cmpVersion:23,gdprApplies:!0,tcfPolicyVersion:t,eventStatus:"tcloaded",cmpStatus:"loaded",tcString:"",isServiceSpecific:!0,useNonStandardStacks:!1,purposeOneTreatment:!1,publisherCC:"GB",outOfBand:{allowedVendors:{},disclosedVendors:{}},purpose:{consents:{},legitimateInterests:{}},vendor:{consents:{},legitimateInterests:{}},specialFeatureOptins:{},publisher:{consents:{},legitimateInterests:{},customPurpose:{consents:{},legitimateInterests:{}},restrictions:{}}},i={cmpId:10,cmpVersion:23,apiVersion:"23",gdprApplies:!0,tcfPolicyVersion:t,cmpLoaded:!0,cmpStatus:"loaded",displayStatus:"hidden"};switch(e){case"getTCData":case"addEventListener":r(n,!0);break;case"ping":r(i);break;case"removeEventListener":r(!0);break;case"displayConsentUi":r();break;default:b.error("Unknown command for mocked __tcfapi: "+e)}}}))]}))}))};(function(){var e=("; "+p().document.cookie).split("; usprivacy=");if(2===e.length){var t=e.pop();if(t)return t.split(";").shift()}})()||function(e,t,r,n){var i=p(),o=new Date;o.setTime(o.getTime()+1e3*r);var a="expires="+o.toUTCString(),s=n?"domain="+n+";":"";i.document.cookie=e+"="+t+";"+a+";path=/;"+s+"SameSite=Lax;secure"}("usprivacy","1YNN",31536e3,p().window.top.location.host);var Be=function(){return i(void 0,void 0,void 0,(function(){var e,t;return o(this,(function(r){switch(r.label){case 0:return[4,i(void 0,void 0,void 0,(function(){var e,t;return o(this,(function(r){return t=new Promise((function(t){var r=p();e=r.setInterval((function(){We().then((function(n){n("ping",2,(function(n){"loaded"===n.cmpStatus&&(r.clearInterval(e),t(!0))}))})).catch((function(n){b.error("Error retrieving GDPR loaded. "+n.message),r.clearInterval(e),t(!1)}))}),50)})),[2,t]}))}))];case 1:return e=r.sent(),t=null,e?[4,new Promise((function(e,t){We().then((function(r){r("addEventListener",2,(function(r,n){n||t(new Error("Failed to get GDPR consent data, __tcfapi addEventListener request failed")),"tcloaded"!==r.eventStatus&&"useractioncomplete"!==r.eventStatus||e(r)}))}))})).catch((function(e){return b.error("Error retrieving GDPR consent. "+e.message),null}))]:[3,3];case 2:t=r.sent(),r.label=3;case 3:return null===t?[2,{askedForConsent:!1,consent:null}]:[2,{askedForConsent:!0,consent:t}]}}))}))},Ue=function(){var e=p(),t=e.localStorage.getItem("chmp-uuid");if(null!==t)return t;var r="xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=Math.floor(16*Math.random());return("x"===e?t:3&t|8).toString(16)}));return e.localStorage.setItem("chmp-uuid",r),r},Fe=5e3,ze=function(){return Fe};const Ve=function(e){Fe=e};var $e=function(e){var t={};return e.account&&(t.s=e.account),e.sizes&&(t.z=e.sizes),e.div&&(t.d=e.div),e.targeting?t.g=e.targeting:t.g={},e.refresh&&(t.refresh=e.refresh),t},qe=function(){function e(){this.placement=null,this.refreshMode=null,this.location=null,this.pageTitle=null,this.personalizedAdsMode="allowed",this.gdprConsent=null,this.uspConsent=null,this.targeting=[],this.discovery=null,this.adunits=[],this.isVideo=!1,this.adServerBidder=void 0}return e.prototype.setPlacement=function(e){return this.placement=e,this},e.prototype.setRefreshMode=function(e){return void 0===e&&(e=!1),this.refreshMode=e,this},e.prototype.setLocation=function(e){return this.location=e,this},e.prototype.setPageTitle=function(e){return this.pageTitle=e,this},e.prototype.setPersonalizedAdsMode=function(e){return["allowed","managed","blocked"].includes(e)&&(this.personalizedAdsMode=e),this},e.prototype.setGdprConsent=function(e){return this.gdprConsent=e,this},e.prototype.setUSPConsent=function(e){return this.uspConsent=e,this},e.prototype.setTargeting=function(e){return this.targeting=e,this},e.prototype.setDiscovery=function(e){return this.discovery=e,this},e.prototype.setAdunits=function(e){return this.adunits=e.map($e),this},e.prototype.setIsVideo=function(e){return this.isVideo=e,this},e.prototype.setAdServerBidder=function(e){return this.adServerBidder=e,this},e.prototype.execute=function(){return i(this,void 0,void 0,(function(){var e,t,r;return o(this,(function(n){return e=[["r",Math.round(1e3*Math.random())],["o",JSON.stringify(this.getState())],["uuid",Ue()]],null!=this.discovery&&e.push(["discovery",this.discovery]),this.isVideo&&e.push(["at","v"]),t=e.map((function(e){return e.join("=")})).join("&"),r="https://ads.servebom.com/ramp?"+t,[2,Promise.race([fetch(r,{credentials:"include"}).then((function(e){if(e.ok)return e.json();throw new Error("request to adServer failed status: "+e.status+", "+e.statusText)})),new Promise((function(e,t){return setTimeout((function(){return t(new Error("took more than five seconds to resolve and timed out"))}),ze())}))])]}))}))},e.prototype.getState=function(){return{f:this.refreshMode?1:"",p:this.placement,l:this.location,tt:this.pageTitle,fs:0,t:(t=function(e){return e<=9?"0"+e:""+e},r=new Date,r.getFullYear()+"-"+t(r.getMonth()+1)+"-"+t(r.getDate())+" "+t(r.getHours())+":"+t(r.getMinutes())+":"+t(r.getSeconds())),tz:(new Date).getTimezoneOffset(),r:(e=W(),""===e.width?"":e.width+"x"+e.height),pam:this.personalizedAdsMode,gdprConsent:this.gdprConsent,ccpa:this.uspConsent,g:this.targeting,a:this.adunits,ex:[],identities:void 0,ab:this.adServerBidder};var e,t,r},e}();const Je=qe;var Ge;!function(e){e.AD_SERVER="adServer"}(Ge||(Ge={}));var Ye=!1;const He=function(){var e=p();return e.bordeaux&&!Ye&&(e.bordeaux.cmd=e.bordeaux.cmd||[],Ye=new Promise((function(t){var r,n;return null===(n=null===(r=e.bordeaux)||void 0===r?void 0:r.cmd)||void 0===n?void 0:n.push((function(){return t(e.bordeaux)}))}))),Ye};var Ke=function(e){var t=e.split("/");if(t.length>1)return t[t.length-2]+"/"+t[t.length-1]};const Xe=function(e){return i(void 0,void 0,void 0,(function(){var t,r,a,s,c,u,l,d,f,h,v,g,m,y,w,S;return o(this,(function(E){switch(E.label){case 0:if(!(t=new URL(e).searchParams).has("iu"))throw new Error("Account is not defined in the ad tag");if(!(r=t.get("iu")))throw new Error("Account is empty in the ad tag");return a="video_content_"+Math.ceil(1e3*Math.random()),s={account:r,div:a,sizes:[540,304],targeting:{},refresh:1},[4,Promise.all([Be(),i(void 0,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(e,t){i(void 0,void 0,void 0,(function(){var e,t;return o(this,(function(r){return e=new Promise((function(e,t){var r=Le("__uspapi");null!==r?e(r):t(new Error("__uspapi does not exist"))})),t=new Promise((function(e,t){p().setTimeout((function(){return t(new Error("__uspapi timeout after 5000ms"))}),5e3)})),[2,Promise.race([e,t]).catch((function(e){return b.error(e),function(e,t,r){"getUSPData"===e&&r({version:t,uspString:"1---"},!0)}}))]}))})).then((function(r){r("getUSPData",1,(function(r,n){r&&n&&Object.keys(r).includes("uspString")?e(r):t(new Error("Failed to get USP consent data, __uspapi getUSPData request failed"))}))}))})).catch((function(e){return b.error("Error retrieving USP consent. "+e.message),null}))];case 1:return null===(e=t.sent())?[2,{askedForConsent:!1,consent:null,ccpaApplies:!1}]:e.uspString.includes("1---")?[2,{askedForConsent:!0,consent:null,ccpaApplies:!1}]:[2,{askedForConsent:!0,consent:e,ccpaApplies:!0}]}}))}))])];case 1:return c=E.sent(),u=c[0].consent,l=c[1],d=l.consent,f=l.ccpaApplies,h=!u||u.gdprApplies,v=(null==u?void 0:u.tcString)||null,y=(m=(new Je).setIsVideo(!0).setRefreshMode(!0).setLocation(encodeURIComponent(function(){var e=p();try{return e.context&&e.context.location&&e.context.location.href?e.context.location.href:e.top.document.location.href}catch(t){return e.document.referrer}}().replace("%",""))).setPageTitle(encodeURIComponent(document.title)).setPersonalizedAdsMode(h?"managed":"allowed").setTargeting([]).setAdunits([s]).setGdprConsent(v)).setAdServerBidder,[4,i(void 0,void 0,void 0,(function(){var e,t,r,n;return o(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),(e=He())?[4,e]:[3,3];case 1:return(t=i.sent()).getContext?[4,t.getContext()]:[3,3];case 2:if((r=i.sent()).thirdPartyResults&&r.thirdPartyResults[Ge.AD_SERVER]&&r.thirdPartyResults[Ge.AD_SERVER].config&&r.thirdPartyResults[Ge.AD_SERVER].config.ab)return[2,r.thirdPartyResults[Ge.AD_SERVER].config.ab];i.label=3;case 3:return[3,5];case 4:return n=i.sent(),b.error("Error in champagne adServer ab config retriever",n),[3,5];case 5:return[2,[]]}}))}))];case 2:return g=y.apply(m,[E.sent()]),f&&g.setUSPConsent((null==d?void 0:d.uspString)||null),[4,g.execute()];case 3:return w=E.sent(),S=(w.bids||[]).find((function(e){return e.divid===a})),S?[2,n(n(n(n(n({},w.targeting||{}),S.adtargets||{}),{_vrg:S.ad_region,_cp:S.price,_pl:S.price_level,adunit:S.divid,_bd:S.type,_br:S.bidder.reportid,_wb:S.id,pos:"preroll"}),S.ad_url?{_vst:Ke(S.ad_url)}:{}),S.partner_uid_source?{_puids:S.partner_uid_source}:{})]:[2,{}]}}))}))};function Qe(e){return function t(r){return 0===arguments.length||function(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}(r)?t:e.apply(this,arguments)}}Array.isArray,"undefined"!=typeof Symbol&&Symbol.iterator;Object.prototype.toString;Object.keys,Number.isInteger,"function"==typeof Object.is&&Object.is;Date.prototype.toISOString,"function"==typeof Object.assign&&Object.assign;const Ze=Qe((function(e){var t,r=!1;return function(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,r){return t.apply(this,arguments)};case 3:return function(e,r,n){return t.apply(this,arguments)};case 4:return function(e,r,n,i){return t.apply(this,arguments)};case 5:return function(e,r,n,i,o){return t.apply(this,arguments)};case 6:return function(e,r,n,i,o,a){return t.apply(this,arguments)};case 7:return function(e,r,n,i,o,a,s){return t.apply(this,arguments)};case 8:return function(e,r,n,i,o,a,s,c){return t.apply(this,arguments)};case 9:return function(e,r,n,i,o,a,s,c,u){return t.apply(this,arguments)};case 10:return function(e,r,n,i,o,a,s,c,u,l){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}(e.length,(function(){return r?t:(r=!0,t=e.apply(this,arguments))}))}));String.prototype.trim;var et=Ze((function(){return i(void 0,void 0,void 0,(function(){var e,t;return o(this,(function(r){return e=p(),(t=e.document.createElement("script")).id="amazon-script",t.src="https://c.amazon-adsystem.com/aax2/apstag.js",[2,new Promise((function(r,n){t.onload=function(){r("success")},t.onerror=function(e){return n(e)},e.document.body.appendChild(t)}))]}))}))}));const tt=function(e){return i(void 0,void 0,void 0,(function(){var t,r,a,s,c,u,l,d;return o(this,(function(f){switch(f.label){case 0:if(!(t=new URL(e).searchParams).has("sz"))throw new Error("Sizes are not defined in the ad tag");if(!(r=t.get("sz")))throw new Error("Sizes are empty in the ad tag");return a=r.split("|").map((function(e){return e.split("x").map(Number)})),u={slotID:s="videoSlot",mediaType:c="video",sizes:a},[4,i(void 0,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return[4,i(void 0,void 0,void 0,(function(){var e,t,r,n,i;return o(this,(function(o){switch(o.label){case 0:return[4,Be()];case 1:return null===(e=o.sent()).consent?[2,!1]:(t=e.consent,r=t.gdprApplies,n=t.vendor,i=n&&n.consents&&n.consents[793],[2,!r||i])}}))}))];case 1:if(!t.sent())throw new Error("No consent for loading Amazon script");return(e=p()).apstag?[3,3]:[4,et().catch((function(e){throw new Error(JSON.stringify(e))}))];case 2:t.sent(),t.label=3;case 3:if(!e.apstag||null===e.apstag.init)throw new Error("window.apstag does not exist");return!0!==e.apstag.inited&&(e.apstag.init({pubID:"3032",adServer:"googletag",deals:!0}),e.apstag.inited=!0),[2,Promise.resolve()]}}))}))];case 1:return f.sent(),l=new Promise((function(e,t){return setTimeout((function(){return t(new Error("took more than five seconds to resolve and timed out"))}),ze())})),d=new Promise((function(e,t){var r=p();r.apstag?r.apstag.fetchBids({slots:[u],timeout:ze()},(function(t){if(0!==t.length){var r=t.filter((function(e){return e.slotID===s&&e.mediaType===c})).reduce((function(e,t){return n(n({},e),t.targeting)}),{});e(r)}else e({})})):t(new Error("window.apstag does not exist"))})),[2,Promise.race([l,d])]}}))}))};var rt=p(),nt=p();const it=function(e,t){return void 0===t&&(t={}),i(void 0,void 0,void 0,(function(){var r,a,s,c,u,l,d,f,h,v,g;return o(this,(function(m){switch(m.label){case 0:ye.recordDemandRequest();try{r=new URL(e)}catch(t){return t instanceof Error&&b.error('Given adTag cannot be parsed. Error: "'+t.message+'"'),ye.recordDemandError(),[2,e]}return[4,Promise.all([Xe(e).catch((function(e){return e&&(b.error('Error retrieving AdServer demand. Error: "'+e.message+'"'),ye.recordAdServerDemandError()),{}})),tt(e).catch((function(e){return e&&(b.error('Error retrieving Amazon demand. Error: "'+e.message+'"'),ye.recordAmazonDemandError()),{}})),i(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,new Promise((function(e,t){try{e(JSON.parse(rt.localStorage._pdfps||"[]").slice(0,250))}catch(e){t(new Error("Champagne failed to parse Permutive segments "+e))}}))];case 1:return[2,{permutive:e.sent().slice(0,250)}]}}))})).catch((function(e){return b.warn('Error retrieving Permutive segments. Error: "'+e.message+'"'),{}})),i(void 0,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return(e=He())?[4,e]:[3,3];case 1:return[4,t.sent().getThirdPartyAPIInfo()];case 2:if(t.sent().find((function(e){return"doubleVerify"===e.name&&!0===e.enabled}))&&Array.from(document.getElementsByTagName("script")).some((function(e){return"https://pub.doubleverify.com/dvtag/37903656/DV1705976/pub.js"===e.src}))&&nt.dvtag)return[2,nt.dvtag.getTargeting()];t.label=3;case 3:return[2,{}]}}))})).catch((function(e){return b.warn('Error retrieving DoubleVerify targeting. Error: "'+e.message+'"'),{}}))])];case 1:return a=m.sent(),s=p(),c=encodeURIComponent(s.location.href),r.searchParams.has("description_url")||r.searchParams.set("description_url",c),r.searchParams.has("ppid")||!s.bordeaux?[3,3]:[4,s.bordeaux.hybridId];case 2:u=m.sent(),r.searchParams.set("ppid",u),m.label=3;case 3:return l={description_url:c},d=r.searchParams.get("cust_params"),f=d?d.split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var r,i=t[0],o=t[1];return n(n({},e),((r={})[i]=o,r))}),{}):{},h=a.reduce((function(e,t){return n(n({},e),t)}),{}),v=Object.entries(n(n(n(n(n({},l),f),h),t),function(){var e=j();if(!e.has("force_targeting"))return{};var t={};return e.forEach((function(e,r){e&&"force_targeting"!==r&&(t[r]=e)})),t}())).filter((function(e){var t=e[1];return Boolean(t)})).map((function(e){return e[0]+"="+e[1]})),r.searchParams.set("cust_params",v.join("&")),r.searchParams.get("plcmt")||r.searchParams.set("plcmt","2"),g=r.toString(),ye.recordDemandSuccess(),[2,g]}}))}))},ot=function(e){var t=e.playerSize,r=e.targeting,n=e.index,a=e.schedule;return i(void 0,void 0,void 0,(function(){var e,i,s,c,u;return o(this,(function(o){switch(o.label){case 0:e=a,o.label=1;case 1:return o.trys.push([1,8,,9]),(i=He())?[4,i]:[3,6];case 2:return(s=o.sent()).prebidVideo?[4,s.prebidVideo(e,t,"video-"+n)]:[3,4];case 3:e=o.sent(),o.label=4;case 4:return s.getContext?[4,s.getContext()]:[3,6];case 5:(c=o.sent()).hybridABTestTargeting&&c.hybridABTestTargeting.length>0&&(r.hybridTestID=c.hybridABTestTargeting.map((function(e){return e.id+"|"+e.variant_id})).toString()),o.label=6;case 6:return[4,it(e,r)];case 7:return e=o.sent(),[3,9];case 8:return u=o.sent(),b.error("Error in champagne schedule processing",u),[3,9];case 9:return[2,e]}}))}))};var at,st=function(e){var t=e.targeting,r=e.playerSize,a=e.index;return function(e){return i(void 0,void 0,void 0,(function(){var i,s;return o(this,(function(o){switch(o.label){case 0:return void 0===e.tag?[2,e]:(i=[n({},e)],s={},[4,ot({schedule:e.tag,targeting:t,playerSize:r,index:a})]);case 1:return[2,n.apply(void 0,i.concat([(s.tag=o.sent(),s)]))]}}))}))}},ct=[640,360],ut=ct[1]/ct[0],lt=function(e){var t=e.getContainer().getBoundingClientRect(),r=Math.round(t.width),n=Math.round(t.height);return 0===r?[ct[0],ct[1]]:n<=r/4?[r,r*ut]:[r,n]},dt=function(e){return i(void 0,void 0,void 0,(function(){var t,r;return o(this,(function(n){return t=e.getWidth(),(r=e.getHeight())&&t?[2,[t,r]]:[2,lt(e)]}))}))};!function(e){e.ARTICLE="article",e.BANNER="banner",e.FEED="feed",e.FLOATING="floating",e.INSTREAM="instream",e.INTERSTITIAL="interstitial",e.SLIDER="slider"}(at||(at={}));const ft=function(e){return void 0===e&&(e={}),i(void 0,void 0,void 0,(function(){var t,r;return o(this,(function(i){return[2,n(n({},e),{advertising:n(n({},e.advertising||{}),{placement:at.INSTREAM,tag:(null===(t=e.advertising)||void 0===t?void 0:t.tag)||(null===(r=e.advertising)||void 0===r?void 0:r.schedule)})})]}))}))},pt=function(e){var t=e.player,r=e.config,a=e.targeting,s=void 0===a?{}:a;return i(void 0,void 0,void 0,(function(){var e,a;return o(this,(function(c){switch(c.label){case 0:return[4,ft(r)];case 1:return e=c.sent(),t.setup(e),void 0===(a=t.getConfig().advertising)||void 0===a.schedule?(ye.recordPlayerError(),b.error("No ad schedule for Champagne video setup"),[2,e]):(t.setPlaylistItemCallback(function(e){var t=e.player,r=e.schedule,a=e.targeting;return function(e,s){return i(void 0,void 0,void 0,(function(){var i,c,u,l,d,f,p;return o(this,(function(o){switch(o.label){case 0:return[4,dt(t)];case 1:i=o.sent(),o.label=2;case 2:return o.trys.push([2,7,,8]),c="function"==typeof a?a({player:t}):a,Array.isArray(r)?(u=[n({},e)],f={},[4,Promise.all(r.map(st({targeting:c,playerSize:i,index:s})))]):[3,4];case 3:return[2,n.apply(void 0,u.concat([(f.adschedule=o.sent(),f)]))];case 4:return"string"!=typeof r?[3,6]:(l=[n({},e)],p={},[4,ot({schedule:r,targeting:c,playerSize:i,index:s})]);case 5:return[2,n.apply(void 0,l.concat([(p.adschedule=o.sent(),p)]))];case 6:return[3,8];case 7:return d=o.sent(),b.error("Error in champagne playlist item callback",d),[3,8];case 8:return[2,e]}}))}))}}({player:t,schedule:a.schedule,targeting:s})),[2,e])}}))}))};var ht=function(e){return new Promise((function(t,r){var n=p(),i=n.document.createElement("script");i.setAttribute("src",e),i.setAttribute("async",""),i.onload=function(){return t(n.jwplayer)},i.onerror=function(e){return r(e)},n.document.head.appendChild(i)}))};const vt=function(e,t,r,a,s){return void 0===a&&(a={}),void 0===s&&(s={}),function(e,t,r,a,s){return void 0===a&&(a={}),void 0===s&&(s={}),i(void 0,void 0,void 0,(function(){var i,c,u;return o(this,(function(o){switch(o.label){case 0:return ye.recordPlayerRequest(),[4,ht(t)];case 1:if(!(i=o.sent()))throw ye.recordJWPlayerError(),new Error("JWPlayer does not exist on the page");if(c=n(n({},i.defaults||{}),a),!(u=i(e)))throw ye.recordJWPlayerError(),new Error("JWPlayer did not get setup in the given div");return[4,pt({player:u,config:n(n({},c),{playlist:r}),targeting:s})];case 2:return o.sent(),ye.recordPlayerSuccess(),[2,u]}}))}))}(e,t,r,a,s).catch((function(e){b.error("Adding JWPlayer failed: "+e.message)}))},gt=function(e,t,r){return pt({player:e,config:t,targeting:r}).catch((function(e){return b.error("Setting up JWPlayer failed: "+e.message),t}))},mt=function(e,t){return void 0===t&&(t={}),ye.recordDemandAPIRequest(),"string"!=typeof e?(b.error("Ad tag must be a string, "+typeof e+" given."),ye.recordDemandAPIError(),Promise.resolve(e)):e.match(/^https?:\/\//)?e.match(/\?[;&a-z\d%_.~+=-]+/i)?it(e,t):(b.error("Ad tag must have at least one parameter already defined."),ye.recordDemandAPIError(),Promise.resolve(e)):(b.error("Ad tag must be a valid URL."),ye.recordDemandAPIError(),Promise.resolve(e))},yt=function(){return"master"};var wt,bt,St=p();!function(){var e,t=p();t.champagne={cmd:(null===(e=t.champagne)||void 0===e?void 0:e.cmd)||[],retrieveDemand:mt,metrics:ye,addJWPlayer:vt,setupJWPlayer:gt,getBranchName:yt,setTimeout:Ve,version:"2.5.2"},function(e,t){if(Array.isArray(e)){var r=function(e){return"function"!=typeof e?(b.error("Command queue will only accept a function callback command, '"+typeof e+"' given."),0):(e(),0)};t((function(){e.forEach((function(e){e()})),e.push=r}))}else b.error("Command queue commands is not an array")}(t.champagne.cmd,(function(e){return e()}))}(),function(e){var t,r=e.message,i=e.category,o=void 0===i?"ui":i,a=e.level;void 0!==r?(t={category:o,message:r,level:void 0===a?Oe:a},Ie.push(n({timestamp:Ae()},t))):b.error("You must provide a message to a Sentry breadcrumb")}({category:"script",message:"Champagne framework loaded"}),((null===(wt=null==St?void 0:St.document)||void 0===wt?void 0:wt.querySelectorAll('script[src="https://champagne.futurecdn.net/champagne.js]'))||[]).length>1&&Me("More than one Champagne script has been loaded on this page."),bt=function(e){Me(e.logItem.args.toString())},y.error.push(bt),ye.recordFrameworkLoad()})()})();