!function(i){var n,t,p="https://sr.studiostack.com",u="559dc27b0ed9ab19dd789ca7c6c496fa951b2a4a94a578ea40831ebe81937d90",h="body",e="video",s="scrollHeight",r="offsetHeight",d="scrollTop",c="scrollLeft",l="clientTop",m="clientLeft",g="documentElement",o="getElementsByTagName",a=function(){function t(t,e){var i=this;this.context=t,this.methodName=e,this.originalMethodReference=t[e],this.methodChain=[],this.boundMethodChain=[],this.wrappedMethod=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.boundMethodChain[i.boundMethodChain.length-1].apply(void 0,t)},t[e]=this.wrappedMethod}return t.prototype.getMethodName=function(){return this.methodName},t.prototype.add=function(t){this.methodChain.push(t),this.rebindMethodChain()},t.prototype.remove=function(t){var e=this.methodChain.indexOf(t);-1<e&&(this.methodChain.splice(e,1),0<this.methodChain.length?this.rebindMethodChain():this.context[this.methodName]=this.originalMethodReference)},t.prototype.rebindMethodChain=function(){this.boundMethodChain=[];for(var t=void 0,e=0;t=this.methodChain[e];e++){var i=this.boundMethodChain[e-1]||this.originalMethodReference.bind(this.context);this.boundMethodChain.push(t(i))}},t}(),f=function(){function t(t){this.w=t,this.methodChains=[],this.cbFunc=void 0,this.isTracking=!1}return t.prototype.start=function(t){if(!this.isTracking&&history.pushState&&this.w.addEventListener){this.cbFunc=t,this.isTracking=!0,this.pushStateOverride=this.pushStateOverride.bind(this),this.replaceStateOverride=this.replaceStateOverride.bind(this),this.handlePopState=this.handlePopState.bind(this);var e=new a(history,"pushState");e.add(this.pushStateOverride),this.methodChains.push(e);var i=new a(history,"replaceState");i.add(this.replaceStateOverride),this.methodChains.push(i),this.w.addEventListener("popstate",this.cbFunc)}},t.prototype.pushStateOverride=function(i){var s=this;return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.apply(void 0,t),s.cbFunc()}},t.prototype.replaceStateOverride=function(i){var s=this;return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.apply(void 0,t),s.cbFunc()}},t.prototype.handlePopState=function(){this.cbFunc()},t.prototype.stop=function(){if(this.isTracking){if(this.methodChains.length){for(var t=0,e=this.methodChains;t<e.length;t++){var i=e[t];"pushState"===i.getMethodName()&&i.remove(this.pushStateOverride),"replaceState"===i.getMethodName()&&i.remove(this.replaceStateOverride)}this.methodChains=[]}this.w.removeEventListener("popstate",this.handlePopState),this.cbFunc=void 0,this.isTracking=!1}},t}(),v=function(){function t(){}return t.prototype.sendEvent=function(t){if(XMLHttpRequest){var e=new XMLHttpRequest;e.open("POST",p+"/track/storied-event",!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.send(JSON.stringify(t))}},t}(),y=function(){function t(){}return t.prototype.sendEvent=function(t){if(XMLHttpRequest){var e=new XMLHttpRequest;e.open("POST",p+"/track/custom-event",!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.send(JSON.stringify(t))}},t}(),b=function(){function t(t,e,i,s,r,n){this.w=t,this.story=s,this.page=r,this.sponsorship=n;var o=new Date;this.intervalTime=5e3,this.processorId=e,this.sessionId=i,this.viewId=o.getTime().toString(),this.viewStartTime=o.toISOString(),this.heartbeat=1,this.isTracking=!1,this.checkTimerLoop=0,this.lastActivityTime=Date.now(),this.isBlurred=!1,this.maxScroll=0,this.notifyActive=this.debounce(this.notifyActive.bind(this),100),this.handleScroll=this.debounce(this.handleScroll.bind(this),100)}return t.prototype.setIntervalTime=function(t){this.stop(),this.intervalTime=t,this.start()},t.prototype.asQueryParams=function(t){var e=[];for(var i in t)e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e.join("&")},t.prototype.send=function(t){if(XMLHttpRequest){var e=new XMLHttpRequest;e.open("POST",p+"/track/attention-event",!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.send(JSON.stringify(t))}else{new Image(1,1).src=p+"/track/attention-px?"+this.asQueryParams(t)}},t.prototype.sendLinkClick=function(t){if(t.linkclick&&XMLHttpRequest){var e=new XMLHttpRequest;e.open("POST",p+"/track/attn-link-click-event",!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.send(JSON.stringify(t))}},t.prototype.getViewId=function(){return this.viewId},t.prototype.getAttnEventDto=function(t){var e=this.sponsorship.getPbElmPos(this.story.tis),i=this.page.getDocHeight(),s=this.page.getViewportHeight(),r=!e.pbl.length||e.pbl[0]<=0?i:e.pbl[0],n=[],o=[],a=[],h=0,p="",d="",c="";for(var l in t)h=t[l].geoid||h,p=t[l].cn||p,d=t[l].rg||d,c=t[l].ct||c,n.push(t[l].mid),o.push(t[l].post?t[l].post.storyRequestId:0),a.push(t[l].post?t[l].post.storyRequestPostId:0);return{mids:n,rand:(new Date).getTime(),sids:o,pids:a,hbt:this.heartbeat,mxscrl:this.maxScroll,prcscrl:Math.min(100,Math.max(0,Math.round((this.maxScroll+s)/r*100))),pbs:e.pbs.join("."),pbm:e.pbm.join("."),pbl:e.pbl.join("."),url:this.page.getHref(),procid:this.processorId,sessid:this.sessionId,viewid:this.viewId,viewstarttime:this.viewStartTime,uid:u,wh:i,vh:s,referrer:this.story.referrer||"",geoid:h,cn:p,rg:d,ct:c}},t.prototype.getAttnLinkClickEventDto=function(t,e){var i=this.getAttnEventDto(e);return i.linkclick={clickid:(new Date).getTime().toString(),href:t.getAttribute("href"),id:t.getAttribute("id"),name:t.getAttribute("name"),target:t.getAttribute("target"),rel:t.getAttribute("rel")},i},t.prototype.debounce=function(i,s){var r;return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];clearTimeout(r),r=setTimeout(function(){return i.apply(void 0,t)},s)}},t.prototype.notifyActive=function(){this.lastActivityTime=Date.now()},t.prototype.handleScroll=function(){var t=this.page.getScrollTop();this.maxScroll=Math.max(t,this.maxScroll)},t.prototype.handleEvent=function(t){if("mousedown"===t.type&&this.notifyActive(),"mousemove"===t.type&&this.notifyActive(),"mouseup"===t.type&&this.notifyActive(),"blur"===t.type&&(this.isBlurred=!0),"focus"===t.type&&(this.isBlurred=!1,this.notifyActive()),"scroll"===t.type&&(this.handleScroll(),this.notifyActive()),"click"===t.type&&(this.notifyActive(),t.target instanceof Element)){var e=t.target.closest("a");e&&e.hasAttribute("href")&&0===e.getAttribute("href").trim().toLowerCase().indexOf("http")&&this.sendLinkClick(this.getAttnLinkClickEventDto(e,this.story.mediaConfigs))}},t.prototype.start=function(){var s=this;if(!this.isTracking){var r=this;this.lastActivityTime=Date.now(),this.w.addEventListener("mousedown",this),this.w.addEventListener("mousemove",this),this.w.addEventListener("mouseup",this),this.w.addEventListener("blur",this),this.w.addEventListener("focus",this),this.w.addEventListener("scroll",this),this.w.addEventListener("click",this);var n=this.page.getVideoHTMLCollection(),t=function(){var t=!1;if(n)for(var e=0,i=Array.from(n);e<i.length;e++){if(!i[e].paused){t=!0;break}}(!s.isBlurred&&t||(Date.now()-s.lastActivityTime)/1e3<=15)&&(r.send(r.getAttnEventDto(r.story.mediaConfigs)),r.heartbeat+=s.intervalTime/1e3)};t(),this.checkTimerLoop=this.w.setInterval(t,this.intervalTime)}this.isTracking=!0},t.prototype.stop=function(){this.isTracking&&(this.w.removeEventListener("mousedown",this),this.w.removeEventListener("mousemove",this),this.w.removeEventListener("mouseup",this),this.w.removeEventListener("blur",this),this.w.removeEventListener("focus",this),this.w.removeEventListener("scroll",this),this.w.removeEventListener("click",this),this.checkTimerLoop&&(this.w.clearInterval(this.checkTimerLoop),this.checkTimerLoop=0)),this.isTracking=!1},t.prototype.tracking=function(){return this.isTracking},t}(),w=function(){function t(t){this.w=t,this.d=t.document,this.domain=this.getTld(),this.setLocation(),this.setReferrer()}return t.prototype.onDOMReady=function(t){var e=this;if(/interactive|loaded|complete/.test(this.d.readyState))t();else var i=setInterval(function(){/interactive|loaded|complete/.test(e.d.readyState)&&(clearInterval(i),t())},10)},t.prototype.getDomain=function(){return this.domain},t.prototype.getHref=function(){return this.href},t.prototype.getHostname=function(){return this.hostname},t.prototype.getPathname=function(){return this.pathname},t.prototype.getLowercasePathNameWithSlashEnding=function(){var t=this.pathname;return t?"/"!==(t=t.toLowerCase())[t.length-1]&&(t+="/"):t="/",t},t.prototype.getLocation=function(t){var e={href:this.w.location.href,pathname:this.w.location.pathname};if(t){var i=this.w.document.createElement("a");i.href=t,e.href=i.href,e.pathname=i.pathname}return{currentValue:{href:this.href,pathname:this.pathname},newValue:e,hasChanged:this.pathname!==e.pathname}},t.prototype.setLocation=function(t){if(t){var e=this.w.document.createElement("a");e.href=t,this.href=e.href,this.hostname=e.hostname,this.pathname=e.pathname}else this.href=this.w.location.href,this.hostname=this.w.location.hostname,this.pathname=this.w.location.pathname},t.prototype.getReferrer=function(){return this.referrer},t.prototype.setReferrer=function(t){this.referrer=t||this.d.referrer},t.prototype.clearReferrer=function(){this.referrer=void 0},t.prototype.getTld=function(){var t=this.w.location.host,e=t.split(".");return"www"!==e[0]?t:e.slice(1).join(".")},t.prototype.getScrollTop=function(){return this.w.pageYOffset||0},t.prototype.getDocHeight=function(){this.d[g],this.d[h];return Math.max(this.d[h][s]||0,this.d[g][s]||0,this.d[h][r]||0,this.d[g][r]||0)},t.prototype.getViewportHeight=function(){return this.w.innerHeight||0},t.prototype.getVideoHTMLCollection=function(){return this.d[o](e)},t}(),k=function(){function t(t){this.w=t,this.elmIds={pbsTag:"pressboard-ad-sponsorship-tag",pbsMsg:"pressboard-ad-sponsorship-msg",pbsFooter:"pressboard-ad-sponsorship-footer"},this.d=t.document,this.appendedStyles=!1,this.appendedSponsorships={}}return t.prototype.appendStyles=function(){if(!this.appendedStyles){var t=this.d.createElement("style");t.type="text/css";var e="#"+this.elmIds.pbsTag+" { width: 100% !important; min-height: 35px !important; background-color: transparent !important; }#"+this.elmIds.pbsTag+":before, #"+this.elmIds.pbsTag+':after { content: " "; display: table !important; }#'+this.elmIds.pbsTag+" .pressboard-img-rounded { border-radius: 5px !important; }#"+this.elmIds.pbsTag+" a { display: inline !important; }#"+this.elmIds.pbsTag+" img { border: none !important; vertical-align: middle !important; page-break-inside: avoid; max-width: 100% !important; width: auto !important; display: inline !important; padding: 0 !important; }";t.appendChild(this.d.createTextNode(e)),this.d[o]("head")[0].appendChild(t),this.appendedStyles=!0}},t.prototype.appendSponsorship=function(e,t){if(e.sponsorship&&t&&!this.appendedSponsorships.hasOwnProperty(t)){var i=this.d.getElementById(this.elmIds.pbsTag+t),s=this.d.getElementById(this.elmIds.pbsMsg+t);if(i){var r=e.sponsorship.sponsoredByTitleText?e.sponsorship.sponsoredByTitleText:"FR"===e.sponsorship.language?"Présenté par":"Presented by";!e.sponsorship.sponsorSmallImageUrl||e.sponsorship.sponsorSmallImageUrl.length<1?i.innerHTML=r+' <a href="'+e.sponsorship.sponsorshipUrl+'" target="_blank" rel="nofollow">'+e.sponsorship.sponsoredBy+"</a>":i.innerHTML=r+' <a href="'+e.sponsorship.sponsorshipUrl+'" target="_blank" rel="nofollow"><img src="'+e.sponsorship.sponsorSmallImageUrl+'" style="height: 35px !important; min-height: 35px; max-height: 35px; min-width: auto !important;" /></a>'}if(s){var n=this.w.location.protocol+"//"+this.w.location.host,o=this.w.getComputedStyle?this.w.getComputedStyle(s,null).getPropertyValue("font-family"):"Arial",a=p+"/s/footer?media="+e.mediaId+"&ref="+encodeURIComponent(e.postUrl)+"&co="+encodeURIComponent(n)+"&font="+encodeURIComponent(o),h=this.d.createElement("iframe");h.setAttribute("src",a),h.setAttribute("id",this.elmIds.pbsFooter+t),h.setAttribute("width","100%"),h.setAttribute("frameborder","0"),h.setAttribute("scrolling","no"),h.setAttribute("allowtransparency","true"),this.w.addEventListener("message",function(t){h&&t.origin===p&&"pbsc"===t.data.sender&&t.data.id===e.storyRequestId&&(h.style.height=t.data.height+"px")},!1),s.appendChild(h)}this.appendedSponsorships[t]=!0}},t.prototype.getOffsetRect=function(t){if(!t||!t.getBoundingClientRect)return{t:0,l:0};var e=t.getBoundingClientRect(),i=this.w.pageYOffset||this.d[g][d]||this.d[h][d],s=this.w.pageXOffset||this.d[g][c]||this.d[h][c],r=this.d[g][l]||this.d[h][l]||0,n=this.d[g][m]||this.d[h][m]||0,o=e.top+i-r,a=e.left+s-n;return{t:Math.round(o),l:Math.round(a)}},t.prototype.getPbElmPos=function(t){var e=this.d.getElementById(this.elmIds.pbsFooter+t)||this.d.getElementById(this.elmIds.pbsMsg+t)||this.d.getElementById(this.elmIds.pbsFooter)||this.d.getElementById(this.elmIds.pbsMsg),i=this.getOffsetRect(this.d.getElementById(this.elmIds.pbsTag+t)||this.d.getElementById(this.elmIds.pbsTag)),s=this.getOffsetRect(e),r={t:s.t+(e?e.clientHeight:0),l:s.l};return{pbs:[i.t,i.l],pbm:[s.t,s.l],pbl:[r.t,r.l]}},t.prototype.randomizePbTags=function(t){var e=this.d.getElementById(this.elmIds.pbsTag),i=this.d.getElementById(this.elmIds.pbsMsg);e&&(e.id+=t),i&&(i.id+=t)},t}();(t=n||(n={}))[t.AdRoll=100]="AdRoll",t[t.Floodlight=101]="Floodlight",t[t.Facebook=102]="Facebook",t[t.Pixel=103]="Pixel",t[t.LinkedIn=104]="LinkedIn",t[t.Twitter=105]="Twitter",t[t.AdWords=106]="AdWords",t[t.Pinterest=107]="Pinterest",t[t.InPowered=108]="InPowered",t[t.StackAdapt=109]="StackAdapt",t[t.Outbrain=110]="Outbrain";var T=function(){function t(t){this.w=t,this.d=t.document,this.appendedTags={}}return t.prototype.rand=function(){return(1e13*Math.random()).toString()},t.prototype.prepareUrl=function(t){return t.replace("[timestamp]",this.rand()).replace(/\[rand\]/gi,this.rand()).replace("[hostname]",encodeURIComponent(this.w.location.hostname)).replace("[Page URL]",encodeURIComponent(this.w.location.href))},t.prototype.appendTags=function(t){if(t.tags)for(var e=0,i=t.tags;e<i.length;e++){var s=i[e],r=s.tagId.toString()+"_"+(s.values["pixel-id"]||s.values["advertiser-id"]||"url");if(!this.appendedTags.hasOwnProperty(r))switch(this.appendedTags[r]=!0,s.tagType){case n.AdRoll:this.setAdRollTag(s.values["advertiser-id"],s.values["pixel-id"]);break;case n.Floodlight:this.setIframe(s.values.url);break;case n.Facebook:this.setFbTag(s.values["pixel-id"]);break;case n.Pixel:this.setImg(s.values.url);break;case n.LinkedIn:this.setLinkedInTag(s.values["advertiser-id"]);break;case n.Twitter:this.setTwitterTag(s.values["advertiser-id"]);break;case n.AdWords:this.setAdWordsTag(s.values["advertiser-id"]);break;case n.Pinterest:this.setPinterestTag(s.values["pixel-id"]);break;case n.InPowered:this.setInPoweredTag(s.tagId.toString());break;case n.StackAdapt:this.setStackAdaptTag(s.values["pixel-id"]);break;case n.Outbrain:this.setOutbrainPixel(s.values["advertiser-id"])}}},t.prototype.setIframe=function(t){var e=this.d.createElement("iframe");e.src=this.prepareUrl(t),e.setAttribute("width","1"),e.setAttribute("height","1"),e.setAttribute("frameborder","0"),e.style.display="none",this.d.body.insertBefore(e,this.d.body.childNodes[0])},t.prototype.setImg=function(t){var e=this.d.createElement("img");e.src=this.prepareUrl(t),-1<t.indexOf("ad.doubleclick.net")&&e.setAttribute("alt","Advertisement"),e.setAttribute("width","1"),e.setAttribute("height","1"),e.setAttribute("border","0"),e.style.display="none",this.d.body.insertBefore(e,this.d.body.childNodes[0])},t.prototype.setAdRollTag=function(t,e){if(!this.w.adroll_adv_id){this.w.adroll_adv_id=t,this.w.adroll_pix_id=e;var i=this.d.createElement("script"),s="https:"==document.location.protocol?"https://s.adroll.com":"http://a.adroll.com";i.setAttribute("async","true"),i.type="text/javascript",i.src=s+"/j/roundtrip.js",this.d.body.appendChild(i)}},t.prototype.setFbTag=function(t){var e,i,s,r,n;e=this.w,i=this.d,e.fbq||(s=e.fbq=function(){s.callMethod?s.callMethod.apply(s,arguments):s.queue.push(arguments)},e._fbq||(e._fbq=s),(s.push=s).loaded=!0,s.version="2.0",s.queue=[],(r=i.createElement("script")).async=!0,r.src="https://connect.facebook.net/en_US/fbevents.js",(n=i.getElementsByTagName("script")[0]).parentNode.insertBefore(r,n)),this.w.fbq("init",t),this.w.fbq("track","PageView")},t.prototype.setTwitterTag=function(t){var e,i,s,r,n;e=this.w,i=this.d,e.twq||((s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments)}).version="1.1",s.queue=[],(r=i.createElement("script")).async=!0,r.src="//static.ads-twitter.com/uwt.js",(n=i.getElementsByTagName("script")[0]).parentNode.insertBefore(r,n)),this.w.twq("init",t),this.w.twq("track","PageView")},t.prototype.setAdWordsTag=function(t){var e=this.d.createElement("script");e.type="text/javascript",e.src="https://www.googletagmanager.com/gtag/js?id="+t,this.d.body.appendChild(e),this.w.dataLayer=this.w.dataLayer||[],this.w.gtag("js",new Date),this.w.gtag("config",t)},t.prototype.setStackAdaptTag=function(t){var e,i,s,r,n;e=this.w,i=this.d,e.saq||(s=e.saq=function(){s.callMethod?s.callMethod.apply(s,arguments):s.queue.push(arguments)},e._saq||(e._saq=s),(s.push=s).loaded=!0,s.version="1.0",s.queue=[],(r=i.createElement("script")).async=0,r.src="https://tags.srv.stackadapt.com/events.js",(n=i.getElementsByTagName("script")[0]).parentNode.insertBefore(r,n)),this.w.saq("ts",t)},t.prototype.setInPoweredTag=function(t){this.w._inpwd_scpt_id||(this.w._inpwd_scpt_id=t,function(){var t=this.d.getElementsByTagName("script")[0],e=this.d.createElement("script");e.type="text/javascript",e.src="https://cdn.inpwrd.net/track/1.0.0/bundle.min.js",t.parentNode.insertBefore(e,t)}())},t.prototype.setLinkedInTag=function(t){this.w._linkedin_data_partner_id||(this.w._linkedin_data_partner_id=t,function(){var t=this.d.getElementsByTagName("script")[0],e=this.d.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://snap.licdn.com/li.lms-analytics/insight.min.js",t.parentNode.insertBefore(e,t)}(),this.setImg("https://dc.ads.linkedin.com/collect/?pid="+t+"&fmt=gif"))},t.prototype.setPinterestTag=function(t){!function(t){if(!this.w.pintrk){this.w.pintrk=function(){this.w.pintrk.queue.push(Array.prototype.slice.call(arguments))};var e=this.w.pintrk;e.queue=[],e.version="3.0";var i=document.createElement("script");i.async=!0,i.src="https://s.pinimg.com/ct/core.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(i,s)}}(),this.w.pintrk("load",t),this.w.pintrk("page");var e=this.d.createElement("img");e.setAttribute("width","1"),e.setAttribute("height","1"),e.setAttribute("alt",""),e.setAttribute("border","0"),e.style.display="none",e.src="https://ct.pinterest.com/v3/?tid="+t+"&noscript=1",this.d.body.insertBefore(e,this.d.body.childNodes[0])},t.prototype.setOutbrainPixel=function(a){!function(t,e){var i=a;if(t.obApi){var s=function(t){return"[object Array]"===Object.prototype.toString.call(t)?t:[t]};t.obApi.marketerId=s(t.obApi.marketerId).concat(s(i))}else{var r=t.obApi=function(){r.dispatch?r.dispatch.apply(r,arguments):r.queue.push(arguments)};r.version="1.1",r.loaded=!0,r.marketerId=i,r.queue=[];var n=e.createElement("script");n.async=!0,n.src="//amplify.outbrain.com/cp/obtp.js",n.type="text/javascript";var o=e.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o)}}(this.w,this.d),this.w.obApi("track","PAGE_VIEW")},t}(),S=function(){function t(t){this.w=t,this.d=t.document}return t.prototype.appendLinks=function(t,e){if(t.linkIds){var i=this.d.querySelectorAll("a[href^='https://adserver.pressboard.ca/c/']");if(i&&i.length)for(var s=0,r=i.length;s<r;s++)for(var n=0,o=t.linkIds;n<o.length;n++){var a=o[n];this.checkLink(i[s],t,a.toString(),e)}var h=this.d.querySelectorAll("a[href^='https://sr.studiostack.com/c/']");if(h&&h.length)for(s=0,r=h.length;s<r;s++)for(var p=0,d=t.linkIds;p<d.length;p++){a=d[p];this.checkLink(h[s],t,a.toString(),e)}}},t.prototype.checkLink=function(t,e,i,s){-1<t.href.indexOf("l="+i)&&(-1===t.href.indexOf("ref=")&&(t.href+="&ref="+encodeURIComponent(s)),-1===t.href.indexOf("s=")&&0<e.storyRequestId&&(t.href+="&s="+e.storyRequestId))},t}(),I=function(){function t(t){this.w=t,this.page=new w(t),this.tagm=new T(t),this.lnkm=new S(t),this.spon=new k(t),this.urlChangeTracker=new f(t),this.storiedEventSender=new v,this.customEventSender=new y,this.mIds={},this.strs={},this.currentStr=void 0,this.procId=(new Date).getTime().toString(),this.sessId=this.getCookie("__psid")?this.getCookie("__psid"):this.procId}return t.prototype.getCookie=function(t){for(var e=t+"=",i=this.w.document.cookie.split(";"),s=0;s<i.length;s++){for(var r=i[s];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(e))return r.substring(e.length,r.length)}return null},t.prototype.setCookie=function(t,e,i,s,r,n){var o=new Date;o.setTime(o.getTime()+i),this.w.document.cookie=t+"="+encodeURI(e)+"; SameSite=Lax"+(i?"; expires="+o.toUTCString():"")+(s?"; path="+s:"")+(r?"; domain="+r:"")+(n&&!0===n?"; secure":"")},t.prototype.processInit=function(t){t=t.trim(),!isNaN(+t)&&0<+t&&(this.mIds[t]=!0)},t.prototype.processSetAutotrack=function(t){var e=this;t?this.urlChangeTracker.start(function(){e.page.getLocation().hasChanged&&e.processSetStory()}):this.urlChangeTracker.stop()},t.prototype.processSendStoriedEvent=function(t){if(Object.keys(this.mIds).length&&t){for(var e in t.pb_visitor_id=u,t.pb_media_ids=[],this.mIds)t.pb_media_ids.push(+e);var i=this;setTimeout(function(){i.storiedEventSender.sendEvent(t)},0)}},t.prototype.processSetStory=function(t,e){if(Object.keys(this.mIds).length){t&&(0!==t.indexOf("https://")&&0!==t.indexOf("http://")||-1===t.indexOf("."))&&(t=void 0),""!==e&&e&&(0!==e.indexOf("https://")&&0!==e.indexOf("http://")||-1===e.indexOf("."))&&(e=void 0);var i=this.page.getLocation(t),r=void 0;if(i.hasChanged){console.log("location changed",i);var s=this.strs[i.currentValue.pathname];s&&(s.tracker&&s.tracker.tracking()&&s.tracker.stop(),this.page.setReferrer(i.currentValue.href)),this.page.setLocation(t),r=this.strs[i.newValue.pathname]||{mediaConfigs:{},sKey:i.newValue.pathname,tis:"_"+(+new Date).toString(),referrer:""===e?"":e||this.page.getReferrer()}}else console.log("location unchanged",i),r=this.strs[i.currentValue.pathname]||{mediaConfigs:{},sKey:i.currentValue.pathname,tis:"_"+(+new Date).toString(),referrer:""===e?"":e||this.page.getReferrer()};for(var n in this.mIds)r.mediaConfigs.hasOwnProperty(n)||(r.mediaConfigs[n]={urlPath:this.page.getLowercasePathNameWithSlashEnding(),mid:+n,geoid:0,cn:void 0,ct:void 0,rg:void 0,pending:!0});r.tracker&&r.tracker.tracking()||(r.tracker=r.tracker||new b(this.w,this.procId,this.sessId,r,this.page,this.spon),r.tracker.start());var o=this;this.page.onDOMReady(function(){o.spon.randomizePbTags(r.tis)});var a=function(e){var i=o.page.getHref(),t=p+"/track/attention-data?media="+e+"&ref="+encodeURIComponent(i),s=r.mediaConfigs[e];s.pending&&(s.pending=!1,setTimeout(function(){o.loadCfg(t,function(t){t.post&&(r.tracker.setIntervalTime(2e3),o.loadAssets(i,r.tis,t.post)),r.mediaConfigs[e]=t})},0))};for(var n in r.mediaConfigs)a(n);this.strs[r.sKey]=r,this.currentStr=r}},t.prototype.processActivateCerosUniversalAnalytics=function(){var e=this;this.w.document.body.addEventListener("ceros-analytics-event",function(t){t.detail&&t.detail.eventType&&e.processSendCustomEvent({source:"ceros",category:"ceros-ua-event",action:t.detail.eventType,label:t.detail.componentName||t.detail.experienceName||t.detail.pageName,object:{eventType:t.detail.eventType,componentName:t.detail.componentName,experienceName:t.detail.experienceName,pageName:t.detail.pageName,pageNum:t.detail.pageNum,sdkTags:t.detail.sdkTags,formId:t.detail.formId,formName:t.detail.formName,lightboxUrl:t.detail.lightboxUrl,url:t.detail.url,page:t.detail.page,videoProgressPct:t.detail.videoProgressPct,videoPosition:t.detail.videoPosition,videoPlayTime:t.detail.videoPlayTime}})})},t.prototype.processSendCustomEvent=function(t){if(Object.keys(this.mIds).length&&this.currentStr&&this.currentStr.tracker&&t){var e="",i="",s="";for(var r in this.currentStr.mediaConfigs)e=this.currentStr.mediaConfigs[r].cn||e,i=this.currentStr.mediaConfigs[r].rg||i,s=this.currentStr.mediaConfigs[r].ct||s;var n={mediaIds:[],visitorId:u,viewId:this.currentStr.tracker.getViewId(),sessionId:this.sessId,pageUrl:this.page.getHref(),eventId:(new Date).getTime().toString(),action:t.action,category:t.category,label:t.label,source:t.source||"custom",referrer:this.currentStr.referrer||"",country:e,region:i,city:s,objectJsonString:JSON.stringify(t.object||{})};for(var r in this.mIds)n.mediaIds.push(+r);var o=this;setTimeout(function(){o.customEventSender.sendEvent(n)},0)}},t.prototype.loadAssets=function(t,e,i){var s=this;i.tags&&this.tagm.appendTags(i),i.linkIds&&this.page.onDOMReady(function(){s.lnkm.appendLinks(i,t)}),i.sponsorship&&(this.spon.appendStyles(),this.page.onDOMReady(function(){s.spon.appendSponsorship(i,e)}))},t.prototype.loadCfg=function(t,e){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===i.readyState&&200===i.status){var t=void 0;try{t=JSON.parse(i.responseText)}catch(t){}e(t)}},i.open("GET",t,!0),i.send()},t}();(function(){if(i.pbq&&i.addEventListener){var e=void 0;try{e=i.self!==i.parent&&i.parent.location.pathname?i.parent:i}catch(t){e=i}var r=e.pbProcessor=e.pbProcessor||new I(e);i.pbq.exe=function(){var t,e=Array.prototype.slice.call(arguments),i=e[0],s=e.slice(1);switch(i){case"init":t=r.processInit;break;case"set":"autotrack"===s[0]&&(t=r.processSetAutotrack),"story"===s[0]&&(t=r.processSetStory),s=s.slice(1);break;case"send":"storied-event"===s[0]&&(t=r.processSendStoriedEvent),"event"===s[0]&&(t=r.processSendCustomEvent),s=s.slice(1);break;case"activate":"ceros-universal-analytics"===s[0]&&(t=r.processActivateCerosUniversalAnalytics),s=s.slice(1)}"function"==typeof t&&t.apply(r,s)};for(var t=0;t<i.pbq.queue.length;t++)i.pbq.exe.apply(void 0,i.pbq.queue[t])}})()}(window);