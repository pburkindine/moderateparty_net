/* HouseHold ImplementationValidator LegacyLayer SignalsAbs SignalsAutoInsertion SignalsBsc SignalsIds SignalsTvp SignalsVlp */
(()=>{var Ye=Object.defineProperty,Ht=Object.defineProperties,Xt=Object.getOwnPropertyDescriptor,Jt=Object.getOwnPropertyDescriptors;var ht=Object.getOwnPropertySymbols;var Zt=Object.prototype.hasOwnProperty,er=Object.prototype.propertyIsEnumerable;var Ke=(n,e,t)=>e in n?Ye(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,O=(n,e)=>{for(var t in e||(e={}))Zt.call(e,t)&&Ke(n,t,e[t]);if(ht)for(var t of ht(e))er.call(e,t)&&Ke(n,t,e[t]);return n},be=(n,e)=>Ht(n,Jt(e)),i=(n,e)=>Ye(n,"name",{value:e,configurable:!0});var a=(n,e,t,r)=>{for(var o=r>1?void 0:r?Xt(e,t):e,s=n.length-1,d;s>=0;s--)(d=n[s])&&(o=(r?d(e,t,o):d(o))||o);return r&&o&&Ye(e,t,o),o};var l=(n,e,t)=>Ke(n,typeof e!="symbol"?e+"":e,t);var v=(n,e,t)=>new Promise((r,o)=>{var s=f=>{try{g(t.next(f))}catch(S){o(S)}},d=f=>{try{g(t.throw(f))}catch(S){o(S)}},g=f=>f.done?r(f.value):Promise.resolve(f.value).then(s,d);g((t=t.apply(n,e)).next())});var u={"10518929":{adServerId:5217,customTracking:{c1:{type:"targeting",key:"adunitname"},c2:{type:"targeting",key:"pos"},c3:{type:"targeting",key:"site"},c4:{type:"targeting",key:"expected_bot_traffic"},c5:{type:"targeting",key:"refresh"},c6:{type:"targeting",key:"_plc"},c7:{type:"targeting",key:"pagetype"}}}};var C=[];for(let n=0;n<256;++n)C.push((n+256).toString(16).slice(1));function vt(n,e=0){return(C[n[e+0]]+C[n[e+1]]+C[n[e+2]]+C[n[e+3]]+"-"+C[n[e+4]]+C[n[e+5]]+"-"+C[n[e+6]]+C[n[e+7]]+"-"+C[n[e+8]]+C[n[e+9]]+"-"+C[n[e+10]]+C[n[e+11]]+C[n[e+12]]+C[n[e+13]]+C[n[e+14]]+C[n[e+15]]).toLowerCase()}i(vt,"unsafeStringify");var We,rr=new Uint8Array(16);function He(){if(!We){if(typeof crypto=="undefined"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");We=crypto.getRandomValues.bind(crypto)}return We(rr)}i(He,"rng");var nr=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Xe={randomUUID:nr};function or(n,e,t){var o,s,d;if(Xe.randomUUID&&!e&&!n)return Xe.randomUUID();n=n||{};let r=(d=(s=n.random)!=null?s:(o=n.rng)==null?void 0:o.call(n))!=null?d:He();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){if(t=t||0,t<0||t+16>e.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let g=0;g<16;++g)e[t+g]=r[g];return e}return vt(r)}i(or,"v4");var Je=or;var Q=i(()=>Je(),"uuid");var ve=i((n,e)=>(...t)=>{try{let r=n(...t);return r instanceof Promise?r.then(o=>o,o=>e(o,...t)):r}catch(r){return e(r,...t)}},"withErrorHandler");var Se,ye,Te,j=class j{constructor(e,t){l(this,"collections",new Set);l(this,"children",new j.Set);l(this,"beforeDestroyed");this.beforeDestroyed=t!=null?t:()=>{};for(let[r,o]of Object.entries(e))Object.defineProperty(this,r,{value:o});e.parent!=null&&(e.parent.destroyed?this.destroy():e.parent.children.add(this))}static Create(e,t){return new j(e,t)}static CreateRoot(e,t){return new j(e,t)}destroy(){if(this.beforeDestroyed!=null){try{this.beforeDestroyed(this)}catch(e){}for(let e of this.children)e.destroy();this.beforeDestroyed=void 0;for(let e of this.collections)e.delete(this)}return this}get destroyed(){return this.beforeDestroyed==null}};i(j,"EntityClass"),l(j,"Set",(Se=class extends Set{add(t){return t.destroyed||(t.collections.add(this),super.add(t)),this}delete(t){return t.collections.delete(this),super.delete(t)}clear(){for(let t of this.values())t.collections.delete(this);super.clear()}peek(){return this.values().next().value}conjure(t){let r=this.peek();return r==null&&(r=t(),this.add(r)),r}},i(Se,"EntitySet"),Se)),l(j,"Map",(ye=class extends Map{set(t,r){return t.destroyed||(t.collections.add(this),super.set(t,r)),this}delete(t){return t.collections.delete(this),super.delete(t)}clear(){for(let t of this.keys())t.collections.delete(this);return super.clear()}summon(t,r){let o=super.get(t);return o==null&&(o=r,this.set(t,o)),o}conjure(t,r){let o=super.get(t);return o==null&&(o=r(),this.set(t,o)),o}},i(ye,"EntityMap"),ye)),l(j,"Link",(Te=class extends j.Map{get(t){return super.conjure(t,()=>new j.Set)}},i(Te,"EntityLink"),Te));var ue=j,y;(s=>(s.Set=ue.Set,s.Map=ue.Map,s.Link=ue.Link,s.Create=ue.Create,s.CreateRoot=ue.CreateRoot))(y||(y={}));var Me=class Me{constructor(e,t,r){l(this,"_message","unknown");l(this,"_trace",[]);l(this,"_silenced",!1);if(e instanceof Me)return e.addToTrace(r,t);typeof e=="object"&&e!=null&&"message"in e&&typeof e.message=="string"?this._message=e.message:this._message=`${e}`,this.addToTrace(r,t)}get message(){return this._message}get trace(){return this._trace}get silenced(){return this._silenced}silence(){return this._silenced=!0,this}addToTrace(e,t){return this._trace.unshift(e),this.maybeCompleteTrace(t),this}maybeCompleteTrace(e){return v(this,null,function*(){let t=this._trace.length;yield Promise.resolve(),yield Promise.resolve(),yield Promise.resolve(),!this.silenced&&t===this._trace.length&&e(this)})}};i(Me,"TracedError");var we=Me;var Ze=class Ze{constructor(e){l(this,"moduleInstances",new Map);l(this,"methodsToExecute",[]);l(this,"errorHandlers",[]);l(this,"activeSession",null);l(this,"executedMethodIndex",0);this.initializeModules(e)}initializeModules(e){let t=e.map(r=>this.createModule(r));for(let r of t)this.applyModuleDecoration(r),this.applyExecuteDecoration(r),this.applyPluginDecoration(r),this.applyErrorDecoration(r),this.applyCatchErrorDecoration(r)}get session(){if(this.activeSession==null)throw new Error("Core has no active session");return this.activeSession}inject(e){let t=this.modules,r=[];for(let o of e){let s=t[o.name];s==null?r.push(o):this.moduleInstances.set(o,s)}this.initializeModules(r),console.log("Injected new modules:",r.map(o=>o.name)),this.execute()}get(e){return this.getModule(e)}execute(){this.activeSession==null&&(this.activeSession=y.CreateRoot({id:Q()}));for(let e of this.methodsToExecute.slice(this.executedMethodIndex))e();this.executedMethodIndex=this.methodsToExecute.length}reset(){this.activeSession!=null&&(this.activeSession.destroy(),this.activeSession=null,this.executedMethodIndex=0)}get modules(){let e={};for(let[t,r]of this.moduleInstances)e[t.name]=r;return e}getModule(e){let t=this.moduleInstances.get(e);if(t==null)throw new Error(`module not in core: ${e.name}`);return t}createModule(e){if(e.prototype.moduleConfig==null)throw new Error(`not a module: ${e.name}`);let t=new e;return t.core=this,this.moduleInstances.set(e,t),t}applyModuleDecoration(e){var r;let t=e.constructor.prototype.moduleConfig;for(let{method:o}of t)e[o]=ve(e[o].bind(e),(s,...d)=>{throw this.traceError(s,`${e.constructor.name}.${o}(${d.map(g=>typeof g).join(",")})`)});(r=e.plugins)!=null||(e.plugins={}),e.pluginFunctions={};for(let o of Object.keys(e.plugins))e.pluginFunctions[o]=[],e.plugins[o]=(...s)=>{let d=[];for(let g of e.pluginFunctions[o])g(d,...s);return d}}applyExecuteDecoration(e){var r;let t=(r=e.constructor.prototype.executeConfig)!=null?r:[];for(let{method:o}of t)this.methodsToExecute.push(ve(e[o],s=>{this.traceError(s,"@execute")}))}applyPluginDecoration(e){var r;let t=(r=e.constructor.prototype.pluginConfig)!=null?r:[];for(let{PluggableClass:o,category:s,method:d}of t)this.getModule(o).pluginFunctions[s].push(ve((g,...f)=>{g.push(e[d](...f))},g=>{this.traceError(g,`@plugin(${o.name},'${s}')`)}))}applyErrorDecoration(e){var r;let t=(r=e.constructor.prototype.errorConfig)!=null?r:[];for(let{method:o}of t)this.errorHandlers.push(ve(e[o],s=>{s instanceof we&&s.silence()}))}applyCatchErrorDecoration(e){var r;let t=(r=e.constructor.prototype.catchErrorConfig)!=null?r:[];for(let{method:o}of t)e[o]=ve(e[o],s=>{this.traceError(s,"@catchError")})}traceError(e,t){return new we(e,r=>this.reportError(r),t)}reportError(e){for(let t of this.errorHandlers)t(e.message,[...e.trace])}};i(Ze,"Core");var Pe=Ze;var et=[],Ue=et;var p=i(n=>{let e=n.prototype,t=Object.getOwnPropertyNames(e).filter(r=>{var o;return r!=="constructor"&&((o=Object.getOwnPropertyDescriptor(e,r))==null?void 0:o.value)instanceof Function});e.moduleConfig=t.map(r=>({method:r})),et.push(n)},"moduleClass"),I=i(n=>e=>{},"attachModule"),_=i((n,e)=>{var t;n.executeConfig=(t=n.executeConfig)!=null?t:[],n.executeConfig.push({method:e})},"executeMethod"),m=i((n,e)=>(t,r)=>{var o;t.pluginConfig=(o=t.pluginConfig)!=null?o:[],t.pluginConfig.push({PluggableClass:n,category:e,method:r})},"pluginMethod"),Ce=i((n,e)=>{var t;n.catchErrorConfig=(t=n.catchErrorConfig)!=null?t:[],n.catchErrorConfig.push({method:e})},"catchErrorMethod"),tt=i((n,e)=>{var t;n.errorConfig=(t=n.errorConfig)!=null?t:[],n.errorConfig.push({method:e})},"errorMethod");var De=["BSC","ABS","CCT","CBS"],rt=["IDS"],xe=["VLP","TVP"],ir=[...De,...rt,...xe],eo=[...De,...rt,...xe].filter(n=>n!=="CCT"),St=i(n=>ir.includes(n.toUpperCase()),"isSignal"),yt=i(n=>xe.includes(n.toUpperCase()),"isSlotSignal"),Tt=i(n=>rt.includes(n.toUpperCase()),"isUserSignal"),Et=i(n=>De.includes(n.toUpperCase()),"isPageSignal");var T=class{constructor(){l(this,"plugins",{slotDiscovered:i((e,t)=>[],"slotDiscovered")});l(this,"slots",new y.Set)}getSlot(e,t){for(let r of this.slots)if(r.adServer===e&&r.elementId===t)return r}getSlots(e){let t=[...this.slots];return e==null?t:t.filter(r=>r.adServer===e)}createSlot(e,t,r,o,s){let d=this.getSlot(e,r);d!=null&&d.destroy();let g=y.Create({parent:this.core.session,adServer:e,elementId:r,adUnit:o,uuid:Q(),creationTime:Date.now()});return this.slots.add(g),s==null||s(g),this.plugins.slotDiscovered(g,t),g}};i(T,"SlotStore"),T=a([p],T);var ee=i((...n)=>{let e=[];for(let t of n)if(t!=null)for(let r of t)e.includes(r)||e.push(r);return e},"mergeUnique");var A=class{constructor(){l(this,"plugins",{getAdServerTargeting:i((e,t)=>[],"getAdServerTargeting"),setAdServerTargeting:i((e,t,r)=>[],"setAdServerTargeting")});l(this,"globalTargeting",{});l(this,"slotTargeting",new y.Map)}_getSlotTargeting(e){return this.slotTargeting.summon(e,{})}_getTargetingKeys(e){return ee(Object.keys(this.globalTargeting),Object.keys(this._getSlotTargeting(e)))}_getTargetingValues(e,t){return ee(this.globalTargeting[t],this._getSlotTargeting(e)[t])}getTargeting(e){let t={};if(e==null)for(let r of Object.keys(this.globalTargeting))t[r]=[...this.globalTargeting[r]];else for(let r of this._getTargetingKeys(e))t[r]=this._getTargetingValues(e,r);return t}setSlotTargeting(e,t,r=!1){var d;let o=Object.keys(t),s=this._getSlotTargeting(e);for(let g of o)s[g]=ee(t[g],r?(d=this.slotTargeting.get(e))==null?void 0:d[g]:null);this.setAdServerTargeting(e,o)}setGlobalTargeting(e,t=!1){let r=Object.keys(e);for(let o of r)this.globalTargeting[o]=ee(e[o],t?this.globalTargeting[o]:null);for(let o of this.core.get(T).getSlots())this.setAdServerTargeting(o,r)}getAdServerTargeting(e,t){var r;return(r=this.plugins.getAdServerTargeting(e,t).find(o=>o.length!==0))!=null?r:[]}setAdServerTargeting(e,t){t==null&&(t=this._getTargetingKeys(e));for(let r of t)this.plugins.setAdServerTargeting(e,r,this._getTargetingValues(e,r))}_onSlotDiscovered(e){this.setAdServerTargeting(e)}};i(A,"TargetingHub"),a([m(T,"slotDiscovered")],A.prototype,"_onSlotDiscovered",1),A=a([p],A);var sr=[[/((\?)|&)(?:amp_lite|fr=operanews)/g,"$2"],[/(^https?:\/\/)(www\.)/g,"$1"],[/(((\?)|&|%3F|%26|;)(?:utm_campaign|utm_source|utm_content|utm_term|utm_viral|utm_medium|utm_identifier|utm_key|fb_source|referrer|referer|ref|rand|rnd|randid|\.?rand|\.?partner|cb|count|adid|session|sessionid|session_redirect|param\d|userinfo|uid|refresh|ocid|ncid|clickenc|fbclid|amp_js_v|amp_gsa|ns_source|ns_campaign|ns_mchanel|ns_mchannel|ns_linkname|ns_fee|src|ex_cid|usqp|source|xid|trkid|utm_social-type|mbid|utm_brand|__twitter_impression|utm_referrer|CMP|cmp|_cmp|cq_cmp)=[^&]*)/g,"$3"],[/[/.]amp(?:\/[?&]*)?$/g,""],[/((\?)|&)(?:outputType|isFollow|suppressMediaBar|cid|ICID|icid|bdk|wtu_id_h|utm_placement|intcmp|_native_ads|traffic_source|entry|\.tsrc|autoplay|autostart|dc_data|influencer|pubdate|utm_hp_ref|redirect|service|refresh_ce|refresh_cens|xcmg|target_id|_amp)=[^&]*/g,"$2"],[/(\?|&)(?:amp)(?:&|$|=[^&]*)/g,"$1"]],ar=[[/(?:\/|\/\?|\?|&|\/\$0|#[\s\S]*)+$/g,""],[/(?:\/|\/\?|\?|&|\/\$0|#[\s\S]*)+$/g,""]],Rt=i((n,e)=>{for(let[t,r]of n)e=e.replace(t,r);return e},"replaceByRules"),At=i(n=>{let e=Rt(sr,n);return Rt(ar,e)},"normalizeUrl");var _t=i(n=>n.split("?",1)[0].split("#",1)[0],"stripUrlQuery");var h=class{constructor(){l(this,"timeFunction",new y.Map)}window(){return window}document(){return this.window().document}pageUrl(){var e,t;return(t=(e=this.window().location)==null?void 0:e.href)!=null?t:""}hostname(){return new URL(this.pageUrl()).hostname}time(){return this.timeFunction.conjure(this.core.session,()=>{let e=this.window(),t=!1;try{t=typeof e.performance.now()=="number"}catch(r){}return t?()=>Math.floor(e.performance.now()):()=>e.Date.now()})()}sendBeacon(e){try{let t=this.window().navigator;typeof(t==null?void 0:t.sendBeacon)=="function"?t.sendBeacon(e):new Image().src=e}catch(t){}}};i(h,"Env"),h=a([p],h);var bt=i((n,e)=>{try{let t=new URLSearchParams(n),r=t.get("ctx"),o=t.get("cmp");if(r!=null&&o!=null)return{ctx:r,cmp:o,prefetch:e,legacy:!0}}catch(t){}return null},"parseInfo"),wt=i(n=>{var e;return n.pathname!=="/signals/pub.js"?null:(e=bt(n.search,!0))!=null?e:bt(n.hash.substring(1).split("?")[0],!1)},"parseLegacyPagetagUrl");var lr=1e3,dr=/^\/dvtag\/([^/]+)\/([^/]+)\/pub\.js$/,b=class{constructor(){l(this,"visit");l(this,"tagInfo");l(this,"plugins",{newVisit:i(e=>[],"newVisit"),overrideTagInfo:i(e=>[],"overrideTagInfo")});l(this,"_normalizeUrl",At)}_initialize(){this.getTagInfo(),this.updateVisit(!1),this.plugins.newVisit(this.visit),this._installNavigationListener()}getTagInfo(){var e;if(this.tagInfo==null){try{this.tagInfo=this._parseTagInfo()}catch(r){}(e=this.tagInfo)!=null||(this.tagInfo={ctx:"unknown",cmp:"unknown"});let t=this.plugins.overrideTagInfo(this.tagInfo);t.length>0&&(this.tagInfo=O(O({},this.tagInfo),t[0]))}return this.tagInfo}_parseTagInfo(){let e=this.getCurrentScriptSrc();if(e==null)return null;let t=new URL(e,"https://pub.doubleverify.com"),r=t.pathname,o=dr.exec(r);if(o!=null){let[,s,d]=o;return{ctx:s,cmp:d}}return wt(t)}getCurrentScriptSrc(){var e,t;return(t=(e=this.core.get(h).window().document.currentScript)==null?void 0:e.getAttribute("src"))!=null?t:null}getCurrentScriptBaseUrl(){let e=this.getCurrentScriptSrc();if(e==null)return null;try{let{origin:t,pathname:r}=new URL(e),o=r.split("/").slice(0,-1).join("/");return`${t}${o}/`}catch(t){return null}}updateVisit(e=!0){var r,o;let t=this.getStrippedPageUrl();if(this.visit==null||this.visit.strippedUrl!==t){let s=Q();this.visit={strippedUrl:t,normalizedUrl:this._normalizeUrl(this.core.get(h).window().location.href),uuid:s,sessionUuid:(o=(r=this.visit)==null?void 0:r.sessionUuid)!=null?o:s},e&&this.plugins.newVisit(this.visit)}return this.visit}getVisit(){var e;return(e=this.visit)!=null?e:this.updateVisit(!1)}getStrippedPageUrl(){return _t(this.core.get(h).window().location.href)}getNormalizedPageUrl(){return this.getVisit().normalizedUrl}getVisitUuid(){return this.getVisit().uuid}getSessionUuid(){return this.getVisit().sessionUuid}_installNavigationListener(){var r;let e=this.core.get(h).window(),t=i(()=>this.updateVisit(!0),"cb");((r=e.navigation)==null?void 0:r.addEventListener)!=null?e.navigation.addEventListener("navigatesuccess",t):setInterval(t,lr)}};i(b,"Context"),a([_],b.prototype,"_initialize",1),b=a([p],b);var ce=i(()=>(...n)=>[],"apiPlugin"),D=class{constructor(){l(this,"plugins",{queueAdRequest:ce(),defineSlot:ce(),adRendered:ce(),adRemoved:ce(),getTargeting:ce(),addEventListener:i((e,t)=>[],"addEventListener"),removeEventListener:i((e,t)=>[],"removeEventListener"),toggleDebugMode:ce(),_debugScriptLoaded:ce()})}_initialize(){var r;let e=this.core.get(h).window(),t=(r=e.dvtag)!=null?r:{};e.dvtag=t,t.queueAdRequest=this.queueAdRequest,t.defineSlot=this.defineSlot,t.adRendered=this.adRendered,t.adRemoved=this.adRemoved,t.getTargeting=this.getTargeting,t.addEventListener=this.addEventListener,t.removeEventListener=this.removeEventListener,t.toggleDebugMode=this.toggleDebugMode,t._debugScriptLoaded=this._debugScriptLoaded}queueAdRequest(...e){this.plugins.queueAdRequest(...e)}defineSlot(...e){this.plugins.defineSlot(...e)}adRendered(...e){this.plugins.adRendered(...e)}adRemoved(...e){this.plugins.adRemoved(...e)}getTargeting(...e){var t;return(t=this.plugins.getTargeting(...e)[0])!=null?t:{}}addEventListener(e,t){this.plugins.addEventListener(e,t)}removeEventListener(e,t){this.plugins.removeEventListener(e,t)}toggleDebugMode(...e){this.plugins.toggleDebugMode(...e)}_debugScriptLoaded(...e){this.plugins._debugScriptLoaded(...e)}};i(D,"Api"),a([_],D.prototype,"_initialize",1),D=a([p],D);var nt=class nt{constructor(){l(this,"pending",[]);l(this,"flushing",!1)}push(e){this.pending.push(e),this.flush()}flush(){return v(this,null,function*(){var t;if(this.flushing)return;this.flushing=!0;let e=this.pending.shift();for(;e!=null;){try{yield e.promise}catch(r){}try{(t=e.callback)==null||t.call(e)}catch(r){}e=this.pending.shift()}this.flushing=!1})}};i(nt,"AsyncQueue");var qe=nt;var E=class{constructor(){l(this,"plugins",{adRequestQueued:i(e=>[],"adRequestQueued"),adRequestTimedOut:i(e=>[],"adRequestTimedOut"),adRequestBeforeRelease:i(e=>[],"adRequestBeforeRelease"),adRequestCompleted:i(e=>[],"adRequestCompleted")});l(this,"queue",new qe);l(this,"adRequestCounter",0)}_queueAdRequest(e={}){var s,d;let t={index:this.adRequestCounter++,status:"queued",timeoutValue:(s=e.timeout)!=null?s:0,onDvtagReadyCalled:(d=e.timestamp)!=null?d:0,waitingStarted:new Date().getTime(),internal:e.internal};this.core.get(b).updateVisit(),this.plugins.adRequestQueued(t);let r=e.callback;r===void 0?e.callback=()=>{}:r===null?t.status="tag-timeout":e.callback=()=>{t.status="queue-timeout",t.callbackCalled=new Date().getTime(),e.callback=null,this.plugins.adRequestTimedOut(t);try{r()}catch(g){}};let o=i(()=>{if(e.callback!=null){e.callback=null,t.status="success",t.callbackCalled=new Date().getTime(),this.plugins.adRequestBeforeRelease(t);try{r==null||r()}catch(g){}}else this.plugins.adRequestBeforeRelease(t);t.waitingEnded=new Date().getTime(),this.plugins.adRequestCompleted(t)},"onAsyncOperationsCompleted");this.queue.push({callback:o,adRequest:t})}delayAdRequests(e){this.queue.push({promise:e})}};i(E,"AdRequestQueue"),a([m(D,"queueAdRequest")],E.prototype,"_queueAdRequest",1),E=a([p],E);var z=class{getShortCommitId(){return"446355b"}getBuildTimestamp(){return 1760767233717}getAuthToken(){return"PqK9ZMFDqwE4H8lIFVBMLOLETD7XwpUJIQqvSXKoJonw796QEcqwJ6TfBM0g+EROJRwYF1gav7Rf+55JbL5OxeaBeHS2Y1AVIeALZ5unAxdjLf0ga54XXoC5p4SfperluLD127ZvB73ZfmXponRiuCGvIiUG5v4="}};i(z,"DefinedVariables"),z=a([p],z);var U=class{constructor(){l(this,"cache",new y.Map)}_performFetchJson(e,t){return v(this,null,function*(){let r=this.core.get(h).window().fetch,o=e;if(t!=null&&t.authToken){let s=this.core.get(z).getAuthToken(),d=new URL(e);d.searchParams.set("token",s),o=d.href}try{return yield r(o).then(s=>s.json())}catch(s){return null}})}fetchJson(e,t){return v(this,null,function*(){let r=this.cache.summon(this.core.session,{}),o=r[e];return o==null&&(o=this._performFetchJson(e,t),r[e]=o),yield o})}};i(U,"Fetch"),U=a([p],U);var ke=i(n=>n==null?"":`@${n}`,"getPositionSuffix");var cr=/^(\d+)x(\d+)$/,Pt=i(n=>n==="all"?[]:n.split(",").map(e=>{let t=e.match(cr);return t==null?{label:e}:{width:parseInt(t[1],10),height:parseInt(t[2],10)}}),"stringToSlotSizes"),ot=i(n=>n.length===0?"all":n.map(({width:e,height:t,label:r})=>r!=null?r:`${e}x${t}`).join(","),"slotSizesToString"),Ct=i(n=>n==null?"":n.length>0&&n.every(({label:r})=>r==null)?ot(n):"","slotSizesToStringIfSpecific");var gr="https://pub.doubleverify.com/dvtag/signals/",q=class{_getBaseUrl(e){let t=this.core.get(b),{ctx:r,cmp:o}=t.getTagInfo(),s=t.getNormalizedPageUrl();try{s=new URL(s).origin}catch(g){}let d=new URL(e,gr);return d.searchParams.set("ctx",r),d.searchParams.set("cmp",o),d.searchParams.set("url",s),d}getUserTargetingUrl(e){let t=this._getBaseUrl("ids/pub.json");return e.includes("IDS")&&t.searchParams.set("ids","1"),t.href}getPageTargetingUrl(e,t){let r=this._getBaseUrl("bsc/pub.json");return r.searchParams.set("url",t),e.includes("BSC")&&r.searchParams.set("bsc","1"),e.includes("ABS")&&r.searchParams.set("abs","1"),e.includes("CBS")&&r.searchParams.set("cbs","1"),e.includes("CCT")&&r.searchParams.set("cct","1"),r.href}getSlotTargetingUrl(e,t){var s;let r=this._getBaseUrl("vlp/pub.json");e.includes("VLP")&&r.searchParams.set("vlp","1"),e.includes("TVP")&&r.searchParams.set("tvp","1");let o=0;for(let d of t){let{id:g,position:f,sizes:S}=(s=d.adUnit)!=null?s:{},P=g+ke(f);r.searchParams.set(`slot-${o++}-${P}`,Ct(S))}return r.href}};i(q,"SignalsUrlBuilder"),q=a([p],q);var ie=class{constructor(){l(this,"cache",{})}_fetchFreshSignals(e,t){return v(this,null,function*(){if(!t.some(Et))return{};let r=this.core.get(q).getPageTargetingUrl(t,e),o=yield this.core.get(U).fetchJson(r,{authToken:!0});return o instanceof Object?o:{}})}fetchSignals(e,t=3){return v(this,null,function*(){let r=this.core.get(b),o=r.getNormalizedPageUrl(),s=r.getStrippedPageUrl();this.cache[s]==null&&(this.cache[s]=this._fetchFreshSignals(o,e));let d=yield this.cache[s];return this.core.get(b).getStrippedPageUrl()!==s&&t>0?this.fetchSignals(e,t-1):d})}};i(ie,"PageSignals"),ie=a([p],ie);var se=class{constructor(){l(this,"cache",{});l(this,"pendingSlots",[]);l(this,"pendingBulkRequest",null)}_scheduleBulkRequest(e){return v(this,null,function*(){yield Promise.resolve();let t=this.core.get(q).getSlotTargetingUrl(e,this.pendingSlots);this.pendingSlots=[],this.pendingBulkRequest=null;let r=yield this.core.get(U).fetchJson(t,{authToken:!0});return r instanceof Array?r:[]})}_fetchFreshSignals(e,t){return v(this,null,function*(){if(!t.some(yt))return{};let r=this.pendingSlots.push(e)-1;this.pendingBulkRequest==null&&(this.pendingBulkRequest=this._scheduleBulkRequest(t));let s=(yield this.pendingBulkRequest)[r];return s instanceof Object?s:{}})}_getCacheKey(e){var g,f;let{id:t,position:r,sizes:o}=(g=e.adUnit)!=null?g:{},s=t+ke(r),d=(f=o==null?void 0:o.map(S=>{var P;return(P=S.label)!=null?P:`${S.width}x${S.height}`}).sort().join(","))!=null?f:"";return`${s}#${d}`}fetchSignals(e,t){return v(this,null,function*(){let r=this._getCacheKey(e);return this.cache[r]==null&&(this.cache[r]=this._fetchFreshSignals(e,t)),this.cache[r]})}};i(se,"SlotSignals"),se=a([p],se);var ae=class{constructor(){l(this,"cache")}_fetchFreshSignals(e){return v(this,null,function*(){if(!e.some(Tt))return{};let t=this.core.get(q).getUserTargetingUrl(e),r=yield this.core.get(U).fetchJson(t,{authToken:!0});return r instanceof Object?r:{}})}fetchSignals(e){return v(this,null,function*(){return this.cache==null&&(this.cache=this._fetchFreshSignals(e)),this.cache})}};i(ae,"UserSignals"),ae=a([p],ae);var R=class{constructor(){l(this,"plugins",{getEnabledSignals:i(()=>[],"getEnabledSignals"),userTargetingUpdated:i(e=>[],"userTargetingUpdated"),pageTargetingUpdated:i(e=>[],"pageTargetingUpdated"),slotTargetingUpdated:i((e,t)=>[],"slotTargetingUpdated")});l(this,"dataForMigrationTracking",{userTargeting:{},pageTargeting:{},slotTargeting:new Map})}getEnabledSignals(){return this.plugins.getEnabledSignals()}getDataForMigrationTracking(){return this.dataForMigrationTracking}_initialize(){this.getUserTargeting(),this.getPageTargeting()}_onAdRequestQueued(){this.getPageTargeting()}_onSlotDiscovered(e){this.getSlotTargeting(e)}getUserTargeting(){return v(this,null,function*(){let e=this._fetchUserTargeting();return this.core.get(E).delayAdRequests(e),e})}getPageTargeting(){return v(this,null,function*(){let e=this._fetchPageTargeting();return this.core.get(E).delayAdRequests(e),e})}getSlotTargeting(e){return v(this,null,function*(){let t=this._fetchSlotTargeting(e);return this.core.get(E).delayAdRequests(t),t})}_fetchUserTargeting(){return v(this,null,function*(){let e=yield this.core.get(ae).fetchSignals(this.getEnabledSignals());return this.core.get(A).setGlobalTargeting(e),this.dataForMigrationTracking.userTargeting=e,this.plugins.userTargetingUpdated(e),e})}_fetchPageTargeting(){return v(this,null,function*(){let e=yield this.core.get(ie).fetchSignals(this.getEnabledSignals());return this.core.get(A).setGlobalTargeting(e),this.dataForMigrationTracking.pageTargeting=e,this.plugins.pageTargetingUpdated(e),e})}_fetchSlotTargeting(e){return v(this,null,function*(){let t=yield this.core.get(se).fetchSignals(e,this.getEnabledSignals());return this.core.get(A).setSlotTargeting(e,t),this.dataForMigrationTracking.slotTargeting.set(e,t),this.plugins.slotTargetingUpdated(e,t),t})}};i(R,"Signals"),a([_],R.prototype,"_initialize",1),a([m(E,"adRequestQueued")],R.prototype,"_onAdRequestQueued",1),a([m(T,"slotDiscovered")],R.prototype,"_onSlotDiscovered",1),R=a([p],R);var ge=class{_getEnabledSignals(){return"IDS"}};i(ge,"SignalsIds"),a([m(R,"getEnabledSignals")],ge.prototype,"_getEnabledSignals",1),ge=a([p],ge);var pe=class{_getEnabledSignals(){return"BSC"}};i(pe,"SignalsBsc"),a([m(R,"getEnabledSignals")],pe.prototype,"_getEnabledSignals",1),pe=a([p],pe);var me=class{_getEnabledSignals(){return"ABS"}};i(me,"SignalsAbs"),a([m(R,"getEnabledSignals")],me.prototype,"_getEnabledSignals",1),me=a([p],me);var fe=class{_getEnabledSignals(){return"VLP"}};i(fe,"SignalsVlp"),a([m(R,"getEnabledSignals")],fe.prototype,"_getEnabledSignals",1),fe=a([p],fe);var he=class{_getEnabledSignals(){return"TVP"}};i(he,"SignalsTvp"),a([m(R,"getEnabledSignals")],he.prototype,"_getEnabledSignals",1),he=a([p],he);var Re=i(n=>{if(n==null)return[];let e=Dt(n);return e!=null?[e]:Array.isArray(n)?n.map(Dt).filter(t=>t!=null):[]},"parseSlotSizes"),Dt=i(n=>{if(n==null)return null;if(typeof n=="string")return{label:n};if(Array.isArray(n)){if(n.length===1&&typeof n[0]=="string")return{label:n[0]};if(n.length===2&&typeof n[0]=="number"&&typeof n[1]=="number")return{width:n[0],height:n[1]}}if(typeof n=="object"){let{label:e,width:t,height:r}=n;if(typeof t=="number"&&typeof r=="number")return{width:t,height:r};if(typeof e=="string")return{label:e}}return null},"parseSlotSize");var xt=i(n=>{try{return n.getSizes()}catch(e){return[]}},"getGptSlotSizesSafe");var Fe=i(n=>{let e=n.split("/").map(o=>o.trim()).filter(o=>o.length>0);if(e.length<2)return;let t=e[0].split(",",1)[0],r=Number(t);return Number.isNaN(r)?void 0:`${r}`},"getNetworkCodeFromAdUnit");var $e=i((n,e)=>{let t=n.getAdUnitPath(),r=Fe(t);return{id:t,network:r,sizes:Re(xt(n)),position:n.getTargeting(e)[0]}},"gptSlotToAdUnit");var it="dvp_spos";var K=class{_getAdServers(){try{return u}catch(e){return{}}}isAdServerConfigured(e){return e!=null&&e in this._getAdServers()}getAdServerConfig(e){var t;return e==null||!this.isAdServerConfigured(e)?{}:(t=this._getAdServers()[e])!=null?t:{}}getAdServerCustomTracking(e){var t;return e==null||!this.isAdServerConfigured(e)?{}:(t=this._getAdServers()[e].customTracking)!=null?t:{}}getAdServerId(e){if(!(e==null||!this.isAdServerConfigured(e)))return this._getAdServers()[e].adServerId}getAdPositionKey(e){var t,r;return e==null?it:(r=(t=this._getAdServers()[e])==null?void 0:t.adPositionKey)!=null?r:it}};i(K,"AdServers"),K=a([p],K);var k=class{constructor(){l(this,"pq",null)}getPq(){return this.pq==null&&(this.pq=this._initialize()),this.pq}getPts(){let e=this.getPq();return e.PTS==null&&(e.PTS={}),e.PTS}setApi(e){let t=this.getPq();t!=null&&(t.init=()=>{},t.loadSignals=e.loadSignals,t.loadSignalsForSlots=e.loadSignalsForSlots,t.getTargeting=e.getTargeting)}_pushToDvtagCmd(...e){var r,o;let t=this.core.get(h).window();t.dvtag=(r=t.dvtag)!=null?r:{},t.dvtag.cmd=(o=t.dvtag.cmd)!=null?o:[],t.dvtag.cmd.push(...e)}_initialize(){var o,s;let e=this.core.get(h).window();e.PQ=(o=e.PQ)!=null?o:{};let t=e.PQ;if(t.loaded)return{cmd:[],PTS:{}};t.loaded=!0,t.PTS=(s=t.PTS)!=null?s:{};let r=t.cmd;return t.cmd={push:i(d=>this._pushToDvtagCmd(d),"push")},Array.isArray(r)&&this._pushToDvtagCmd(...r),t}};i(k,"LegacyPq"),k=a([p],k);var It=i(n=>{var r,o,s;let e=Q(),t={id:(o=(r=n.adUnitPath)!=null?r:n.invCode)!=null?o:n.tagId,sizes:Re(Pt((s=n.sizes)!=null?s:"all")),position:n.position};return{elementId:e,adUnit:t}},"parseLegacyAdUnit");var Ot=i((n,e)=>{var o;let t=(o=n.IDS)==null?void 0:o[0];if(t==null)return;let r=parseInt(t);isNaN(r)||(e.IDS=r)},"setUserTargetingOnPts"),Nt=i((n,e)=>{for(let t of De)n[t]!=null&&(e[t]=n[t])},"setPageTargetingOnPts"),Lt=i((n,e,t)=>{var g,f,S,P,mt,ft;let{adUnit:r}=n;if((r==null?void 0:r.id)==null)return;let o=r.id,s=ot((g=r.sizes)!=null?g:[]),d=r.position;for(let oe of xe){let ze=e[oe];ze!=null&&((f=t[oe])!=null||(t[oe]={}),(P=(S=t[oe])[o])!=null||(S[o]={}),t[oe][o][s]=ze[0],d!=null&&((ft=(mt=t[oe][o])[d])!=null||(mt[d]={}),t[oe][o][d][s]=ze[0]))}},"setSlotTargetingOnPts");var Y=class{_initialize(){this.core.get(k).setApi({loadSignals:this.loadSignals.bind(this),loadSignalsForSlots:this.loadSignalsForSlots.bind(this),getTargeting:this.getTargeting.bind(this)})}_setUserTargetingOnPts(e){let t=this.core.get(k).getPts();Ot(e,t)}_setPageTargetingOnPts(e){let t=this.core.get(k).getPts();Nt(e,t)}_setSlotTargetingOnPts(e,t){let r=this.core.get(k).getPts();Lt(e,t,r)}loadSignals(e,t){return v(this,null,function*(){yield this._onDvtagReady("loadSignals",t)})}loadSignalsForSlots(e,t,r){return v(this,null,function*(){let o=this.core.get(R),s=this.core.get(T);for(let g of e){let f=g.getSlotElementId(),S=s.getSlot("gpt",f);if(S==null){let P=this.core.get(K).getAdPositionKey(g.getAdUnitPath());S=s.createSlot("gpt",0,f,$e(g,P))}o.getSlotTargeting(S)}let d=typeof t=="function"?t:r;yield this._onDvtagReady("loadSignalsForSlots",d)})}getTargeting(e,t){return v(this,null,function*(){var d;let r=this.core.get(R),o=this.core.get(T);for(let g of(d=e.adUnits)!=null?d:[]){let{elementId:f,adUnit:S}=It(g),P=o.createSlot("legacy-api",0,f,S);r.getSlotTargeting(P)}let s=i(()=>t==null?void 0:t(void 0,this.core.get(k).getPts()),"callback");yield this._onDvtagReady("getTargeting",s)})}_getPubAdsTargeting(e){var t,r,o;return(o=(r=(t=this.core.get(h).window().googletag)==null?void 0:t.pubads)==null?void 0:r.call(t).getTargeting(e))!=null?o:[]}_onDvtagReady(e,t){return v(this,null,function*(){yield new Promise(r=>{this.core.get(h).window().dvtag.queueAdRequest({callback:i(()=>{try{t==null||t()}catch(o){}r()},"callback"),timestamp:new Date().getTime(),timeout:750,internal:!0})})})}};i(Y,"LegacyLayer"),a([_],Y.prototype,"_initialize",1),a([m(R,"userTargetingUpdated")],Y.prototype,"_setUserTargetingOnPts",1),a([m(R,"pageTargetingUpdated")],Y.prototype,"_setPageTargetingOnPts",1),a([m(R,"slotTargetingUpdated")],Y.prototype,"_setSlotTargetingOnPts",1),Y=a([p],Y);var te=class{constructor(){l(this,"plugins",{adRemoved:i(e=>[],"adRemoved")})}_monitorAdRemoval(e){let t=this.core.get(h).document().getElementById(e.elementId);if(t==null)return;y.Create({parent:e,observer:new MutationObserver(o=>{let s=o.length,d=0,g=t.children.length;for(let f=o.length-1;f>=0;f--){let S=o[f];if(g===0){this.plugins.adRemoved(e);break}if(d===s-1)break;let P=S.removedNodes.length-S.addedNodes.length;g+=P,d++}})},({parent:o,observer:s})=>{s.disconnect(),this.plugins.adRemoved(o)}).observer.observe(t,{childList:!0})}};i(te,"AdRemoved"),a([m(T,"slotDiscovered")],te.prototype,"_monitorAdRemoval",1),te=a([p],te);var w=class{constructor(){l(this,"adEmpty",new y.Map);l(this,"adRequestInFlight",new y.Map);l(this,"nonEmptyAdResponses",new y.Map);l(this,"creatives",new y.Link);l(this,"plugins",{adRequested:i(e=>[],"adRequested"),adRequestedOrInferred:i(e=>[],"adRequestedOrInferred"),adRendered:i((e,t)=>[],"adRendered"),adRemoved:i(e=>[],"adRemoved")})}setAdRequested(e){this.adRequestInFlight.set(e,!0),this.plugins.adRequested(e),this.plugins.adRequestedOrInferred(e)}setAdRendered(e,t){this.adRequestInFlight.get(e)!==!0&&this.plugins.adRequestedOrInferred(e),this._setAdRemoved(e),this.adEmpty.set(e,!1),this.adRequestInFlight.set(e,!1),t!=null&&this.nonEmptyAdResponses.set(e,this.nonEmptyAdResponses.summon(e,0)+1);let r=null;if(t!=null){let o=this.core.get(h).time();r=y.Create(O({parent:e,timestamp:o},t)),this.creatives.get(e).add(r)}this.plugins.adRendered(e,r)}_setAdRemoved(e){if(this.adEmpty.get(e)===!1){this.adEmpty.set(e,!0);for(let t of this.creatives.get(e))t.destroy();this.plugins.adRemoved(e)}}getNonEmptyAdRenderedCount(e){return this.nonEmptyAdResponses.summon(e,0)}};i(w,"AdServerHub"),a([m(te,"adRemoved")],w.prototype,"_setAdRemoved",1),w=a([p],w);var je=i(n=>{if(typeof n=="string"||Array.isArray(n)&&n.length===2&&n.every(e=>typeof e=="number"))return n;if(n!=null&&typeof n.width=="number"&&typeof n.height=="number")return[n.width,n.height]},"cleanSizeInput");var N=i(n=>{if(typeof n=="string")return n;if(typeof n=="number")return`${n}`},"cleanStringInput");var F=class{getPubAds(){var t,r;let e=this.core.get(h).window();try{return(r=(t=e.googletag)==null?void 0:t.pubads)==null?void 0:r.call(t)}catch(o){return}}onPubAdsReady(e){var o,s,d,g;let t=this.core.get(h).window();t.googletag=(o=t.googletag)!=null?o:{},t.googletag.cmd=(s=t.googletag.cmd)!=null?s:[];let r=this.getPubAds();if(r!=null)e(r);else try{(g=(d=t.googletag.cmd)==null?void 0:d.push)==null||g.call(d,()=>{r=this.getPubAds(),r!=null&&e(r)})}catch(f){}}};i(F,"GoogletagPubAds"),F=a([p],F);var L=class{constructor(){l(this,"gptReference",new y.Map)}_scanForSlots(){this.core.get(F).onPubAdsReady(e=>{e.getSlots().map(t=>this.maybeDiscoverSlot(t,0))})}getGptSlot(e){return this.gptReference.get(e)}maybeDiscoverSlot(e,t){let r=this.core.get(T).getSlot("gpt",e.getSlotElementId());return r==null||this.gptReference.get(r)!==e?this._createSlot(e,t):r}_createSlot(e,t){let r=e.getSlotElementId(),o=e.getAdUnitPath(),s=Fe(o),d=this.core.get(K).getAdPositionKey(s),g=$e(e,d);return this.core.get(T).createSlot("gpt",t,r,g,S=>this.gptReference.set(S,e))}};i(L,"GoogletagSlots"),a([_,m(E,"adRequestQueued")],L.prototype,"_scanForSlots",1),L=a([p],L);var W=class{constructor(){l(this,"plugins",{adRequested:i(e=>[],"adRequested"),adRendered:i((e,t)=>[],"adRendered")})}_getHtmlSafe(e){var t,r;try{return(r=(t=e.getHtml)==null?void 0:t.call(e))!=null?r:void 0}catch(o){return}}_initialize(){this.core.get(F).onPubAdsReady(e=>{e.addEventListener("slotRequested",t=>{let r=this.core.get(L).maybeDiscoverSlot(t.slot,1);this.plugins.adRequested(r)}),e.addEventListener("slotRenderEnded",t=>{let r=this.core.get(L).maybeDiscoverSlot(t.slot,2);if(t.isEmpty){this.plugins.adRendered(r,null);return}let o={type:"display",advertiserId:N(t.advertiserId),campaignId:N(t.campaignId),creativeId:N(t.creativeId),lineItemId:N(t.lineItemId),renderedSize:je(t.size),html:this._getHtmlSafe(t.slot)};this.plugins.adRendered(r,o)})})}};i(W,"GoogletagEvents"),a([_],W.prototype,"_initialize",1),W=a([p],W);var st=i(n=>typeof n=="string"||typeof n=="number"?[`${n}`]:n instanceof Array?ee(n.filter(e=>typeof e=="string"||typeof e=="number").map(e=>`${e}`)):[],"cleanTargetingInput");var re=class{getAdServerTargeting(e,t){var s,d,g;if(e.adServer!=="gpt")return[];let r=[];try{r=st((d=(s=this.core.get(F).getPubAds())==null?void 0:s.getTargeting)==null?void 0:d.call(s,t))}catch(f){}let o=[];try{o=st((g=this.core.get(L).getGptSlot(e))==null?void 0:g.getTargeting(t))}catch(f){}return ee(r,o)}setAdServerTargeting(e,t,r){var o;if(e.adServer==="gpt")try{(o=this.core.get(L).getGptSlot(e))==null||o.setTargeting(t,r)}catch(s){}}};i(re,"GoogletagTargeting"),re=a([p],re);var $=class{_onAdRequested(e){this.core.get(w).setAdRequested(e)}_onAdRendered(e,t){this.core.get(w).setAdRendered(e,t)}_getAdServerTargeting(e,t){return e.adServer!=="gpt"?[]:this.core.get(re).getAdServerTargeting(e,t)}_setAdServerTargeting(e,t,r){e.adServer==="gpt"&&this.core.get(re).setAdServerTargeting(e,t,r)}};i($,"Googletag"),a([m(W,"adRequested")],$.prototype,"_onAdRequested",1),a([m(W,"adRendered")],$.prototype,"_onAdRendered",1),a([m(A,"getAdServerTargeting")],$.prototype,"_getAdServerTargeting",1),a([m(A,"setAdServerTargeting")],$.prototype,"_setAdServerTargeting",1),$=a([p],$);var Mt=i((n,e=!0)=>{let t=document.createElement("script");return t.setAttribute("src",n),e&&t.setAttribute("async",""),t},"createScriptElement");var le=i(()=>{var n,e,t;return Math.floor((t=(e=(n=window.performance)==null?void 0:n.now)==null?void 0:e.call(n))!=null?t:Date.now())},"perfNowOrDateNow");var at=class at{constructor(){l(this,"_firstQueuedAdRequest",1/0);l(this,"_lastQueuedAdRequest",-1/0);l(this,"_firstReleasedAdRequest",1/0);l(this,"_lastReleasedAdRequest",-1/0);l(this,"_lastReleasedAdRequestTime",null);l(this,"_hasBeenSuccessful",!1)}setAdRequestQueued(e){this._firstQueuedAdRequest=Math.min(this._firstQueuedAdRequest,e),this._lastQueuedAdRequest=Math.max(this._lastQueuedAdRequest,e)}setAdRequestReleased(e){this._firstReleasedAdRequest=Math.min(this._firstReleasedAdRequest,e),this._lastReleasedAdRequest=Math.max(this._lastReleasedAdRequest,e),this._lastReleasedAdRequestTime=le()}getLastQueuedAdRequest(){return Number.isFinite(this._lastQueuedAdRequest)?this._lastQueuedAdRequest:null}getLastReleasedAdRequest(){return Number.isFinite(this._lastReleasedAdRequest)?this._lastReleasedAdRequest:null}getLastReleasedAdRequestTime(){return this._lastReleasedAdRequestTime}getLastSuccessfulAdRequest(){let e=Math.max(this._firstQueuedAdRequest,this._firstReleasedAdRequest),t=Math.min(this._lastQueuedAdRequest,this._lastReleasedAdRequest);return t<e?null:t}getPreviouslySuccessful(){return this._hasBeenSuccessful}markAdServerAdRequest(){this.getLastSuccessfulAdRequest()!=null&&(this._hasBeenSuccessful=!0),this._firstQueuedAdRequest=1/0,this._lastQueuedAdRequest=-1/0,this._firstReleasedAdRequest=1/0,this._lastReleasedAdRequest=-1/0,this._lastReleasedAdRequestTime=null}};i(at,"SlotAdRequestTracker");var Be=at;var Ve=(d=>(d.UNKNOWN="UNKNOWN",d.SEEN="SEEN",d.NOT_READY="NOT_READY",d.POSSIBLE_TIMEOUT="POSSIBLE_TIMEOUT",d.PREV_READY="PREV_READY",d.READY="READY",d))(Ve||{});var lt="dv_upt_slot_ready",mr=["https://securepubads.g.doubleclick.net/gampad/ads?","https://pagead2.googlesyndication.com/gampad/ads?"],fr=750,x=class{constructor(){l(this,"plugins",{onSlotRequested:i(()=>[],"onSlotRequested"),onSlotRequestValidated:i(()=>[],"onSlotRequestValidated")});l(this,"validateAdRequests",!1);l(this,"lastAdRequestQueued",null);l(this,"lastAdRequestReleased",null);l(this,"state",{adRequestTracker:new y.Map,triggered:new y.Map})}_getSlotAdRequestTracker(e){return this.state.adRequestTracker.conjure(e,()=>new Be)}_onAdRequestQueued({index:e}){this.lastAdRequestQueued=e;for(let t of this.core.get(T).getSlots())this._getSlotAdRequestTracker(t).setAdRequestQueued(e),this.state.triggered.set(t,!1)}_onAdRequestBeforeRelease({index:e}){let t=this.core.get(A);this.lastAdRequestReleased=e;for(let r of this.core.get(T).getSlots())this._getSlotAdRequestTracker(r).setAdRequestReleased(e),this.validateAdRequests&&t.setSlotTargeting(r,{[lt]:["1"]})}_onSlotDiscovered(e,t){t===0&&this.lastAdRequestQueued!=null&&this._getSlotAdRequestTracker(e).setAdRequestQueued(this.lastAdRequestQueued)}_determineReadyState(e){let t=this._getSlotAdRequestTracker(e),r=t.getLastQueuedAdRequest(),o=t.getLastSuccessfulAdRequest(),s=t.getPreviouslySuccessful();return o!=null?"READY":s?"PREV_READY":r!=null?"NOT_READY":Date.now()-e.creationTime>fr?"SEEN":"UNKNOWN"}getSlotReadyStateOnAdServerAdRequest(e){let t=this._determineReadyState(e);if(t==="READY"){if(this.state.triggered.get(e)===!0)return{readyState:"PREV_READY"};this.state.triggered.set(e,!0);let r=this._getSlotAdRequestTracker(e).getLastReleasedAdRequestTime();return{readyState:t,readyFor:le()-r}}return{readyState:t}}_onSlotRequested(e){let{readyState:t,readyFor:r}=this.getSlotReadyStateOnAdServerAdRequest(e);this._getSlotAdRequestTracker(e).markAdServerAdRequest(),this.validateAdRequests&&this.core.get(A).setSlotTargeting(e,{[lt]:["0"]}),this.plugins.onSlotRequested(e,t,r)}enableAdRequestValidation(){if(!this.validateAdRequests)try{let e=this._processResourceRequest.bind(this);new PerformanceObserver(r=>r.getEntries().forEach(e)).observe({type:"resource"}),this.validateAdRequests=!0}catch(e){}}_processResourceRequest(e){var t,r,o;try{if(mr.every(g=>!e.name.startsWith(g)))return;let d=(r=(t=new URL(e.name).searchParams.get("prev_scp"))==null?void 0:t.split("|"))!=null?r:[];for(let g of d){let S=((o=new URLSearchParams(g).get(lt))==null?void 0:o[0])==="1";this.plugins.onSlotRequestValidated(S)}}catch(s){}}};i(x,"SlotReadinessTracker"),a([m(E,"adRequestQueued")],x.prototype,"_onAdRequestQueued",1),a([m(E,"adRequestBeforeRelease"),m(E,"adRequestTimedOut")],x.prototype,"_onAdRequestBeforeRelease",1),a([m(T,"slotDiscovered")],x.prototype,"_onSlotDiscovered",1),a([m(w,"adRequested")],x.prototype,"_onSlotRequested",1),x=a([p],x);var dt="__dvtag_debug_mode",Ut="1",H=class{constructor(){l(this,"enabled",!1);l(this,"debugScriptResolve",i(e=>{},"debugScriptResolve"))}_initialize(){let e=this.core.get(h).window();try{this.enabled=e===e.top&&e.sessionStorage.getItem(dt)===Ut}catch(t){}this.enabled&&(this.core.get(E).delayAdRequests(new Promise(t=>{this.debugScriptResolve=t})),this._loadDebugScript())}_toggleDebugMode(){let e=this.core.get(h).window();this.enabled?e.sessionStorage.removeItem(dt):e.sessionStorage.setItem(dt,Ut),e.location.reload()}debugScriptLoaded(){this.debugScriptResolve(void 0)}_loadDebugScript(){return v(this,null,function*(){let e=this.core.get(h).document(),t=this.core.get(b).getCurrentScriptBaseUrl(),r=Mt(`${t}debug.js`,!0);e.readyState==="loading"&&(yield new Promise(o=>e.addEventListener("DOMContentLoaded",()=>o(void 0)))),e.head.appendChild(r)})}};i(H,"DebugScriptLoader"),a([_],H.prototype,"_initialize",1),a([m(D,"toggleDebugMode")],H.prototype,"_toggleDebugMode",1),H=a([I(x),p],H);var ut="qt_loaded",qt="pts_pid";var ct=i(n=>[...new Set(n.filter(St).map(e=>e.toLowerCase()))],"getGreenlightSignal");var de=class{_autoInsertGlobalTargeting(e){this.core.get(A).setGlobalTargeting({[ut]:ct(Object.keys(e))},!0)}_autoInsertSlotTargeting(e,t){this.core.get(A).setSlotTargeting(e,{[ut]:ct(Object.keys(t))},!0)}};i(de,"SignalsAutoInsertion"),a([m(R,"userTargetingUpdated"),m(R,"pageTargetingUpdated")],de.prototype,"_autoInsertGlobalTargeting",1),a([m(R,"slotTargetingUpdated")],de.prototype,"_autoInsertSlotTargeting",1),de=a([p,I($),I(H)],de);var kt=i((n,e)=>(e==null?void 0:e.structuredClone)!=null?e.structuredClone(n):JSON.parse(JSON.stringify(n)),"deepClone");var Ft=i(n=>{if(typeof n!="object"||n===null||Array.isArray(n))return!1;let e=n;return e.gdprApplies!==void 0&&typeof e.gdprApplies!="boolean"&&e.gdprApplies!==0&&e.gdprApplies!==1||e.eventStatus!=="tcloaded"&&e.eventStatus!=="cmpuishown"&&e.eventStatus!=="useractioncomplete"&&e.eventStatus!==void 0||e.tcString!==void 0&&typeof e.tcString!="string"?!1:e.gdprApplies===!1||e.gdprApplies===0||e.gdprApplies===void 0?!(e.tcString!==void 0||e.purpose!==void 0||e.vendor!==void 0||e.publisher!==void 0):!(typeof e.tcString!="string"||!hr(e.purpose)||!vr(e.vendor)||!Sr(e.publisher))},"isValidTCData"),hr=i(n=>{if(typeof n!="object"||n===null)return!1;let e=n;return Qe(e.consents)&&Qe(e.legitimateInterests)},"isValidPurposeObject"),vr=i(n=>{if(typeof n!="object"||n===null)return!1;let e=n;return Qe(e.consents)&&Qe(e.legitimateInterests)},"isValidVendorObject"),Sr=i(n=>{if(typeof n!="object"||n===null||n===void 0)return!1;let e=n;return!(e.restrictions!==void 0&&!yr(e.restrictions))},"isValidPublisherObject"),Qe=i(n=>typeof n!="object"||n===null?!1:Object.entries(n).every(([e,t])=>{let r=parseInt(e,10);return!isNaN(r)&&(typeof t=="boolean"||t===void 0)}),"isRecordOfBooleansOrUndefined"),yr=i(n=>typeof n!="object"||n===null?!1:Object.entries(n).every(([e,t])=>{let r=parseInt(e,10);return isNaN(r)||typeof t!="object"||t===null?!1:Object.entries(t).every(([o,s])=>{let d=parseInt(o,10),g=Number(s);return!isNaN(d)&&!isNaN(g)&&g>=0&&g<=3})}),"isValidPublisherRestrictions");var Oe=126,$t=2,Tr=20,Er=250;var ne=class{constructor(){l(this,"firstResultPromise",new y.Map);l(this,"tcState",new y.Map);l(this,"declaredPurposes",new y.Map);l(this,"plugins",{signalReady:i(()=>[],"signalReady")})}getTcState(){return O({},this.tcState.conjure(this.core.session,()=>({apiAvailable:this._getCmpApi()!=null,applies:"",signalSettled:!1,tcString:""})))}getDeclaredPurposes(){return O({},this.declaredPurposes.conjure(this.core.session,()=>({purposes:[],flexiblePurposes:[2,7,8,10],legIntPurposes:[2,7,8,10]})))}getTcStateAsync(){return v(this,null,function*(){return yield this._getTcStatePromise(),this.getTcState()})}apiAvailable(){return this.getTcState().apiAvailable}applies(){let e=this.getTcState();return e.applies==="1"?!0:e.applies==="0"?!1:void 0}hasLegalBasis(e){let{applies:t,tcString:r,purpose:o,vendor:s}=this.getTcState();if(t!=="1"||r===""||o==null||s==null)return;let d=this._getActiveLegalBasis(e);if(d!=null)return d===0?!1:d===1?o.consents[e]===!0&&s.consent===!0:o.legitimateInterests[e]===!0&&s.legitimateInterest===!0}_getTcStatePromise(){return v(this,null,function*(){return this.firstResultPromise.conjure(this.core.session,()=>this._monitorTcState()).catch(()=>{})})}_monitorTcState(){return v(this,null,function*(){let e=yield this._getCmpApiAsync();if(e!=null){try{e("getVendorList",$t,(t,r)=>{var o;if(r===!0&&((o=t==null?void 0:t.vendors)==null?void 0:o[Oe])!=null){let{purposes:s,flexiblePurposes:d,legIntPurposes:g}=t.vendors[Oe];this._setDeclaredPurposes({purposes:s,flexiblePurposes:d,legIntPurposes:g})}})}catch(t){}yield new Promise(t=>{try{e("addEventListener",$t,(r,o)=>{o===!0&&Ft(r)&&this._setTcState(r),t()})}catch(r){t()}})}})}_getCmpApiAsync(){return v(this,null,function*(){let e=this.core.get(h).window(),t=this._getCmpApi(),r=0;for(;t==null&&r<Tr;)r++,yield new Promise(o=>e.setTimeout(o,Er)),t=this._getCmpApi();return t})}_getCmpApi(){let t=this.core.get(h).window().__tcfapi;if(typeof t=="function")return t}_setDeclaredPurposes(e){this.declaredPurposes.set(this.core.session,{purposes:[...e.purposes],flexiblePurposes:[...e.flexiblePurposes],legIntPurposes:[...e.legIntPurposes]})}_setTcState(e){let t=this._convertTcDataToTcState(e);this.tcState.set(this.core.session,t),t.signalSettled&&this.plugins.signalReady()}_convertTcDataToTcState(e){let t=e.gdprApplies==null?"":e.gdprApplies===!0||e.gdprApplies===1?"1":"0",r=e.eventStatus==="tcloaded"||e.eventStatus==="useractioncomplete"||t==="0",o={apiAvailable:!0,applies:t,signalSettled:r,tcString:""};return!(e.gdprApplies===!0||e.gdprApplies===1)||e.tcString===""?o:be(O({},o),{tcString:e.tcString,purpose:kt(e.purpose),vendor:{legitimateInterest:e.vendor.legitimateInterests[Oe]===!0,consent:e.vendor.consents[Oe]===!0},publisherRestrictions:this._extractDvRestrictions(e.publisher.restrictions)})}_extractDvRestrictions(e){let t={};for(let[r,o]of Object.entries(e)){let s=o[Oe];s!=null&&(t[Number(r)]=s)}return t}_getActiveLegalBasis(e){let t=this.getDeclaredPurposes(),{publisherRestrictions:r}=this.getTcState();if(r==null)return;let o=r[e];if(o===0)return 0;let s=t.legIntPurposes.includes(e)?2:t.purposes.includes(e)?1:0;if(s===0)return 0;if(o===1||o===2){let d=o===1?1:2,g=t.flexiblePurposes.includes(e);return s===d||g?d:0}return s}};i(ne,"Gdpr"),a([_],ne.prototype,"_getTcStatePromise",1),ne=a([p],ne);var Rr="https://vtrk.doubleverify.com",Gt="dvtag",Ar=1,M=class{constructor(){l(this,"sharedDataPoints")}_onAdRequestCompleted(e){if(e.index!==0)return;let{timeoutValue:t,onDvtagReadyCalled:r,callbackCalled:o}=e,s=o!=null?o-r:t,{applies:d,apiAvailable:g}=this.core.get(ne).getTcState();this.fireEvent("ad-request",{cd111:e.status,cm106:e.index,cm107:s,cd112:e.internal?"legacy":"modern",cd115:d,cm116:g?1:0},{sampleInterval:Ar})}_getSharedDataPoints(){if(this.sharedDataPoints==null){let e=this.core.get(b),t=this.core.get(z),r=this.core.get(h),{ctx:o,cmp:s,legacy:d}=e.getTagInfo(),g=r.hostname(),f=e.getSessionUuid(),S=t.getShortCommitId();this.sharedDataPoints={cd102:S,cd103:"",cd107:f,cd109:d?"legacy":"modern",cd108:"",cd105:o,cd106:s,cd104:g}}return this.sharedDataPoints}fireEvent(e,t,{sampleInterval:r=1,trackerUuid:o=Q(),spoofWrapperId:s=!1}={}){if(Math.random()>=1/r)return;t=be(O(O({},t),this._getSharedDataPoints()),{cd101:e,cm101:r});let d=be(O({ec:Gt,ea:t.cd101,ctx:s?Gt:t.cd105,cmp:t.cd106},t),{cid:o,t:"event",v:1,z:o,cd160:o}),g=new URL(Rr);for(let[f,S]of Object.entries(d))S!=null&&g.searchParams.set(f,`${S}`);this.core.get(h).sendBeacon(g.href)}};i(M,"Events"),a([m(E,"adRequestCompleted")],M.prototype,"_onAdRequestCompleted",1),M=a([p],M);var _r=qt,B=class{constructor(){l(this,"restoreCount",0)}getRestoreCount(){return this.restoreCount}_restoreTargeting(){let e=this.core.get(A);for(let t of this.core.get(T).getSlots())e.getAdServerTargeting(t,_r).length===0&&(e.setAdServerTargeting(t),this.restoreCount+=1)}};i(B,"TargetingRestorer"),a([m(E,"adRequestQueued")],B.prototype,"_restoreTargeting",1),B=a([p],B);var gt=class gt{constructor(){l(this,"total",0);l(this,"dataPoints",0)}push(e){return this.total+=e,this.dataPoints+=1,this}get(){return this.total/this.dataPoints}getRounded(){return Math.round(this.get())}};i(gt,"Average");var Ne=gt;var br="implcheck",wr=1e-4,Pr=5e3,Cr=5,G=class{constructor(){l(this,"enabled",!1);l(this,"totalInternalAdRequestQueuedCount",0);l(this,"totalAdRequestsCompletedCount",0);l(this,"totalSlotsRequestedCount",0);l(this,"totalSlotsRequestedOkCount",0);l(this,"totalTimeoutCount",0);l(this,"trackersSent",0);l(this,"totalValidatedAdServerRequests",{ok:0,notOk:0});l(this,"lastOnDvtagReadyCall",NaN);l(this,"slotReqAvgTimeSinceCall",new Ne);l(this,"slotReqAvgTimeSinceDone",new Ne);l(this,"batch",null)}isDebugForceEnabled(){return!1}_initialize(){this.enabled=this.core.get(G).isDebugForceEnabled()||Math.random()<wr,this.enabled&&this.core.get(x).enableAdRequestValidation()}_onAdRequestQueued(e){this.enabled&&(this.lastOnDvtagReadyCall=le(),e.internal&&(this.totalInternalAdRequestQueuedCount+=1))}_onAdRequestCompleted(e){this.enabled&&(this.totalAdRequestsCompletedCount+=1,(e.status==="tag-timeout"||e.status==="queue-timeout")&&(this.totalTimeoutCount+=1))}_onSlotRequested(e,t,r){if(!this.enabled)return;let o=this._getOrStartBatch();this.totalSlotsRequestedCount+=1,t==="READY"&&(this.totalSlotsRequestedOkCount+=1),o.slots[t].push(e.elementId),r!=null&&(this.slotReqAvgTimeSinceDone.push(r),this.slotReqAvgTimeSinceCall.push(le()-this.lastOnDvtagReadyCall));let s=this._validateAdServerTargeting(e);s===1?o.targeting.extendedCount+=1:s===0&&(o.targeting.reducedCount+=1)}_validateAdServerTargeting(e){let t=this.core.get(A),r=2,o=t.getTargeting(e);for(let[s,d]of Object.entries(o)){let g=t.getAdServerTargeting(e,s);if(d.length>g.length||d.some(f=>!g.includes(f)))return 0;g.length>d.length&&(r=1)}return r}_onSlotRequestValidated(e){e?this.totalValidatedAdServerRequests.ok+=1:this.totalValidatedAdServerRequests.notOk+=1}_sendTracker(){let e=this.core.get(B).getRestoreCount(),{slots:t,targeting:r,start:o}=this._getOrStartBatch(),s={cd110:t.READY.join(),cd111:t.PREV_READY.join(),cd112:t.SEEN.join(),cd113:t.NOT_READY.join(),cd114:t.UNKNOWN.join(),cd115:t.POSSIBLE_TIMEOUT.join(),cm106:this.trackersSent,cm107:o,cm109:this.totalTimeoutCount,cm110:this.slotReqAvgTimeSinceCall.getRounded(),cm111:this.slotReqAvgTimeSinceDone.getRounded(),cm112:this.totalSlotsRequestedOkCount,cm113:this.totalValidatedAdServerRequests.ok,cm114:this.totalValidatedAdServerRequests.notOk,cm115:e,cm116:this.totalAdRequestsCompletedCount,cm117:this.totalInternalAdRequestQueuedCount,cm118:this.totalSlotsRequestedCount,cm119:r.reducedCount,cm120:r.extendedCount};this.core.get(M).fireEvent(br,s),this.batch=null,this.trackersSent+=1,this.trackersSent>=Cr&&(this.enabled=!1)}_getOrStartBatch(){return this.batch==null&&(this.batch={start:le(),slots:Object.fromEntries(Object.values(Ve).map(e=>[e,[]])),targeting:{extendedCount:0,reducedCount:0}},setTimeout(()=>this._sendTracker(),Pr)),this.batch}};i(G,"ImplementationValidator"),a([_],G.prototype,"_initialize",1),a([m(E,"adRequestQueued")],G.prototype,"_onAdRequestQueued",1),a([m(E,"adRequestCompleted")],G.prototype,"_onAdRequestCompleted",1),a([m(x,"onSlotRequested")],G.prototype,"_onSlotRequested",1),a([m(x,"onSlotRequestValidated")],G.prototype,"_onSlotRequestValidated",1),G=a([p],G);var X=class{_defineSlot(e,t={}){if(typeof e!="string"||t==null||typeof t!="object")return;let r={id:N(t.id),network:N(t.network),sizes:t.sizes!=null?Re(t.sizes):void 0,position:N(t.position)};this.core.get(T).createSlot("custom",0,e,r)}_adRendered(e,t){if(typeof e!="string"||t==null||typeof t!="object")return;let r=this.core.get(T).getSlot("custom",e);if(r==null)return;let o={type:"display",advertiserId:N(t.advertiserId),campaignId:N(t.campaignId),creativeId:N(t.creativeId),lineItemId:N(t.lineItemId),renderedSize:je(t.renderedSize)};this.core.get(w).setAdRendered(r,o)}_getTargeting(e){let t=this.core.get(A);if(typeof e!="string")return t.getTargeting();let r=this.core.get(T).getSlot("custom",e);return t.getTargeting(r)}};i(X,"CustomAdServer"),a([m(D,"defineSlot")],X.prototype,"_defineSlot",1),a([m(D,"getTargeting")],X.prototype,"_getTargeting",1),X=a([p],X);var J=class{_initialize(){this._flushCommandBuffer()}_flushCommandBuffer(){return v(this,null,function*(){var s;yield Promise.resolve();let e=this.core.get(h).window(),t=(s=e.dvtag)!=null?s:{};e.dvtag=t,t.cmd instanceof Array||(t.cmd=[]);let r=t.cmd,o=r.length;t.cmd={push:i((...d)=>{for(let g of d)try{g()}catch(f){}return o+=d.length,o},"push")},t.cmd.push(...r)})}};i(J,"CommandBuffer"),a([_],J.prototype,"_initialize",1),a([Ce],J.prototype,"_flushCommandBuffer",1),J=a([p],J);var Dr=Object.defineProperty,xr=Object.defineProperties,Ir=Object.getOwnPropertyDescriptors,jt=Object.getOwnPropertySymbols,Or=Object.prototype.hasOwnProperty,Nr=Object.prototype.propertyIsEnumerable,Bt=i((n,e,t)=>e in n?Dr(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,"__defNormalProp"),Le=i((n,e)=>{for(var t in e||(e={}))Or.call(e,t)&&Bt(n,t,e[t]);if(jt)for(var t of jt(e))Nr.call(e,t)&&Bt(n,t,e[t]);return n},"__spreadValues"),Vt=i((n,e)=>xr(n,Ir(e)),"__spreadProps");var Ae=(n=>(n.GAM="gam",n.XANDR="xandr",n.FREEWHEEL="freewheel",n.CUSTOM="custom",n))(Ae||{});var pt=(n=>(n[n.Disabled=0]="Disabled",n[n.Dryrun=1]="Dryrun",n))(pt||{});var Bg=typeof TextDecoder=="function"?new TextDecoder:void 0,Vg=typeof TextEncoder=="function"?new TextEncoder:void 0,Lr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Mr=Array.prototype.slice.call(Lr),Qg=(n=>{let e={};return n.forEach((t,r)=>e[t]=r),e})(Mr),zg=String.fromCharCode.bind(String),Kg=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):n=>new Uint8Array(Array.prototype.slice.call(n,0));var Ur="__DVPUB_OT__",qr=i(n=>Ur+new URLSearchParams(n).toString().replace(/=/g,":").replace(/&/g,"|").replace(/\+/g,"%20").replace(/[^a-zA-Z0-9:|%_]/g,e=>`%${e.charCodeAt(0).toString(16)}`),"encodeParams"),Qt=i((n,e)=>Object.entries(e).reduce((r,[o,s])=>(r[`${n}${o}`]=s,r),{}),"prefixKeys"),kr=i(n=>{let e={};for(let[t,r]of Object.entries(n))e[t]=`${r}`;return e},"stringifyValues"),zt=i((n,e,t)=>{if(n==="custom"||n==="freewheel")return{};let r=kr(Vt(Le({},e.passthroughParams),{dvp_uptpid:e.pageId,dvp_uptsid:e.slotId,dvp_uptsacnt:e.slotAdCount,dvp_qtpid:e.pageId})),o=qr(Le(Le({},e.wrapperMode!=null?{m:String(e.wrapperMode)}:{}),Qt("_",r)));return n==="gam"?Vt(Le(Le({dvpub_ot_params:o},e.wrapperMode!=null?{dv_upt_cwm:String(e.wrapperMode)}:{}),Qt("dv__",r)),{pts_pid:e.pageId,pts_sid:e.slotId}):n==="xandr"?{[t!=null?t:"pt1"]:o}:{}},"generateOmniTagTargeting");var Kt=i(n=>{let e={};for(let[t,r]of Object.entries(n))r!=null&&(e[t]=typeof r=="string"?[r]:r);return e},"toTargeting");var Fr={gpt:Ae.GAM,ast:Ae.XANDR,custom:Ae.CUSTOM,"legacy-api":Ae.CUSTOM},$r="pt9",V=class{constructor(){l(this,"plugins",{disableCreativeWrapperMeasurement:i(e=>[],"disableCreativeWrapperMeasurement")});l(this,"targetingSet",new y.Map);l(this,"targetingReliable",new y.Map)}_setCreativeWrapperTargeting(e){let t=e.uuid,r=this.core.get(b).getVisitUuid(),o=this._getNextSlotAdCount(e),s=this.plugins.disableCreativeWrapperMeasurement(e).some(d=>d===!0)?pt.Disabled:void 0;this.core.get(A).setSlotTargeting(e,Kt(zt(Fr[e.adServer],{slotId:t,pageId:r,slotAdCount:o,wrapperMode:s,passthroughParams:{dvp_uptacf:"1"}},$r))),this.targetingSet.set(e,!0)}_onNewVisit(){let e=this.core.get(T).getSlots();for(let t of e)this._setCreativeWrapperTargeting(t)}_onAdRequested(e){this.targetingReliable.set(e,this.targetingSet.get(e)===!0)}isTargetingReliable(e){return this.targetingReliable.get(e)===!0}_getNextSlotAdCount(e){return this.core.get(w).getNonEmptyAdRenderedCount(e)+1}};i(V,"CreativeWrapperTargeting"),a([m(T,"slotDiscovered"),m(w,"adRendered")],V.prototype,"_setCreativeWrapperTargeting",1),a([m(b,"newVisit")],V.prototype,"_onNewVisit",1),a([m(w,"adRequested")],V.prototype,"_onAdRequested",1),V=a([p],V);var Yt=10,Z=class{constructor(){l(this,"errors",new y.Map)}_getErrors(){return this.errors.summon(this.core.session,[])}toSafeCallback(e){return(...t)=>this._callSafely(e,t)}_callSafely(e,t){return e(...t)}_handleError(e,t){let r=this._getErrors(),o=t.join("=>");if(r.unshift(`${e}: ${o}`),r.length>Yt){r.length=Yt;return}this.core.get(M).fireEvent("log",{cd111:"error",cd112:e,cd113:o})}};i(Z,"ErrorHandler"),a([Ce],Z.prototype,"_callSafely",1),a([tt],Z.prototype,"_handleError",1),Z=a([p],Z);var _e=class{};i(_e,"HouseHold"),_e=a([p,I(D),I(E),I(J),I(M),I(Z),I(X),I(B),I(V)],_e);var Wt=i(n=>{var e,t,r,o,s,d;try{let g={};for(let[f,S,P]of(t=(e=window.dvtag)==null?void 0:e._overrides)!=null?t:[])(r=g[f])!=null||(g[f]={}),(s=(o=g[f])[S])!=null||(o[S]=P);for(let f of n)for(let[S,P]of Object.entries((d=g[f.name])!=null?d:{}))f.prototype[S]=P}catch(g){}},"applyDebugOverrides");var Gr=i(()=>{var n,e;((n=window.dvtag)==null?void 0:n._core)==null&&(Wt(Ue),window.dvtag=(e=window.dvtag)!=null?e:{},window.dvtag._core=new Pe(Ue),window.dvtag._core.execute())},"main");try{Gr()}catch(n){}})();
